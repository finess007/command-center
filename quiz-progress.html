<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"744e7b178f7a404f8c9b61db60c77081bfdb05d2bb6830a205129edc3f57f6b4d684015b1ceeafb46f494cd85a64773e8fa6fd3bac46f8d49233c901c6c700a3c244454c3fbcc95a1d2a1d454af3a525c28522f0969f1f65d9f0bc9f9ee837ccb25be39e477be2ae06177e69b4d45f62b1da9f20cdde2f2fdf7b8d9613c473b7d4fd5e0a0a3c922b236c3a9155c4d03f3c9126bbde5c9eac0be57046b07d57049dcf66a5d176232882ee879c990ec02508255f1f19daffcbc6a48d8a28175a0fcb1558031113b5bd06b06f767b03f7d44058c846bee9c8addd1e76757ceda889e7073bf6b8654446450b43e999cac032015215a014b8b0f42bf695c76a096eca4f3c52e41e58975a65c04e9d8f33d2d8c4f80d7537eae00d7bd37b3cd6e0bc01f4cbba3cc9ebc2ec399c6a4ab21f33fa8cc7db883763f01d728739cd67f8971e64b1bab6940492da15663359e2c8983718140eac081f8ec78445cc0866dbacb1520319f7aa7d2d35e38d0d82cb5e0c5e6a4888d5b31f528a53a713ef39ee7bacc1ee5a3c7725d998c134534a9437d52932113d82b8052fd583ce16456e05d890a62abd5c728e667a1a0d1bafe960e7985a7c781c367a33b40c757ac497b707c52aa17f4235b7151a1fb263d050c8e414b2549439793693e8197b2f053cc199dbd352ffbd8560f084a368e4aae850a09447d37104e1e8035d732509e544a80fccab3380a34a0755e791d73dc25d7b9519b937a7278893cc1379e29993d465713f895349d247728331d588e40d59268facbdb49a754b74e72b7303f050011fb1426511db3d8089b813cd686b08d3f564a8ee59a07da1a05c7d1ab6e1b37f5ceb8caa6c389d6b5e97ec63ee5ad4f6a397fb4fab86616e62e142f345975b69aaf9ff309dd296ad26539fa3dda2a35b5699d4182181ef8b1cd600c2d854a8ccd74c66f176e0438329c30f0fe0645ee3d7b310cf6ed84b053cf7a3df3127dbf1330f71a35eea1ec3376a390d0a9ae589893fbe3811893f077f307b7a5a2682457101cbca260f95be87b6d35a49b37253311f671e37b9a7e55d417ba895b1aa25299565cfb04054310b6253d8faa090c24665e45ff9b33923b52ab6c5ef9fcd98c49329cc1eacde2f3e108cebdc92458702cb948e859f15195d84912379b947779e49370972f9ab746b3eb9863e05a1d290b423f33fd74a7450148f802a1adf885965162fe1679f63a701faf60e312abb03852cc44e0228b51a593cd49bebb7056f3fe7abea2d086173fe3c5cbb646454c82026ea9a50240a9a56d75be19a41041c3fc9b45da0dba8ebb79a6463b7398739b6671dc36946c0d8ac8b0ee128e638afee834a9d230c43ee7dd4ffb7c00c79cb5dc0293459b6c2c8d74e54092bd17691b0b7927a5957707f2a8d40276aec3f5b0ddbc9356e547517651aa38688445882a45b9e8f4a5d9dac8c539843c3255350c539c342f5ec77b7721e06d50f5fbbe29b11710f7ceb0c4f538870f4c696591731e8e949eb255493cf0e5c71a79d4cb8041cedb1149fe87e6705ee16997b2b8889b9370b9cc6ee801bd340d299ba6347969dc689dbb10e284be2a887942c60a9bcf05aaacbe3a290f626c7b532f1bf9d1ffd341bbdec7ad65cf718be67a5066df25df36f6300f1fa27f664f746c97260904442016e2be036ba3de8c4c6153400290a309b2015e0c7171dba3119d3e8e99bed47cb896717269069696778afab47947e51fdb94a7947745f9a39831c028b330c71fd59971e85f69bbc9c1e6da54571e38f90c17950a84460d6b7deed087737869b86ad44d711d36a6a85628adee2fdfdb5c136f917b4dcabbc60f4a1fa2da2203244f85badb5cd3ad021cf5858b285833f5f51d412a31105fe8d788876276893c635bc27bfdb5051cc5c71386cdf1df9254547747936f81d4884bede631d0ae1505a02d936677d3933a561db918675c712259125ac704a25c7f10a0fbb58aca1842c311c7242e5d0a4e40bf5b0a6664c6a286a2b3f3304f2196aa17fc0c687906660650e9a821aba58df37ff3a0f5502ddc6081931204167014cc09fc52f49d6426981d9649d9cc64b25630cc3d474280c3bf015a62f5ce8eb119b0d333d1786f048f34009ad51efcf96a960e3de13b7b121b2b280b74410bf962261f9e77d7948e21e39d37fabb21581c38363e547382403bfe77101e7e7d7994493e25bec142249bb61f5a06c6d29cfb112cb9d19c0f0284725e00e7db76941ac573e5e882b9b1c5e2a964fb9329b95ac61aadd6368a6dfd042fddc32ed77cdedf2b6ec2f7b71ee5426ab2a57faa96782665df6b30d1362167f06e01dd195c12003e4fcb909dfecc553d9ac8579867f28377576649dbaa61a11beb73cbf854cb9941e4ffb763c39c50816225cc27a8bfcdd2a0f8178a0aef21c02c614a8bf98856cffb6e900e7cced007bfb9b408e9adb5f3a4683219b2049dd883cdca5608bdc8ba8e240e9cb8b783515965fc2e83aa163500857d66a8d34a4e2b09b755325ce61fdebe573f77be7a788c5bf281b9a45a5cbb5685c017e12357cd15198b21d4413bf5c8c5875e3564f73feef4c26a5164bb9e50ab74c73523ed5c406ef3d2170f3a327ae1cbbc6c3c589518cb16605af06ab53cf78dd06e4c023c62a3a6d369346f0e2782388b6957332294e76a9821011ab25aa4c2c6ff23eb2bb47b54e45e9724b5bfcb20d07aeecd908d7d0661503949882af7fceab65c84fe129631b4a8f875dbeead97a5dbeac814506b86c964fccb1d3b5b31da64b6f0b9c2b5273aff9f085172e449f01e6f235c44bb575b0c6eee910976d5738bc93e7bf45887316c90cde17aba263c66fd2f8667a2483d4437ff1753e9f4df767a7c2b60ea64d5b749e6be2b07bbbf8301e05dc28d131d44f9fcd2d210fd0507da88fa8726193b842601f667b2c01f65f0b6252e6d0daeac0c8da0ecf3fdb122399705207f520dc9518b08d463b801165307f7d2f8794d1bb9de2a5e5094184c1266f4ce247e9135ee3edcee75c84de11f376aa7fbc1c65eb8bdc1d1d32f5a5b247fa3b17bf41b3f5351fb8e4051be5d268b147c434978d3e74ca59b69714697738e192fd936808fa7c9e4636eb948c4632125370d5b1273ecc05f11d87092ed86c2677e0c86cc0cba9dd0639e50c7eba1bd4eb977112c83f56f556c6fdcddedf2fb846886f7003debb8067875910ca58b4839332ae5ccabad6bd8ef54465bf085e6dcd2f71603bba650c2995be47c3c14af751733bba5ea82c2f9f37c6ec51d0a55a2be679f1d74458aac473d008233a2a074489fd8a52354905dac1c7ff0936950c3961e9f00be55f6da39a950d29a0baa0be05ad2df11751c15f925cff24b6c0125eeba5977762d4c7b261c9d12a1ab6d470989d86384e6530756946f692c90b6c13de82dadbb48f8b7a0b6f63edff29695b1051d651cc09c333dc007009d6bc0271446d3148d14e6bdbc6ebd118ab0e3349f5cad46b06574fa0e46f210e69f0ed35b72c7c7710a506cf9186a05cb0abf457d862e2572bfe5cefa296f25959c41dca8cb12b912efe878fdf763d63ddc99b5c2717ae82702b6f8a92176607da99a68443b9f1554b89f0a8fa85b9ae940f09b4db7a2f4f4bc0fda7852d4c4e432e42ea0b809d712ed7b1912d6c736997cd47097598b3534c22d4861420f48aa617b4cefd94f2e9fa813120015b49fa5eacefd7f76a10554ff6376af98b60adfa4a8601a7859e44f905185107827c29f2fe4624d45243eee9bd09a3a93eeaccad0f46d13252747af382d31b1f4b533dd99308207c79d2d081eb94a3ebcba30e2df08d04b91c89f2dd0e2fde1809a97eca20ccd9c2db80942a131ebe4c5329d346d18899082e629ee84254ed8c375e9c1048dd0ebc098bca87baa9ed745c6f17c3d955511427f02b37e358fc8dda5ca517eb56bb58195bab85d32a991fb83f9e26178397076933a0fbb73f385a220e29a727848c26b6d3e9e34a0bbe3b16331ede0a60af595340dbfde5bdb62eed9aab4933ad2cd5361862ba524a863bb2a7533d14b2eb7b7bba1bdf8c49f628579e551389af176dd4cbc7c291110002511ac233b8dce9bdb4d38d8b16221d3815291bf2da71ff0b127c0a8b80748e49cce09d67d843dd42a79d07a2060a48368d9042cc6ea25fc368e667d2c2e3bad579caf310ced2452a65f4f69736f9aa4e366cfd0d4258b185c513aabaa162fd4f496339120e3ce9c93311a21bbc0f3f4582d5fd2fa37667367116f04705a52d27e4f91e0f993686d921e0a98edcbc689e54501a085121f8b65fd40e8483c06d0b88b7558a4e898093f8f48a8a54426fee4e80e77868460d45fbecce9ea63076b61f11575e0e0a919e97e41c1b84a39a996d2fbf15673376d856133cc199d4857ab329cca8611d67765df53fd01b0c4a2864da0554991222db7456ff78838f17da3dc6a980bf841fd4ce19af7f92ab9dcb87e6a527e26432544f4c8b58c0a7ef7caa380045e02a1abbd0cccd71b55aa7a2cb24ab47b60c69a1232f29bec5f06423275061c3206ecdc05b7de66ee59047cb3615ba3ced0d6b5f4dd8e80ed361938ab8650ea3b5cbfae1ae2dd27dad0c1e8cc2862fa46d48aab17c890d2da6c3842e8f306994fc90ac387e327f005f2e2c8b4f078b40ca8bda6d56d37c7c282c37ffd753a27822cb0bc1eb22e5b279d2c89b44e637ed015f463b3fb6871c0d3a07b6312649764f36b96a33932e8940e0fe431c147ca10ebd1f7a83f151cd49e7872f390cb15aa6e81a3478843a31206b1c93b53902f0821b3e0b6b10ef39cf4855b4fb4070d849fa6214917ec0f66cfb58101b96f11c81c3d2cf727c452013ee89739566cc3eee7983f86167e2312d5832fac9dcf1a86c68c3f942bf9987cfabe7327ead4e8906ea4f106ed41aab08873735944067a100a3951d06062f956ec487748fc027b4a74d00b2b09b4bc0d101da67859692c0d087e0b3fa4a607e744e779553a8de323b0d5c623e0a17b64a289a881286919484e777a278eae8e9977b756568b86d403c2f27f0b0a6b7af9ec4ef4bfe951428915efb2ac93c678053dddeba13b8ac622abb3a15837ac91f7621db46b900bd459647155b5afa5f8fe2d341fb1e4c0edae09d507403d1e1cbdebc3b93059a108e7936b93fdfa1cd7416de00388185a33c2440577c05af4e77d8db4e9f6e8b82056bf54886a52a419f63bcb6c3f5a6abaef46824bd1c5f3fb797c1e4fd4cfa3cbb657f3975ae154073b6df8d850202786928732eecbb06c3eb5ed2e1ea405c823c44e7069ee91685b784124b7cf0aa048879ce9b2b7a1a746770344eeb45fd82071c550a9411f579f2700021e0fbfc2d8fd97f6c942f0224e6af6cdfb7ae6403cee43cf0f26c407d47b4f3ad7e7e0701da6f37d006b801af95b483d953ff06f115c92f9fca65ad984f4de7f38ee7ec7b3197ab0e6e40f95834af2041d00b029e65bd9ac5824a63dec3eef210553b9e6417f6e83b5667130854306692549ea9c209b94efb8ceb969650851c53b2f7610401bca3cbfa7c8fb77b41693bf8268c18ed72776782ed47aefa404ae16df30d61f8238cbda6c63477ff8b6fec95391ddd5440f798f45f0fd42c1c899f7251671831d0a86087c994e390dfc390478daa052fe739a28e7f3fde8c444d7e79b9c279bcd894497d5172ec99aafafcb0675a2a880a6ed2a7017cc3c4f3aee0e955f36cc0632be2e26102cd98bd1fa9b1162856e27e2631706041429415b90e168f7f8cb57780766cf8a1ccf48df55afb1d49a98f4576a8e86d6de890310a542ba3d07d8659f6628dd2b27a1c57d4208f028507d76cdebc1fc58ab2dd889a39a3e05dda99af470545462b871530610411c5b29617cd7890005d9d0f80fc0111559440ec33c57e2fe8afaab57717a51eadcde1174189201f48d0fd6f4a31761cc1a0ef96c20bfd7b7a1d77b69ef59afb137243e2ab71e361dd616412557f747f786afccd6228c0c9dd65ae218abe11e18ca4c7d066bb525df2cc3969b54cb6ae12b22c8853fe329dc91d8bfca45469534104e43295ac595d6cb89d8003e90da15f5a593ab1c710d7d4ed4ea92e2a466e2f341f75ced67db447e94e7d09754a7bee2296ca2776c66155878f9bcfbffa9471d31a645df60a83ecc8d6fdad6978743f0ee4908951c86805966ef425fcb7dd55d8a9df6057bfdf550674a487e5ea0f92003e12b7a04ca2517ad32fd33ec63e6c7471b4e1734798eee59c589f59aad986c27d8313d0869ea61ee6c2c99788bc852f82715be802b6f304f8fe6789a99591d4e36212d88524229472963bb12f978d5b6395e5d613377006fc836c87f3c24e66adabf5aab0a8ea9a520d66acd3a78ea85d61a0f0a1a5b1d88a165c8653f82a6695c3f124deb894a1227bab79393028dd88349076533aee1c712f7058271ff9e1256f1ec068f3bca8d0bcdacf5a58ffbaa29f93131f2571310e73a689b901d8af34b8c0ed721a2df0179fc4cd3574724c5ceb54fbe55392ae71000309dd701239d7daf405e2d714eb649915185ef8344bfac1bbc85af4dc96188a3acbe94fb865a302910ccc57655d9873aeef6c53f13434f1038aa4ebbedf974a17c7d05dc7f4e5c2f853296289d25403cf70822ad6f0e11568ad052ec154a921d6cf22510919f14ef900348ba802414b4964e45fa23a64708eebc641eca9d01c965e7e35457ae9f7805b122f8c4f63f6fc539928341f28c6e4db2130bc86df1823a49aec377d161777d8fcbc495327e2909eb17017766a6e6e6ee8abe86c945e3f8edeb5fcc50ca7e2633eefa43634855d497ad46de95db8732da16e4f2968ab5b1e7698f0f5d949afba0ce2c7bcae0cdc4e8c717a0f849f60d873344cac52876964d287c9e2b8cce7a069b2e8ea866b9527624d7b73604959025619d3e535ae24753c06d05daba34a0d93128ca43ca28d5fa810c0293533687d327480249879e761e8641bfdc1fa51f751ab232db312750c8cf5e4d501c88d3082456f03f4dbb6982c4bd560ff2410e6631442c8fa8417c446ce77e2c05352b9c58a2edcaf44f33593789ee68119447426e68fd06a2bfb7ff0c0b03dec84df630958b3d18ca74db75d1c656ab91ca7bb895a39c6c9ba76212ada62159e86bdec54fe08ba0844a4348159e7e708955bc342138d003cc21cc980fd0c0c7374b4ddd5917d5c2459cd1b5345b2dffcb5f16fe59948969eca4e6659575f69d40356f84f6c3ba711c02f2012b59724035b727ff970434e225cd6096f9d777c41dddeee5b7f66955bf01804a2cef8a684c63e03a8c8119dbc0c878fccf585681cefe7fc3744921f21d4e07f3c46ecac263ce0f90ee0646a025d47a0d7df9cb105c5aa8f83e55333ef0860247b71d38ae4a6bf7e7dbe6b68477d2a121f9ea6a2dbb8279c676bfa8e9e46235bc23ef37b8b943510dd658c33e4288f67f5cef19607013adc42f91f5504ce1b88883ab9e7ae4a1238325c5d1a31344c71feb5bc6d5fb5b255675306170d9768652ffc84d0b3de121175bc65c6434252b707aa8ce153f9720f3af2ff6ed315d4eaabb0144556dccc68dbca83537d8d7698c9b4f26ae3b7480c5568308e3866b6324bf16c7c99fdb7b19275c96468b6fdba3c3e298ebcbd98b254f2b9fd15648f1e0572f9480e506fa33da76d39dbd6a57f9aabe344f5643bdeb23dd84949cf3e567d82aac13b910d8446823fc7c3bf35560dfc068f253ffa87c1c96bfa44483dd13abd3a46964488e22491264f241a3a8e0c80a124c078dbd976f0201c71dbb2ccf88b72fe54e336999ea9791a2e4062e5efdac6ca81d9e0f03f21a510312367aea826575d012924866e4018a0d9ab27ce64a7c78d50dac9184ccdc8a2ea5ccf634f775b00f58fb464636dd9f9625754a239bf30e4ef865edf6659b7b5b10e9b6be76451590b1af579ba0dfe786233464f26b257a147609e3ac98fb7483c71ea1a38b8a6cb571e802b47804ebb60af1f58974814c6b7fb2b355dab0e04dd7c170abd09d744b69a24166e01d321d1294c2baf7b235219ee36d99620291b3590e93c36ec7f9e8a33fbf9e9c0d8b82d43cf4873980e4ffbdf18ca8288fc035cf1395279633d6f24a89dbd8106697d7cf98bb2f45787a10c9f304d6b36e08521684452ceafe62f1daa48cbc637006d3ebe38fc74933ba7ee1c3ae471e00b355314f325047c14969c706b0a5f604eb1eb90488a1b31ab272c4809be1ebe6b462a185b43af093d78acd22eb966f84c3c46eaa6ef552d14a1c2f6df47e861353bd413d51c335bf4c77101e157eb6cec64130b1b9e93c3b478b2c252f26aa9a1fbd3eb47d1b4dd0dd133fcfe44acc791c5538bb8ecd6f2d1b7503bfb425c697957ddafad3aa79f7d1e6f1e548602be863869245a9f1e13410d45fce58eecede3a62b395495659a301f5de7d2d9075b9071051a3c4a44619572f6f880cf984030e217baf6f28548e1ad55d1f59379322c5c99303f42d149a29a43da570ec8870c71f4ccb009be9681ab043df1bfe7122a4b8c846991f97aaf63bc73a33bd902624f80d087f3b65293832263253d0ef16d6d0b110f648957863cacca8b124de7208d33fee0dfeee6ebf65e7a43af1535ee3fcee12d5a3087cbff3f655cf0f6462c819bf77e001fbe00aa7ecf60313c7032bb8016a714c0958402e5beeb3b8f6b322206674e6622ce7677f8bddd24c86eb863152f02829d7bc799ce380cfcad071943da712051db0892001769926b4c62a45a5233e13d777ea31bd2e3a23f6a9b972036c33d0d31065ac56b65ec4b6baae4aa881fe80178e94dad30a4ca4ae9be392e6c3a4accc447fc7bffb670c097d0c209e701e637b2df7bd309dccbae423ed90d899bcf80db1d9e16b434066551701325c4ffc932cdebf1184c671bbfa5b63856790b6bf55386c7955fc3f79c2896930e02bcf319b961ed47e7addce7f3e3dd5a2fb67f92fd087d0cbef80a7380aabf0c19c144805bea68ce90ef3a43d09b6f4acab17e4d278e21af8cb30b7e157cb59e1090367ebc39c7eb78072ffdbbe210eb09fadf082d38438a7908fd5896f5b219ab9f8a31ac87b092e5b1ecd0bbe1cbf41c254633f30c1faf18105c9a29ba60732864ff0949652c702083021d250a97b6f216cdd729421df3fb969545259cce7fa8f5f2d843911a72424b355e0a5237fd57ce5a9e3b48193f8280d568dd23ea07773da5e0cf3197dfe4ccc2e21ba624676fb2e3c42a13748498d4b035e2366e1487dc911757ff3eaf48ec1933250f5cd39623e551327a4123bc8f04574ded82bca8b37007f29199ba6210d334d4560bf0830f2973769bc7cc5d6299c0ba55827c9eaca1519df5029811583b21fd9feb5e29867578e106b19723a3f1fcc24acb04100bd4a7ef2da6f2ae4652696d25a741cbbe113a24a7fccdf81bfcbd71bd775e98f6fc5112fa251ff8eb08e0d04227937b308d0abe93539030ac5b0dbe65d1887bec9f004dd3fdd7b1f501f2ee70d719ed023df806c1632c16d2f148bdab7ea4efc4ab99f90d030781555cdc377dd06d5cc3af304d84b64e43a5325b8b4fa6d7b4d1efef6077eeee6395a9d5d183e75a7714d85fde3b44762578d1e6228958ff5109f4abec363b4b7e1fe2bcc85d405dbfff6b970e022ced807cbe695edd5a146f9c9b627e9673b450f6f401f7673aa075f7d08240008e716b7e2d0ef6ded8885476c77b741edaeeb3363db16e16254dcb948229fe19281bd96503f6d95cbcc04223af28d1f4bfd8f195f0c02d7dc48491bb1fec1212a3884c0f1e75df2ff5ae925bc03e53f20a6f473c6360ef665d61d89e21ace8bc750c98ab69dcf956c5b200b165c3004c7afca951347864b3510320a1a5f8c37f4cf2b99e9814f609f6e68618f8ccf6d56400f2acc7cc724a3d9fa78abb27210d019fe78b2fdb87ce9d5d791effff638ecc75ca87ce261e40aaebed1d07207c375e636a5a50cccd0ef9fedd90dff0427050b6600059ce671a31459344dc2c0d2c6a539f73a07bda2b52774f9ec86f77bb0f413d290d0a1c4f135237883d74df0ecdffb5bb03492c798a63f90b528174be68e93eac2ed364899685056cb10f768646eafa9234cea7700e6260ffaa790c2271d5f46a75ffc35eb1bbca2866f14d9a0a69a2cd31e20176e417dc6c5475b4cce1a8a3341930d9c9cfbeca8848d9c8c3f436d1f4180fa801d6bf8de44872f78670a52ac7eeadd6d7762284a5b1f057beab923ab3d17276aea95681194ea166a5147f35618bff44a746d02fd71af754808d0afb984670d12749aae59cb221f1d9b6eeba087c2d594358294689eb5f1efbfd31149fb08900305a53c5bbebd75c32712359f408f5f078a9ff721299cc3b3159d4f3dee119165a37c851cfef966709e01da849fff63b8f02a9cb6da55df18462865d76575a86da608ff8bf19077579ac181b4fd7979797f885fdd2e4bb421bc2fd5630d9d673876ee6f1d921b97d37e9bf8629117fa7d78492a0a9b24de37021e56d139dbce9966ab02a4dbc075614d105bf12be8f777df2d967fe867896cac1d5ca19966b1978d1c74ce11605dcdcd52ee814d5165ee3c43b87512f5981bd3b83bd65ac9ec66c74aaf67984e7b7ea31fd3fda667e9c3c2c1fb2c0fc936dffb365f83504b19f2dd9c4ef156814fd938fe20b28c3c455b1c363bfeb5e559ad07b63c11b26def8e6e70e806a9d806988767b1f9c164958797fabe522a1f378ee2dfc85645ed9ccd52a22aa1188930a46ac9a2675e7821e825e0b013fc9c3f77d97a2d701218bc8a18942dee78db4f759042f0ba809f3288787403367eba4ec68919e2b8cf8f15794449371198f0f708ea0099925f256177df6286453912f059cbdd616aee683fdd44a530eff2d1edcff2839841e37af4bfa1d599fe1cf52850a1bfc2cb7373cde8606c20ec64e9685797ab52cf20e3a5fc7fff7efe99881f502801f25c8625b37ae052a3c7e653fc74f7fdea38dea8d6b2c3e2ac0b11aedf52c9a09a77c1a657335ba45e457f2fee4d2729dd6681840262ad8a39925b0058d3eeedf55c6965cd82e691c3f0418bcab01ae18372ac3cb4b45ab65040ab49b759bc2fa6358dd1a089201ca88467c8e962c8b5dae782c65ad38b71bb6ec8c2d1366c0227e21f33d5a1cc7055ea483b0d1cfb809fb917ab07448910905a6e2bc45f4cb650d00d2a395b16eb44d9431f29340343d8559f77bc984daf0043699dfecf29482cd0796cbf7689b9870d12937ddcec70370adf148eb68b0ae5c0af6d10486f2a5cc3c69560ca2f7fc3ae422ffb41815d508ddca189311597ae2db841ed47416bd3134cc2173ec68edf1a80a082f08ad1ed644c750841bf18b81d6a70fa7cdbb5fa03e24eb4dbfd5aa200fc657b9dedf6a03a6a8a3cb0fe7b7ce18660a7676b059e59a73642f60d364b11610b3df538b320d186e4fb857d90c61b05aa18adb7d25ab340c706b3379bd034a4190af868ef44fe23c82aecc3fe5e720a80880e0a18462586bb7d88cedffd6b3c65aded4d72fa9dce74715d50f95ca071dbe971e0c335e8fd5072ae64e426db45dbfaefda03fe1a946323b1c90c88ce5a4d8de91c90db4f03811965eacebb57dec7240c7c763eff921800a64c4b734df10980882be9d7958fe39bae6250668cd04707824398bebd1e2d2d058cc70e265691f1df229d93fb6489ed8fd0d9ea6f33ae1f8e3e6fd95746abf31923ed5267790da424aee2860e8fe789a75644489a1ae6be780e27b7f68c99aa48be3caea9c6395bbc28512d63bdf55e9469ebecc35e760231df5959309e1599151a869606740b410b990b7e9f9ce07d0e473acad996a83a9a3021e88099bd4b798bd6ba1edd49130b3aae94b8c19eb44e0292239c4df60e3d30e56f275d9a4ee7d19ef0e3bc66362c7ba9136f4f2854686b988935467fb1535ec5851684abb25f925148ea7ca51dc30c57e7a722e43afb47c693a5af204d7c58242b133e7190ada59339475815bb54d6b634e6c18c9f1873075e7cec483514b532a7f77dcd4219f6221397a803b8aa39630e7bb3802134fe7c0f44f26a57933318c42fdd65972dce7b9db0d6e6e8507d95b42eb6a780499ffbbe012bf75644a0c616f36d52bcb9d3d10b110b4c30a559db9e7b416e295ef12fecacf152204bfbe6bb1785aed6e3bf2b4c54c3c06d3c1f6bb948b57483db0796565fce7eb11090f0af9d6b58b65d91a0d0103a45fe2fb8027d034ec40cb043929f67c4e0974f41c340fb72f5bdbda308de6da3c5975b8197f47a673aeb60ab4c4475fdf4308a337a3b84ba4831cec88030c020cc55c0fe3bfcbea542948256c60d68a468e731e97e5635939e2a977eaac68de6b3cc5484021deae3925201fad39ccba729e8b8d2712fcd95999628e4d89fd7f359ffc26db5b73ba39859262c8fb9e3d92be7681f2761ba1f2d3315c84afc8c9c89a5e84b9fbb77dff3a9f012b6b9634afa32fa1838ef6cd8c66891e4b009b3b3882e0dd1a9c7d6476b75ddbe739b0f9bae03039d79c39de3333971cba706d82a88a719a30de7e25d8b3d51e4a1e13df20f47201516204a311a8f41bc7bfc907ee5ba9779ee1ba3d94fcf12c39680cf12a08c482c8634f80e8794dbff87cf55337e4f8c0f5b56fc57cd95105d327fb732266b3ec3578ebb4a14c9d000a77f70a34ca761ebf43668d5493e1a6527dc8b2aef7b985528fa6b4e77ee0033602ccb858146a8b2ea7d0257c5ab89fcd7e111d4c0a6af52f4380d3eb4f13965376dc39374feff04dada6aca96a40a0cbfe94f009983a385d39249d767d179b151d030749dcc767ccc2ae5d8083444a19b12f57f51a3f49c9e91631e859fba7929c22a555d50558e882ad0e2065073fd961567358b3af987f9e98db680c712957d643f2a1cecf8e79e9e4ce322f781cd4cfc5533f4d65830cb990e337bf92b859b79d0a7f3c93fe443078b54a8047e0fb5ae42e6dba2dc0523a33962d44556acabdad68dfb17f51284e21352ab77bac2a4e7f858f4be206674c1ad3728f1e074b06f87dd013288b9c7b134bd48c5285fc5b19dcf5b46ea614aaf51e2741e48e9b5bacc8bf640ba36d8d501aadd65674a696e9972735a331822669d5361e50a68fc11dc2efd23cf37ca96063a46444878c1b4491f964bf91c0b5b5b90d1474b66e13e19cd6b3f037cc852fa0e9c24585ecf3cab9ac737bf142572289f7e7d4de919e698f8976ef3a11d70ab71cbd473b9728c78d66e055b76e233b53a276dc045ee7ad5e04d3ca9f77bcc71949f95c3be6a5975f1434a55c43e0d3a34342a7ca8bc7ecc8945fd8e85818175a61578d5f2b5ad995ea0a3b5a25c720ed2288b500c384f53a9fdccced0a5580a8f2a1123cb48b3480a41d5231e97420b5f0ac146d9b963a46e8bf02a0748bb3fc4e392aada75374525b3ec59d711198d4a0daf021dd1d20a1d193107e4d2eae9113bd80451b674b9ad98ce551ec5d32ba58b8eb3baf74f8246e71a15abefdbbdb3b50d5215addd307bdf56e72a3e964250ef1ef91cc29e13c3cbabed9fa68a15cb16b4fc534fce770b8cca17e45cdb0150ceb7a6bbaaaf42071409647b06e122db78dbea11d8d9157d12a1db4ab84e35a968058bbaba6a4a769524aece2c7319370b0c9c690d21584bc510fb906eebe2e8d0c42a8efe13485148793d3fe1825d049899e3c5ed38af9619ef5461557dea453176a5fac672ef342bbac15a9fce1562ce30c68f8cd3a7515c72319416fe2e6e081a90d1ca792960030f9e78d08d41adaad205df2f219097e360c9fa02b20f4e179ac56fe062c379b0cc6766b9450cc3b93d765ea8f8459e31cc0e5a97591162eb1ec401906be6f35aaad1eaed4490bd2677fb9dab835cceb677f087c3c1948bf38cd4878a6d757117373be5e2ab3b0d8e7bacefa3cd10347152d7bce310b905d192bb75a0bb17fc4cd25155690f88a4e708a1a52ef5edb1b83368193a97c4cc7f5ed7d833feef841e415e102bbf095297c10c7fcbd9609394a49ce3ae7a8a6633140d23d051cbfcb5edd913d42d6a056bb4952f23261eea9a9d59a9c55f4cc6f7f4b8c6d4e2c92ed47ae80328f2b412dbbf118d875bab95cea4ef096ac22e42c21a74f90911e9e09ec7809219ac1a752654d2a06398e39e67e99fc54797d48309fc410a089432f934986563518babc3c41a604df32d08a8c60a30c3a11cd183200a3d500a59ef922d58c490846c05b386d4869f4e85b7c6385ebafe7a253452e3f0212efc4c5dc888eb12973e70ae522cfca6fc07756efa4ff6085c70d74dc09c026e7a5c4e37cb97fe88a78563be78e5ea31f354b3488258ea8832161d23ffa39d7333d9c200e5da6f99ca20d1c7ff90eb2d64a0d80904b01726447ef3f4add81688b5e9393ad077ddad49a9412a544f23ac10615b8dcbe7d481f25c4cc1241b89ce8a921f4110952151bd057fc0dbbf055cdb154d400ab570edd3fbe77ae16f4339b27770a94c34864d1c7c7572289063be8f66e2bdf9feb5cb84ac560e11e3823ce15f0301b51778b0340bd398f15956816e6a061c83091ae1ebaa38b677b29b229f754b964d5716ffd8a27b46688158447e7f8739fcfa994d28267846601097996deb6d6dca6f2dac20adb0c06e1274106485a9e397d0aea1e806fbb95f9e1322241c4db7a22b7740a55276322e21ae5b4971237daa6b3d56992b3cb0cd5dd912c494ec16842ca4f8a7f8f01ddf4101b743237d4756ecbab89f97840e608891ef529cb573344950d30c891592d6d8bf880cb2b79e89f6819530786c40e71caee765af0e25b6ed6a66db35afc31d405c39c4b3da623e0aba8b5d525726880e5bd618775279c7a78955eb929a85b50c6660a5ccd642c45d5fa77483fbcdb36ce900c3ae5aef7a9f007142d1e03c268a609c97a9257908a008adfd1decef3ee48e713ade3ebac98894b2ce0e453537add239da5856ffcca2e00190097c1d7355c1a6595f13600ced7963ea6bf7a5b33ed4af1082cb8e579ebeae398c2ce369dada9840a761127165e5a012036aff8bd2b2020f4085e2a0fbb606d6e6db47076631adb899c0ab611331f9fc5d5f734aa8cb0303fd43848fa304e50ab6005f451df16bb33860c3db58b8a42a4e9373a8e072f13f0b08448b31ee6d22c43cfef4b9844004187ba8510c3cc42ebdeaaa337ebbafbd815de7d04655bb15137db09c7aecec5c2c75f4749e36df4d0ce88b2c4a6e955d96ab9cc2dd99d89d5cacc500c0f64730451625498cedf03efedde6a79780761865e51daae2b1ca73eb9426694cf6fff000dccf92a118b28d89d0879a631d4c5798504570fa9cf59fc82b6bae5e26870a1e16f073e1a4ca65d7cdbb43c53f8688094bf491ff6c484f9360c3d6d01de71a890d836bedb38d13680ea86eb3a8f5af3155188c362a59c7f4cc28508ff6e4e27a06ac9a55325c0c09a7da83592b54d6ca2f9ca9332c7961c8cace96b30a5d4484d8ab121dc766d294c4582196503dc0b90af81abc89a1ee75d490276a4c27c9215cb1341422f937e476a4990b74bc6ce091a10feb22ffb9cf497d1002d68473a4f4554df3be092a0a06712c3f1e767e2da32daedfc96a34a2b89b264b611a8d02380a8135792b6810d51d6556a8633fe92d4cb89639cd6a06d83dbfce866a61b8c6fa2edcded121201e190fbcbf045562c21c736bb8a472879ad8e15a131e57d15a5e3e358e930562b69722aa5b1c61d8f238beafdca458d5aa68870e2604bc28718a82ccd5c74ec3e8a49112ff082d7e087197aeab2c5c88b8716cd5ebd63ce9442b9ac3c3d9e1fa9e790ca35dc302a564a6ef33f924ee04ffbaf369bce57cecc96facde4523c7551cb770ee3e224ba5b457be0b9b2cc51f4a12cdc2241faf518683abe284debd77ad99dc86cd6df938a21f2c32029d84b6cf23d54937e8781f956147d96d4e26cec46138bef979d5df45db6b81b26bee3018ebd7ea603f935a2938bca96ef3342def5a7dfb2d2e9c607126e80445a7ab300944a352fefbd5a52adf00ee26cb6ee571bc19ebf709b11d65504969bf87c8de35784f0346933bee1ea951f5b694f89c2ff054c50f8a70af6814bbf18a670e3f276eb2885dbe6cb6aced28edecca0fedee7de31bb9f4d2fb043683f3efc0a718f85a9a4781bb691ebb91e0caed2219b482a5b9f42a63cd8c18b0f2da0e205d4ddf5e540e2467d52281c2a3d4a43879dc9e7305fb3b43b6871ef2f296ae99ca75ffa43e69ae423db3bd33e3bf069554e42424b2cb80b066f6561c37307f73adf2dfa43280ac24c055a6221af105e4fa200dbca863b9519a082a6c3068c0c02eeea4d381613a8a99bfa3839b272de9ac0a862e125cd840b59ebf789a1e379155c1498bd4057d90d29b6bd3ecdf6bddf1b7c589448b96c556594d6018f235ba433957b9b12a84359299cbed41d005129d2ef7b5833c4f7e5107c9fae4eb327bd0210e949b3f93755b8b474ddaeb5460dea623658f709f2a0f60e549ebe58663154bcd029f9b933c6e74376c5f00cb3b16981efbc30c45005b98d0ceecf4a59bdb37da3027e56a8aa0ddbd2e3d1c733f5dacdeccf335bc020910aaa0a9ef055bce9f88aa93cf4975c3d67f8901a503217676763a45231f5cfd2f38c69439510084ef413c0b0f3673ec30e34af762a198c9bf454cda92a361401fcaea25f4a22bf3c70c4aabbbb3c7f3acef5fb829c877af514a7d8975e4210cc40ff5019d341835a1bb4d1a9a77ef92d90ec3074b384319e4a62d8b87a5c675a1e1e84f8ecb7bf9f79ff5c84eb2447d9d7dfb38de5afd160d3e12a8ed1bc9effdf3a071aabd3d1974f8e3abbb33a83e6c8ea5c47a68099335dfff117e26cc7331dd058a692bb5f78fa56d61f4b55b58f9df46c556b066dae0ed6a6503df1574a5d5a453905cc25f870040d9e1a2ae633dbb6291ed25b85928a93aabb45b582fec24d2c15889ba6646acfd129dc200e33a04fbc763df2bdc45edb0e62da3e979c74a7143c027fb563b06d9d181a49368b345c2ac1bf11689c90f57efc79d9023143e51d54c0cee062284132f8e3a12f70d64c3564f06f89fff739fd72acb0c5666b5d03f3eec5e2c85f24e1748a3700773be35b3dc5044d3bfce564f89e40809486fc964b9afda39dbf8eafdd0be1263c16e886ed386ff17c830cbeff3e2de7dd75875afe92b1aafb4c9ff4f8b3f66b0fca7ef6ff776939ced9a870bb58afe88e089e6f434ee17cbf12a53b810532a949b9eef5dd17d688dda759872fa7012b6e0002ef64dc40cad7809e7df7e7ff457323e458ea7a3f5b5e20ea45da54ab9288eb3bb90355d8f86f3fa9accc1d559925385ada2155730f0af272c1f6a69e673e837907841145cf9dbee61495f35245b0862418bd9c54d72199ac3c919e40add16234471dcc5134f756c54f7a6f9c47b197e3ff26fb73cfa8c134bb8bba4491a7165c78495db6f126ad82457255dfd012f3bad6121762433ea6ce6f5c10cec9c2e49bbdeff2bffa559cf5e752870bbb11a56a211c486c28e13c20175db8c34174c99dc5d3793f14e4e7bf7ae52129c7b2547c5de22b2238fa63dc6226c1e06757929c086c6fd206163f07fbedb66912c574245fca3bb1ce4d04920f31576b03ba9ad93f4e74399441b3109675ca649adc46266571c572d9ee4ebe435d78bd28b4901e3a57823056d7c837da10bab4ce2d16c4a1c41ae87d5bba1bd0c3a0e62e93c8fbf03d2fb773d8b05ca994c66ecb4f78bed64ca98d08ce8d84545aa51f5f5b31e697a986b32352f80469d804c51f5c433cc1b45e30d0a9667a32bcf262857f7b0dce2bf9ce1f1ba3df8a8f4677dfaa6f7083477012c9d200d5662c381cc1dc22bb876ae814336f5533356c521d0e5cf0794842d57d0c8eb126c2386547c8222353e01a788edceb6aaafa8058ddc112ddc73b3c5da0dee5a25194a70ada344139561c9f07904a00f3c9d0d78e9063d9958657e1968a82240f46b4d6bc2c74349bea4f30c3f742d53c71d08fb515b94a45553e83132d2e385fa06b041325a7d4328c54d839cd4a4c3f83804558cc2e8c69f9993f790347cbd7fcc79aa9cb80ef60fc2169152544e7a08347436384f16e916e77bbb434596b0ff6721ff3faef0b3f9dc2f26696b0e80b77ef9acb39dee1535882c9709f39fa218148162e0956291721b2d31c808834dc9f40c716b89df335c6ec24ab6aa3122724d780d2730a18d80b156ecf82a65849ccf65df9a5e55796662707d58baf44e57f440a90f1af6da63afc7586467fd810a9de7acf9a348618c45e31dd11d5a6a8fa250afd6e5766cb8c9d9db9d4c868e1281f5bf78120bc2e02c3c11a75a70016b37ddaefb7ac5221c4fb6101e9f051de45b8a8ad25c4a68f045460e061d450388538b818835b865190852a81ecbe3c675284d448644e38fce5713297eb9516aaa56539dbdb70be256a2787e0168b9469b6d2c2fc838fae34dd6f039d7bad2776774a6ebf4a71b3517d8406b74e0f5f132975640b7caba6d42a24c39012781fbf3f9a34225f9b0d37620b192b43c36cf6fd2e2327b1005367459627ec49e126b1f2a00dcb806180258e2fe4704b0a5ab58719fdbb0bc7779e87af700050d289daf432268c9adecdf172a4afafd44a8dcd3834bad0727d782ff4940bc915711487c80685b35a09dcd66292fa7c6ebc357f0a64232f388845369f7efc1825d78cf536cf68b75f71c1b06eb48375ea110756e0a738c7ed6e62b83350df9b091de53eec8a4c18ad2f868458a0c154852da701c23018f657161040bee3af91ca33d3f1defcdfa695807cb0577db7dced2f68703f6b65b05cdc4deffa56e806a655230ec21f69588323a98dd8cb4bf7b6424344378bf94ce22bb0d581e9061a80fa2252a12e116c720526efb4fc942ae31104cbb1922695351d3723af794bd09142207cbfb306aee08168aa5230519a55fcdd29791b4e6a726df54a4be59a5ab6c4686d06b96bf9f93c760431626adc2b69df8edf1adbd04a6de39d4bea6d1d47aec26a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
