<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"614d13cfff384bc9fe1367dd211408353e58c97d0a345aa04bed3bb53e06976b55c38f4ad40b312d77e61a8e36a2c38e701839f4bdfc62b1064201aae9c064ac99123cd4d3e43762c8afef0d4526de0ead3319b58b9d0327f797856f23230e1d8a26b5e89770a2216a29729888a3b909201eef92cd743e05e788fe371709c0501c82bf286f89d42de86c0186223462c44a0e3269d42670914fe7c84f31df55e2943e6a0466d869be585b09cd38f2031a64735bebdcb587e223f22b4f28afbcdf95cfcaf12d404e3824c1557ba0f412ddbed688297fdd68f847d5b831840b1e1005e6e44eccebf92617a34169e3a7555efce31b17cca4570713818eb4960df3ab219e47dcca34b19fc5213912dc1b4ab5ef7f66790562df8fc1c92f3aa341bffa820cf494be56f7d509ded2236de147e3c3d428a58002777d2a395d5149ebbfdf572e2d6b38a4086b8ea6f1de423b71f69232263ef6bf7d7513c53158a11079610b3d101a8e6c6ce8dcd29856655c98016b70b43b2a2900c112ce63b162b65fe73d9a7661d44a5ec19f534b5f0f67235394367e93edddc63bedcebe6fbe1874bee073b3d85992b727894d9b4d70372aa463881421ed061eee44ebb7af89bc295ddbe1efafd5658757ef36a4ccec28a617ebca17637ebc8da262d3cd41ea1d67a079d7d11c0379e0d16a57c6e45c72b41c86117421e91042670403f1d38c6d39b6dc03c35a9e420cdb4c447aa6e9ccafe573c024824c6a9b3ebaa7c3eaec887d7dbdfe4497235edc2b6d6de2c3c10ea8fab0c8587347dc112a2cb6579d8a2bb6400e3a11f9dc037c12473a1662b7c005158fcafbcbedafd33a4f919d378d2909804c424b999b8e3e0ee52fc4beea224bfedcea9ddb2e6526531faa1de301836221a796fdabc937c4a3ce27597bba6fe97ded482d4db67f15efaa2b7bed9ea6587c26984189b3523dee2fcddfecde7ca131e1ce3d4c081d902eccfd38867b38b687fece01a910f4e4921918e8381b6e41bcfd89e4ccc19f70f1ede7d55626c501c4e95cbfe10bb8fdfae365582193a2b017b6092d13a157ca43d28ec415727c7d831cd337e7469b00caed8e534713f4784ba828ce8846ca8fc01e210c0dbd077fe86e1e62be01e58faa909910758f4bebb5cda94efbb9d334f65b9a82b0fa1e323c62b922c60c00c2e4d2c5258fe1847545ec2814e5ec90a6a8b1fe2c9a7b9f8b4e280c8a1bd6614ec6b9768fc9c0a75da4032d99d1679d1bae024d0f04c630d9deae9f1180978e20c242ec817ba62ea0c2b4f4d91807174b243665b9a45c86c0d9393e60df3284801e35b1d9d009809f626a96435431614a8f92fdead04ed5f11ee76d91b638da27d0226039a1d793aaa0e3c600cbd03a188230f63796ff2a3c12aa10a6c36cc3d22e707498754e02806a63fbe841ad94844919aa3178c1287ac898f74782f28cbac1fdebb1b62d4969050999703f98d1343f3b168ad88eb927bc2a04b73078b28050f42adb1ce2cb03606947f55d5a52bf9ce65337962696b218d02eb91b494d62311daaa99d4934616269b2424f048b0af062e5fce3b2a815981f88b81302e278c9fd211ad37dcc6374c45d33fa102dee620b0d1a23f41ac0f75fd6af52c3906ce412833e914c4173466012a594f470cc204723ffca115ee8339cc7c327848a175c388c05929288acbfbbe9c7be2dea32d26e331995f215fefd123c27bc54c5afff50da3b1b41ce10208863bf8dbde55cb319b2caa4aeec92bd04c65715f61e392891320068e8c03408cd2ba447dbd008426c3ba4263917527d9d65ef0e2878276196c06209711108dde72e4eb0a2165b13921375eb7d60a8f23e7160ce0982ba9b485aca592dc9556411aaaf10b9c02ab5cb788a6f4566e0b59e5ffd581f6153830d2a0d814f53aaaf54563ad7ee1161b7bfdbc6b16207e725c78835e41f675753b6962801a4c75f1f59ebb0074d922f1a52cca1e6bf8088478a63a16c41a69932191018d5bb328469e89cb6ec01bce203c5a1eb1f43e304b57c81bf0e490f641a887fb946684cb1271ae722a57750d7efbbda355149679ccefe6808b806d785bb200c7a665ab2664bf2e1d8737a95ff074ac638b20f8e44a89ede9585a4e57016e438f6855d94fa16941dd04b57e29be9e669db4c026f27898c1a75f920f418a9c41039c3daee320831e13ac1a5b6347e2fa5227e582ba653a67a94cbed1e7321680b715bf5c54f886f616f71d2280b3883e298640be4a6c6f706dc99aa0b92faa1dbf36388a736cc491fbc9c68e6636b9b3a398e592983162c1f285aa174a7c0fb07c5b04cc1f6323dddbcdc409e981936ed396d4a804f775a1381907f8e0189944a8f95a43c5838a0d4b5ce9bae7d3dab7c41689efd811ca02e8acd8beb599095c4709df1f991a4899560412c477764ab64ff90e0a1bfc669941c95692ece90119cfc4b376dc0dadbe755437372cd0fa74ba44dd608b57a2d1a9d6fa433b0579a1f715448495f04c2963f458a7b0631ff8edce8697aecbdffba86ad8a0145bbfb1152fa31a4fc0dcf93b11e8a7df4faaf0fd31190886da0736f4ea4a98b9ed6b80b4a70f58786e8c1318d6eb3e6ec36a7aaaf76fe07594c67060fc1b3f2427893ac4e40e105a44eb93fd9108b537d757a3828e55a2fba4e6c8dd85b9632e1ca19375073fbd9a207bd6b6568dff5f1bc38de37bd6daebb0d6102c4f43cba6d6ed56d7578b89ed5c76aea394abc67f5c5a28e05c0d3253e5d4588209f75f40ec8f592c9b18b9a291b30cf95515d16ac853bd5c43d098c72aea047950b6764a1338552b491e55dae57f3059b851cd96e724f5e95e79ff6cae2f7bd8c7990e7d845d5199d984a66c91b2fda3eb356771089dbd1b38e74ea833d6f5b78feba184f4250344ad2e13f2ce2025463e04d2d10557f854bf5d6dbfaaae2b58faeb15781932b3729394ee7a05fe2c95be3c8926935de43f6deaf7914f0c304205166f422ceb127466223836f9daafaea489bd3eca57d1c41dbb4011d2275a2403987ed71c93e8037477801be6c79b1ea6b49431d37e828ababf08bced5ac900973596f8130d4ae8a14309adadf2ff192d1dbfd78d15fd98b53e283f1fa11cab65303f43fa4b3e86886100a649e2594cd4de4742bb869782a5543580c0f94542a05e4dc0b448f1a4097023c9466014dbd6f64551e317a07db090eefa287d534f79905530c7edadb3284d72399c7194e5507779deac1e8324a9cca7d1eed794aad660d8066387a91595d134fab0c1d1a6c632e689e1ad0b9b4e88d758eee5124f658594a20bf5228d624c7503e1f476c4631bc4ba6d6de8dda79cf883a8ef6b60f7e1c3475a50cf6d74e7d3ca19c1eeb540e6256bbd2ea05549a5a67c778b44cdfb4373cc92655dac3a57e914b39459e0def4060d469433caeaf0e415b390542ea4263ea93fed4b7339403b990eaecf2b86529665abc89f1656a71561ce19849b5202b1e8e359e9aec06d401580520e3647fdd9e0d229ea1865fd3c152c1262590f8de61fcf6e3b9ef703a0384306ae6340f681cf46061c8354ba2dac824fe130f46079b965dae2a1c02f99b21f98d0967221cca7372a11196555f245a1ebd0dd10bf70323d325e8d1e6f519a2205d51aab7c3f51baff319e02b1f3ca0cf80745ff2af5fb6ea62c8b3d58f586ad7c150c0d4bb1f01f471ab1bdf175179f0b8cdbf64210369cb8e93e55f659b661d4c5f28d2c1c0eb06ca051301410232a42080a849677cae63d1a351ad8974e0fa5547a12f86b7c4f0058f2c103a5019d997f01395c365a42993ee8b053878b74f568530ebcd8dbbabddb9ea48ef2506d7f1a1149045915a1efbf43e7258d158bf9d4dfd9589346736244edd9d75cce2ad80fa371089e1f2de5c3d9d76788d988d9e86d6b970d20188bd1f1cbdbf139686176838072018d2117702ae8a6118f2d37c35cbad687d50b13bdc3cc3ddb8e160213ffdb29ed98fc5572502b1e62ef466d1a5b96739e0bdfbe9edee4705bc042d992d9863f07d5361f069e4caf607d9614ddc173faa67359eea1aed378a9f17fed47ed972d638f132aee2bc2445314917386ebd82a34904410e7ba2e6948dba55803d651b0472e74106a9b4e4251cf29b0188a7a8cd44ebc7dd755af69563ea9433ce16c97ce203426bac7aae463cb963919cf1c00b22bc5c14d963bf84291428440a9c5861b4a22280b5991a0d150e22e9da4965778a90a96363d823d3715580173d00e83b782f7dbce5403efb875ce57c2afb228efbe1a73e859e3da3a5a977fa78c8c99a842a1ee43fd243ec031cac950f40f72c96935ab26f831060c4b65d0786661dbf83a29a54691f0e35bc9c7ec0a069d9ebaf176a71d2ddf67e92cafbb4885183b25b5fc403bb58be570deac933571ca826f2d4a2355cdd30b77e0e3ab3738148db0905d47079a9572293c17fde45c3391ec267af330069eda120e5ba2cd00d3c7b16e08316f33f0a9c4a100541164cec7c6a1ae486812af2ad75a8ecbd426f3ac4f49a849ef26a44531570c8e299dc6654dbb1df3200c80f319594bd7bad9fa2773545743ef3d295d37061c603b002ec5cea0a5462e1e11135527fcfd86572d2953452812fc29fd0a7d9617526b27213aca4b4d80fff43fd92ca846efe09b364271fa4c43fabdaec7f8b37d4a5b5469cb217151f3b896da6a067e0982ced3b5d769a591d5d586704e3abedc92ae82c9c477b1cacfea59b17fb254f463f591289082ada6cfd5041fc04874a6fe48bb2cd70ed06221b02d8b2d2d9dcad57fd7dc508f7959dbfd73b2f1ca6998a00a59ba1d5b01bfea94fb7de927046d0da2a273b5777836b67998568148ae533fe7f51ff866a459a1cc6501a2dfcb7eaa77a9c97235221c0a8ffdaa0fea8232b461ac1c726f1a8252298d8f7de30cb7c63251bfabd6dbf259577681bffe90b214cd61ca577df98fee92f783f3147bc30c1cba3a6542d59653ae495ff7195090c55ae731c8d52ee306ab8a52989bfc9b4503babd93daa6b88b0aaa6923590796cdd57903eae15618e084c16d1e57323b2582a01fa5ee3f3d842a96fe1cb3b101759480be0c4cfd4955ce5c374a4689949a87d5ab4894ba1a49a60dbf97c4427b19912fb178ce259293f7d5f55ce5af68dc01624a6de08c5865ec7e0d6cce0bbfcf960b49b4a6cd666b945650089436a0a6120dcc9a9095198b992c57d9412c647c94bd6782a139b503dbe22117ecd16700a5899b65138774e0f31decd3533f00ab87ef5520fdd67713cd3e27f227dd8e0667e2640e5f83cf53e707d627585c4a85036d0ca193653f0c17352098d0d8bcd1a997e4e02b2ff3185879580eb16696879c2b922f27be17cedbd462c74379bd40c30a5b13dc077cbbace3adcf440385ab083d2a7de27d6ed4f45bf09a4db490da9697ea427069fd9ee2ed1b4feec91b86d03bed465436a31ac1b49eb158c8e03e9fcc0e7e8217d9ace6eda9f453f3cd23637327c384477d86a5a7b16bd420bbf985f9a5fde38d97098c77cdccb8f5681442f82d7f88d9f14213ac1e5b77499b85b45465f9800378f76f5ea51068c01c995ba9458f9c468dd936ed5eb210b045a0bea98b92aa0d94f6b20dcac2e361427b7aa591a9423650476635182c19d992baf1c6860130fbf80df62fd74264a537db524a5bfe8f73e4301970f80c20470016ebcfe4ae2e7725d4b1da8f7285ac05e5bf2d6f50564246c0c9adda480c4024a296c3d79b8dbd77f67e5777dfdb2bd5afca27507754dda7dd704f53bc255f81257ebf298a406f8a0316aa731f205059695f3fa46fc085c70cec0cf2164959156baadcc613a7cab7c3b57315b4171ca0f7f77e76e16c6cea39bb7683876b646016f9356f7b558ac4c9d5fe855c9b00373e90dcf23d21b4316e6c58983c96224b2b11b27b023f70318c95328d5e53204c3dbc95705a96d1bf7392f462832f05d50e375164d30b31cbaea97f89c00a3e6107d9655e4c3ad1627569eece3abad1d9b5843b13c4a5b9608bf5f2889703d7df0fcb10e51d4e05daca813498f4d19add9a43fb21226520fb973063d8cf886305409983b21ab224ab04980aa6317e69fe039472a7423ac0aa62a20c19065fc24ea98e9b3bda1ae83a740f00b4428db0a20afec391c044de50b564e007de944db0109d95e9d41fd73346fd9cb0b105e2daff8e3bb1ff6aae06100444401fceaef87a18d6c66d22588e715f4c9d0b08e8380a702c5a87f9906bb73ac64d8fb47e2f6a4ce8477d54e1d2d283861f88a5223c622e1e518e21c1661be96d78df58215c0669de6b91dfe45869b3d522c13069ba3f628d223b6335fb76c07ebaea1b695953e12da1ecbe49900f44f0568d7c224dbcbed2956aa43839cbdd613c6595576ba765a13122e1e01815d284067d10b914be054bcb41369d5d055278774ac97f79a635f4cb6dfea6794f88fb5379542892a03da41c44a33a8ab047dcf024e37445f9c3baff5925c36722ee7470d090a0325f0b53ed828b34ea690a53b18b106bf149dc081d29a7d2da4f531d69be5046dc40f6a31ee679360594124500d8cf794b5f2c19a7ed248c774618223b1675794b8ca8b32d135f54466d37a124f31e1396a2d007bb47aadc79559b27c3050eb58caead0cbfefea3bad231c5e1669b6779c385976f93a763041f4216391a001f2f46e9b016e6e817998d7607ef091493692f114619aedd3b4716a3b9a1bf0a52f98a7cca242f00bfe3d2fac8f9f289445bececb44051a74a501df833db4224a708118e6d2e500fa6b2f63a62e8b9e8627f2690e543622f7e333ddee6cf5a8ac9d6070420a12877a1001e06a003c4fc48dfdebaf5618a2d1794724da4041c395f0c97e887c08ddc6844b058c353954941cd9407da6aaaf6c6646dbf8c1acd0faf8cf7eb5741721846ac8ebdc33f9ddb545b3ffa7f8aa5dc2da935e0a2f9ee070ac64b3503064b0eef069bf9da9054ea3d255ce9f63eb84e52227858ead8ebdaed8736a8b5caab27768c17b38ac7b2992553c8b3b9aa303c913f1b0bc1bea2d8d7f4d86ac5339cee6c4f4b3c429dd84c7da5da3b313e4cbad2387603853c0ce828f36bf2cb122f27e943f80184da77521edada7f9d9d5f9743283d9d862b208d3f5f7f77c42d55dcba999138e784a35b50fd9f5d8da69f8a857c8181925eaca3a5e205f3eccfb32c02180efa5dfc576ebbe1bf22dfee19e9872f205e3acefcb854e0f7bd9dd591d6b99b1014aa46243af2c425d7f6a9ac9cf61a21a9f052d9f579108b09d0581c4cf3f1f5c3ba6f5351286106dc928c1bc2bb46d0e5b166d99c410c34b4880fc002ccc048e9de5c6adcb11d3fdfea7f73a6ae8c3ba01704b4dd93cc8fb5525be7894ef9da2799707764b5278994a191361616ee176faaed12d0b3805e17e100c5750828b18246daa02c6e4c0a5c48e8c82801b0e2a5cbde83f38294c927c3408869192931ca7e96912b617e51993f435911c1f9c9680f9503dbf39afbcfd98897e1cce9b8e1bef3fb64c74213999382eadac545e855d004362088ea5e5d66462f924c3ac9ca5f9077d9610b2f0cdd77d6ab8a3dbc0e902d5f5fb9f50702b7272a21c466d7b60072e4a66588f38b3d3500449f4ac8a11661a37facfbf22d72eed9f6715815ba67d0f809630613c50985653b08b146a1e2272e6e576b4feaebcdcd7f610f2b56d7a7d5154e6171a2365acd4930a54c3907feaaa272578a6ed4dea01ebf85c8201626fd2ce2fb1cdd88c2475baff9da783ca981d0fc04cee75ecc3d4e5467923dd42ab5da22ab33ca8016e6e1b3ae71d687674578748d24a6adc6721a3c3437b14647e63d320426e0f32c60771b51c562cb8de291626bb5fcbdc225f7e4a8d21b37df8be7b5802800801485f0120c2ba7793259979ff6b0e36ede98103199adf6a3bea0cd51006f39714390103f0f8bd8e51ed35ab4ec29375ce300df3cfbca49807c5e18d62584a7d35678b2bf62201068392071efbdd0986c267809b9aec09ab671a89cd579b75d4adde2adab1cd9509aa8e19f9c76dbcc71c606d1f125d7828f54e2c64604ce6586577836de7ed93a73c494cc0f94be973edba22fa482f5eb74f7d4d590617347f3f6096109fecadfbd16d029b11fd7f154a3d79ade5ed08b8d9ed38b1802dc9f5fe38520dfc9d7155ed63c036a06627107fc84107fbda980b535d872679bac1dbd1deaf7e4612b0790feec046884e98c4d0d8c215f86019915902ae1f6924dcc3246aaf2c2c34fe4880f4d2044d5964fbf111996c7ffb887e1f04b697ab0f3c02fb98c6b8a56ac2b9204643ccf729748a33bb8c922b544bf53a10954a1167b8fb98542c95350b635688e17443fdcd9e11915af9b879b706a4354b9e779c0a507dcb649074b628a892e293102b56b6a0d96265d35353dd7439a7161f7d58d94f6caee0aedb941d269e7d960d35c837fb355496da0d3d3a09e4ecfa4023a5e471c78ac9d0fc42ed178d4fadac1373ee68818f99750bd63b6be956b42222cc785fc89d7d0b39fca00ab20fd9fa48adace83113c7370fa41d47724da7cb9282c5dd3701d67750b1d6bab9f4db644305074500eec271b8c6d7a0fbd9c2c9164a5bd9bb40f1567f68f49369e1b4ce58707028f152e6e16488c5a175151142eeaed1b80ec89df040e9a5988d940ae4db7739034836c642dcfcba45f1de0bb8e90148aa04b15e112d207fbce140eb8986280b9b083af972d349a1875878618955e22ac90525fca4bdc10339611cd8cf923a8907d1ef456d30f37fde0214087a99c970454dedc524aea34167776883d6bef60a8eb9f609ff85ce6f15312cb6b39414437ae39500c0ed605f28fec5774cd5d42e30be0fb9fb8b34da94ffe343655ab6dad67f7b6f9bb3f09c2191720240d6aad150fce41b8aa25df516076d19fb6ba0a63c79fda8b179a839165b26b7eeb7466e0a6f798769ebf97573995bbd1baf37408600244084bfb9e3cbde6da1ad35876153b954be550061164be338459ce55ecb07631089bd27b9c1814426f1920932c3439ff02601f56017ed96920271702006edb3707a5c0003e1a3bc07e4128b75a328273f526dbf313d183566f13896e43df018037500ac66c0fc5be5c5d44dad890904dec0ef20dd56ae9616e2fd97cf34f2685c66eb8c67b47f7775c754cc0ebd0a64464e6d86a6edba735a7a911384f01de641df4673ac3a46598e897426628f03827518a393b32f12213b07e611d5ada7be170b137017323a8344481badd1570ed7a6fc3a23192a887df7fbfef4601b31638b172e29bdb0dd9c9c8ae402173b1da22ad5a99553929e03ba15dda0bb6b7222e83f7a369bcb0482cb708bcee29191fd1d04428367c594e95c561d5474113695594bf1040204388464b1f0acc34c6507fa1753ac0a0a6e96d5e52f9fbc10d7e9a76d3da5c3966c072fd979c35b7fee49799e9195cb2c9e6ea5ca7eb3bf7fcc25933690b8568fdc890ee55add87f276cd1e632c483c400ac70d3d3fcef1eb6738be460c1fead8ca2b05ec3f5aeb3d5c00673df6c1eb76c0a6dcff54b9c9bbd120a9e1f95808b33f1851ea792ca9f764fa2445c4bfadd110e6ae047fcec792fdeafc87c8102ce79f869566a63c2b2b1409bae4a8697b72c95b28d2370a39a88069aa342192087fa15aff5541b7d971c8b5d70a188c967e2f965238d71d38d6b89c97b9c78a1440271d4c28464b4bef3f2ef36ebff484399f8c5b3458775db2333ab33e8a3ce42857c0a132573ed45cb515a191c6dc5e36b6c2d9001414fdefd328cdb15998ac0a58f40dc2f79a100e6fc94a0cfbeaed60e7353ba5c939892c1d8b966af66b9db375db37c5cd78284a81ba0af278923bf63f5c16cb159a5e68064e6d8d7c2f8ab55000835884063fb5015f30ccf7d0f4c9cbaa77783b959ff04203ac4ebff3fd9d65347ab3e3841078cfb63dee2c7aa65108e386bfbbdbe516f03df95b365d240c7b47d06bd616591e40db5906069f690bf8f950681391517cb5f8bd20a35ba5f38b3d877291c13f88ac46b4beb4b114bd05f20cedf599fc96e4b402c1ef8b7eb2f57c5c7c253b64936c2a4b0449d2966c76408fb26a7f531cf19948d77e509a7f33493b558f371a324bda328ff843283dc47d24af726b25a0b021e8638fe3af7dc6171ac282b299ca7537c4c2552175448b172c015a05e21a8eec4670e78e9734ee8b531400ab47b985f78ed1cace4fb9022f69879adeddca5e23db9538f6ba12d892a2551fe242616e9d8ce8a7aac08d113661ed6629ea13ee70050bc29f37dd36e5e93a5996df821b873121bb586edec46e8e1222473d5ab0da37882e72312d8018c6c29520a17b31b0e718a0d81a9cc52926918066ee1216b79a09439d099b92f88bc7a3b3a4be0411b2b6eea9157c0e45095a167150dfd299c73f6c381c4e0361676ec17329988004fc0e47d7db4ee1a9ac4de0ffa54368c558aaec9d1c1c3f489296ec278584b0700ce72417133034b4dbc66ef47b8b9b4cb4f3eb60a82d15f1a6419bb67c13e8306b7958dfdff6baa4f5eedfc092f6885b147e92d4d9f2b4733cbfe5ecceb4867373d9ba41bc3bcf0a5529a364c47a41829b4b10c5170c0152c6e9dcebd5b1eb7bf70297b09e58ab988ad35052b4f28aeff0ce0af31bcc271eecacd4145b1559d435f24c34c42222a51918dcb382529e58134ff4a701f1564b0f348e73ac4e9d0e6796a234fa02d93c318e312d93f33e6ab3a9a26a665c76b98ca7653203c66ed1a228c1d274be9f62dbe4d5dd66164ce8195a2efe369bbdb627db7708beaa0d9b2639f544536572bc6f1e2bc0b2e86d2d24d93dd69fefe7cb10e64fda96996ad84c2e6d6f56663b4145fecb4e26152b485db8292a9e63e39b57c5e8453a82b668e74c739dbd0cd237c7395a2c99a354cb96867563e5ef787d6cbdbbceab69a4895ec8f9519d01e1fbb50638cc7042d3826732aea09f1f026149d801606ade9e120b49a1d6822e59d7fc1cf7a7cc403f00982faafa7be72b5b3b206a839bde6b1a7cc80bd5cc66cb8494ab5a41beed4bbb16d4881c5a64f3851744623cb05108e165ee9e139ba05d35822613beae0c413b691f36bcc4838cf72fb312a167396896b0f5be9aaaea4ae1022e62f7fad3c8d2341856c19935093f0985625d4239cfd399646740b3b888c1ae2f64f1317907a548e90f259b91e495b7b9969fee50e203cb4f8c8a3c24b6af73f501f92ef828b88060c9ed9351ea8c9025096b41b4ce69cc915e5757f2fc8e036189c09ad8d4dc87d744af496017ad3a945289ef44c598f7688b72a75557762981bf55914628d29f89c4458cca06cf46a05aa419ac3f77be5203b4c6b341e0b19db6533a917e1d9a50fd5bbe6dc9f117b8ac2781fdf18cc12407d041b5d2ada83c55e3cc239a2b2c4077317be416fe4b60d9ecff0d543d2babe37661815821f83046b567a84ba346d211cf1df6140eaed92880942d86509bce025c87fc7a6fe27eb0bf59ed82e6b90a51ccb4df1e938ad0814d0fda895d69bc4b64931ce63e3793857cd4da6a2bdc691f4d865dd414cff0d783d55a84b90237db57ec268b934e9793206fd28e348cd8d16c19a0d5587552550794e7ace57af0653dcdee0021bfaa87163c33fff7fa80b53364a52a902bd1ffc2b7dc51a52ab2469129f01f30fea4c7479b70c79751dc46a753a00cacf8f60131594613186922d15547313d42750f9b3fde1fd86bc84f6c9878b2b6ffddec260d8000789f4f54c52ea08f615465aeca6d478fa2894eceeb59cf4c4406ed529a962539a309b5e54bdb259b6fcf275f678c6b3ea62afea047a18b0caea16230b4109ae02e2258e37d1d43b768aebac2e8b3cedca9822a3ea05ebe85a311253348092eb5dcf8afa9f38998f80a71b7188f81180622f8974079db865491c511f2483d5453ba6c918370266457a0df1d9cabc1d61de9f331ce627976e04766d49257c58fad20849ce7c4a94cec51e8a45fd3ea84cb65015720c91b90c45b320976e7c7c74122195f7fdd0fc780e9e9bc244ee04a70b7730728a76d98c9b557ecb1a3312e1c4dbf594e4647460f341927cfab7a08dc665110e469680977e963250b856f0e87e1407a374646469f3c09c79c47d08f128e72e945c7c834df46d430ef66830ab914f10344158c35a537f2675a42c923293b557fa908bfd21c9332bf12ba25bdbf28015b07ade6a8bd68f494e88a21cdb46d92733e928a5295b42a3c747d2214ef393f5a423b0b03f663a2511ac2a53bc5e20d752a0930198276faf43e1bf03879c4355d59a84b7b3ed9701d701e3910f5293b00d2d8c644720fbc9d3422c4fe24e6c32ca07790e5517f379eaf35972c2a0644b2aefd6b23df48f88170e163d82a0931b0a58745d632b5fb933b92046f345b45bf8f28a0f47b7705e2ed6e089cd703f0f3321cb07d6081451cd4e2590977912e522aeb950363abd2844d140db9b63dc76e37c55c374d3f19c25209cad3272b29634608e93a90bb7f723ff57bf0fa2b704832c4fa0e5c14ced97ec47a06c16c04ce7b676a87398e3c135eee5ef0b63e01225493617584a3bd7b625e92a33d344c68117d700073eac4ecc748b8a148b73002ba2575c73ddacef7dccea43d40774008e55da2cc4dfc5d70e5a7e78b3d44578d8e6593766e687005841379bf8404f828008a286595f6ef23469e5b8142d1c87589ea359b06b556031092238094d7aa102bd8dabccf34e19840be41dfeef20ac7c438bc38abab168cec092a8c561f2781ef84ed7dd24f2ab39fe46b39fb459f7f91574b752f5545ea123b2a1025118d90963009f6c8126af84a38d1880a134c31c7fd267ab444490c6ded362ed60f25cb8b1cd8d469d0e268c312d6fdd9ff74d517ad21db93345ac05ecf3f9601e637d7c675af090d2f90b39c77dee55a39da6c001131701383c7ffd1a730cf9f186a1c9427ed2df5bf278cd730f095ccac68c76ee19af522f412b60667f085701c98bff54a5f0ddae647732b30b7f1ced2fc3326377fdb1c31db66db9bb8a682c3f099aa6968a8303a53b83cac4f683f7aa5c165c16084ddda808a4319466343ae4e1aa28cb193a24c63908b57d6d1a14ed4e5cc286c8a42889d1001ed935f732cc482f164bb406b78189b54e1440ea103407bb9999e140bffd484b8d7b4ccf10f9f29a77af25a26e06c72785641e530969bd675cadd471df24f833bb7f5b8423ba42be26f2f6b9c1da92374dab1f52eed3253ac750add9383fbcca11d32173b84dfee42ab81f52116aa7db4a686386d4f1288001a6c213103f4c76d41e37b7a1aad0adbcbba6abd9e9b8c02cc1d9347cefa62406b3edf4c024c4c70c3e364793af3ea4130020ad6fc9c7e6687e161ef6b1dca747e2b0d08e5780e75dc834a5d690fc1830fca39afebeaacabfa58c9f86395aba6e8b1c3d756aa05560eebcaffdaf2d082f7b7efc567b6304a05580e74bf478cd1d8e8d41f671252febbce4572c88cfd6ce5b40248218630735ae77063afcfbf555908ab07b397afd591ea27eb63719a8950b886bfea91b461550c8a045a2627dba18587a904c674fa122c8b0729e3b265e0d5ee229a6359aac36eede1fa7e6dfc856d934bd4af2d02c75280adf78e292fa5788180f86a1165b63ebc56c5818a338127dd9e8000a87cdb203722885c56c6c1ba60fe96b6abec5105e8702e66bf7ea64aa98d6d50c88a27238971cf35e3ec481e30e0638c881dcde4dd008b2826066ac8e83e8cd67b04a682a0f1ddcc5e32333e7b53559ca720c7cec09b416889ef709be1c58a8c771a7b90f676205281251fd4008271e6ebbe4ea212061073ad5a54b04cba7c01158a13af9a36d9067dde39c3fca4103fc3e11ad0758fb1b4f9af3fe3deaf23f4f6b26b163061b51a1f192d67a9c7e74818109eb6b01c0b46534db1927c5742c7fc4643b2c33f90900a7c68bbcf7861c77f002ab3b1211559e40b7b3c6758138fdea3ebee34c2b8a5b3c4b5b6d48a353249c2917c0c85a186e9aec4436c7421ce1af70e3e280ce1c8ff89585c31cab61db5f6611efc8d22c92770f79d124b1e44ca19c8cba2b84219eaf5029e9cf78628458c85290ad877a499199de65a2b9750db34f7640d026b71e964d86d805fe3ce791b73926a408c3b145de87c3e6257e7295e02603a726ac2defb70935fe8428430f3c4b44a87b72484d988c34fdd943df331fe139ab95a45a7b18fdcbf548e3c536f019d827ebf1db5a5a97077bae50bce7b385057d4b198aea635d4efadc6e39e3183d65917dc3eaae3a0e67ea84b79eacb09ae8a814ffbd22c73ab0a896a212a1e858a57c45a51884f4199e79affbbe6b8bfcf1d16fd0295c61f575a0eae522dca088dad234fb14919bceeca8f34ec2a3acb8a34159cedd8185ca9e408996d4b78339e424dec7e4c2dcd414e6eae79b657a9a6fb86c191101ad0dfa7bce1895539916aa56baca6b7c7fe4935e9a872b4338d759a7dbf52880a89fe787fe21bba1f4ec9b81072926b62141aa73375023c6469cacfeb6ec4ab8da7d900655ea4b0e5e2d73c25d1385eed54da77e98806f98429327237763f7713d5e18817b3028db0a6d3e0a056d8d1fd489dafc10c95fc6bacb25177d3109d7cbe79213f06d9d9b7b7f69dbfe2b6e2db8fe83d4d2b145487b6baa50d03791cb4f0afcda66906a4caec7069e9748fb8971e658eb2bedecb57f70949ec98d7182fb481c2c1509e34a60671f0a08f3a1ca61bde3d99c3c05603918714c40d3e46cb97149758390aa9e61bbc4c36950c80e96db0b3515be3bfe5b2b8a10fa3eb29d7deb0f7e35f46f8ad971310f5a915550303b4d674ac212604f0a56ae98a25a0192eac5ee17939ad1713e795331eea1daa0afafa830aec495cc66ed9471270d4f1578654b47bc5a76cb2dd5b58f69b7f5be5cb301dd713d4231352be323ecb31f648310a430ca4ebe9a1926939819dbf78936fc226266b12b929c4ef7eb5c4435bbe16c4cd6de7e46a834d1ca950bec305f9cf68b4908070eaf2da059220ad8dc15a623d321c7b8f9dcc43ca5909740687099ccffeeb7f63854547b131c98c3ec0f7d904a9e401cbf83de5b7317b0990b7a304ff112823a2c474472e401de2c3dffd9b3f554f9c5a0acde784bbbb4d9fbe3d09b461b025b12bb425f49c8478f981653283cb1d4b9167b6600abaafb1ea76fb76318e4acab9f0fc2745690a1cea81bd8bf8f7bb459597258aa41bf1627b70c44905b23508ad28488278560386d8fa3cb1a48a5932207c0f397c7bd63aed8f288723124f18af85ff7aee4dedf1046daa065ef9142e2ce790f7b4b9ec7c0ef94762836b12f541e2b521a84eb7d5f5a401cf68a8e97b5e9f625d0f32448c86a1cf4a5ab4e8f8d2e8b4ab4dab9e1b5986051c6a090d5c8ffc6cf867e891bfbc5ba6e8b8927567fd44dd9d25cbcb571909cf99e6ec95b8d9e958f912f4dac64d236dfb2f2c5ce8f15d914e9ca69d85f597ae00e552615f4a43599db291a5f908cefa19b8c282f8d19f1298e0e6809343e90e38dd6ec8012b3d3494cdf269053de8cf22766c841fd06d738ec1aaa976592d441b18732e4b7412bf6f1cba819c8f662aa2ca7e76709112b74b42ab3488ad8c412b2f8e7d53e40bfaae09a0f5d24143b68e826bdf80c20336a8ef9bc507c37d4fdc8b1e86261f3eefd01e77ee6154362b26e4a1414f77b1beff0f1e2e53e84b5fd0961083cf5b584c71eb11dee074f61cd65fdc9140243f09f26fdeaa0a4f3f9cc6a54379c5e65758396cdf94eafaab5e5517470f7df3e5830c2ce225255bb94e067009bd211471e0c566c3984d9a8c084b8449c2362009cf69c1c6e89179de6db1de9109d9190f4c7cdbbde2ab61713393454f2eee18d1a33508378fb90ebb2ac6c9b32ab15dc72cc63e27bd9ad36749533d786280b97d49a74b1d7a106520658b8bc061ef7f5277f249d1cce237e6547b5e5d6ac32ee14e8bb9ae013c69750aab9a1f7d5d83819414b999cafabe2fe468047dab77ab5c6cd61dd01362bbbe9c4f10f219f7fd93a3e75ccc1a3592fdd0a9f99c7f191193ea90d916def9dbe0586c84057c2c60c7b711ea6565bf2b6c2b763e056cb4396a3725cb159100cb388d8cfd3b8ce91f7869478f5f8aa61ce696a21998d76076d2fea69e405cdaa590af4e581ee8e77fc1232801a1e19918f6eac4b65962f741910593b7e9e0085b790f089f428630c552b8c62c515f3362648cf0bd159d8ce23ee07bf3f8987bdf7abbc5c866b47fe3b1c5a4109a5c8592bd157a4f9f90311a2bdb8cc76ca2daa211e8f028e7981901ebbe52ee3c3cf0be7cca5ee07969b67c2e5902501627c8953693f64a7e0ce408e178a28db06a91880a0067dcd090d4af5a1356d0d125070239e864fba96d37f86e2bc90a768f6978da2510e97ea525a14b69d2ec45c95c8971a86073b575714eee52187b25dba5f8a307a83ed8042f428ffa45ac9e52fada124b11ced157a47512ed0bd0fe1f48ca2d1e300544ea44d1e2028ad16631fd7c0dfd84e3e10aaffe0c161bb07f0fec0e93658870ce02f700fceba765a2469c17f54f536aa5fccf55ca34fc83e7d7cf411aafcb3804e397f58603bf80f4132f328985eff69da97e10f191f0c09446ac5bfe24aabb8f9eae11cf00c62834536e89cb13b2264534c05a2fb63fc4c9316ae550079fda4ab52d2107788a33f3df4231c5911fa8b8f6c9686185a7439a6a8456823ff85a748e50df84587ebe6f62fea9661aaf7b2ecedb927aead3218ef43c506302fee145203ebaedf4faaaf53f8cfff4f32c8886b8adf271cfbefb4f955ed2ef177a9ff6983166b9a0f50de07bcd4c02834c44b98586bd12cf638ac3872ec3a3cc8faf21ac8c40225d3602869507c033047ac872e63a5c93884f8939d60a263cc65722a454921fd34b45e86715bfa99e6c89e388ad91f3d6bdf4a1203d7791d58745713d436b374b904b185ca721ea1ce83d429a841211d8d08948e12d47f0d844143a8b7245c055080379347dcc3de14d3a0f81e1d2f704d8666ede1b3144ab01acfbf2eaedafbba86ef800979cd0fb8687d3b4b3c8f5ea54d5c7dfb605dc5127edfe1cfd08a381b30518a91a87220d80fff1f253d1bd6bbf45fe6447db4f3f3e4bb1ac775a8b6b7ce3233cfba4b8495a3a7944f3047065cf67f9c3628f92134d0fc69a053c11837009657843a5f5a33edbc297f46946fa707017c08c3f1f8273349a7c481da7686b29378fbbf3c5019dfeb4efae1074cfb2241471837153929f86df9226bb0938287d783a68364f34113ec6d1ee917448e7bd52279e77d5b035b328a9cf4ed822bb3bbe5a08cff1957896ecc5c4927d17b75da769ce3a1a43450f09abb40cc12617ac3355be81b248a4e1aff0cf6b958c7de8a338797795d43a8f4cbce42e193b5dfbe2196940134469c49b787cdf570f77403e30a1776820e7c303167b1899aab253365725ce3853f0f32490cec48fa01ec74134825bb0a1e97e90f2964d8ebf0bc0f46bfc880c1cc83f4d6313bc5ba6896ece22dc7f1650387af4519fb1088102dc12ebaea6d027610ddac5e52396a06dcd81262d03c08ab028125672407211b70ac492dbcc2dc4ad682dbd83d96c97d958da89ec3836589dbf3b8f51c3fb8dd02d7ad1fad31354bc0c2949bc6685a8e6839925d8b0400dfecc9b491d1f187c0530f85bfbe86d033d7d52e9ecb262c5b692774397d7d8336e83639ddee0bd752a1c922fe897056910f71996fee07e6f1d74407f46384c264fcba6d06e37f7da284dc5e4fee72756062436f168a6e0d560e8960122d0c83e955c6126aec8e1fdfc41004c54062b1dc4ffa9d93c86b3dc13bdf7ab7bf0434124bf001036ad7053a907531f41be473273efbc80216f1f29d9040f8ba9a674990bc519db121f4ca1ec8256dbf5d43a3a92d2965eefb8b5b2314e7804e0897f7ca97b9c3f517cf49ace5bd191631876f446a88c4673cfbd81aeabbdad81ef431bd0abb4b2b5d9fc8d38c9b8c912a8de392061bde0f9c31026ab961d051b471d01e9db4a1e9a2c7b443d4e632afabcae8390df56d59627b6a144b788a0d3169f04b8c0e1c8a24d608d16131ec0f5f7f5b25db17e13e699c32c9dc77291de3a9aad6fc3c80d1faacc70f7e21d76017207ab924ca97714f3114c02b6107d302a17e7c0e999953aae7a7844e7cb2c2089d26f754df10c5f584116f23508f5e856e97da70937fdebdadbfaf3a27066c6ed3b93b9c51071e11c47cfc4fa3272fe8ffb6930c45adf15f141e64e13fe20136481eb6810605797b4f54fc604e249a9385fc6adc2ad5e9962bb30fd3fd6f21b98c99287c6b784a16af1e2f1ca95df49540d5acba37455c72413359e7bf02d6a609219572d500621d359515bfb42de47bfecd7d279306d1a0a669448fc9028e1cb444d037f98809ac42be28b3f2b3411831038e0607ee789fe2299279eff7e8797674523e6a940e08cbc925ac974e0c5c782064bf27eb9df8f1ec637ff1854ea58927e56b19f07721cec25852d039b162f69439624fc5d5f7deb58667e6ef1dfa0663b9d07cbb7a3caf0410a83ec65fb2c9b9487a8ae461548f3a5980ead779bdee15cd655d9885e4bad38083eeba2ee0666aca938b25848b751870a79995b385f41b98ce415dee5ba27ace1cc67036e7e6f37fc348324c24acdfd37bc92b6cd39a4d3bf26d6f5c4965ebcab72583707f3975175eeb5b61aeb30cf8a8d64db146cc5130888a55cb8afd2a9da20cc4f214daa166e386a41ecf6826477ffd00e1d8c90b0b48316d98b681231a3e16c6241bd5b73150504670b998f9b105d0978158a1cfb407e08ed2f3e5b4b1569ab89d389b7b1cb1b855c6a58e9ad830c2ff11af6cb797c32c1fb7daa1bf6edbf4c25b84a13c5d27a8d6ee2b52d4f1155ed504813cabbf108fc9aafa1217fa12fcd8f10a56f703df144fbf65b5a3ca50fcaedfe2d31562ebf2cabf00526ca491f3aae6fc08a04e14fce9e9d3239e66e3d6c1ac63e7a01eda0ae3400fe4afd390ef0c583c27a13ccf18f925bf9a2988aa921976996933a873931d71941f105e0805d8422297e6ad7462ae1c661bfef7d6c21f4ce3c03a3306ab8ae32a95ad80cd1a1649b0bb2b52d02b89af30c74bc6df8c9c23891bbfda5a374747682c6d15a166ab61cecbf2294e9135ff1802a868a12dd387b2c8f824414b7b6a5c91f28bd4a83cfe0997d537f520e77467336422818b094f0a130f7a67178bc46c302070393c978ae0d525201e83eb36931c1d2d600bd00cc2f54acbcadb43999b1594c678786683de5c2c55f503c865fa640e3cc9cb6d020fa851802bc4ea8d00ae92d567e90d5c292d9efc39a2a1ebbf9e5a925ce15acc0af67031716eab8be5bdc3404dd8a74420fb79f0f9eb4dc0b0d13031116ba77da8a78ee9275d6176d38fe1b8b04c1fe671d7452011fb8d7d505fe010393e9536642a760479652bf87cd661cd11c8d66484e2fcae1521c8bdab5b4f8f1519e5a5c7cad26365b2e2623da2c80731e49b3d78ef1e99715dded944a0a517da7685ee1fc0d035a28b9b7322d7fb942efa4794f62ba987e9994745082d4fa497ab4b6d201f39328829f2a6178de93005b5dce4704bb15b165d87a0085eb940a9d945be54bb62b8a53fc72464cd640ea8d54fd00b4a73db42927105f26c40f7a56bf05ed963bfdb0dff0af629f00f643e1b6256","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
