<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2712e6482c555c12728a3a3b1e6446313048515181cc69324ee8e7ce0ab89943e39cccc80d20aaddccfa496f83edcf21848f0b9b225ed9cc015ea78011fa0d1fc614f9c06a2c5e4769edb78d3344607dab46109a9f1d3c0d65c5eddbe74acbd5c627bc1eb294d96c5f1ad2de6eadc4ff1c5090515ee483bb8d1c08c02ea0694ea42910035cd68f9f3b2ad89cfcf22011055ef8281b308d06f63aa133c58603054f48392dae507fb59ac5db38bfd04a4f0e81e2581297b825728f62125af4f0ffca9d6f1c89f368d68e2dbb37ada06d77a185badb0e493830c7951d2eabc386c9de7efe7d649d03d83caf877c8dff17aea2456d2d492c36d27ea47537e35902651ad3e3c9303c08409e2969ea7cc9f36112df27b9d18cad6d92bd66e1e7ea4ae50b0fded781b31901ac72482662c0b733bee1cc293413d34bc93bc4ac15b5683b988869ad5709a0aa65d7e4808fc91f1831a6ba1c695e090a4813e737e807cd0e82f09fd70cd5eca47e6e3d943d3923b3c881c8a35785feddf43a507453ef87551cfadd98dbb54430b18f79b9404496cad14797c9efadbdecabd890669466b4fe7cc2f2c03065edb0c51a402fbfcb8e2d7e239bfc1a30f6b40312ebc6da821940e3109264054f78715b43a18d4c0471ee856f8edbdbb8a7ad05ef8ae13a80bd99fc55678e46e831d4f785c2325b8fe2f7a5a71011364faea07038341ef6583f5362df2956469b8d614fc766ac8b9d89fceb25198c35b327fc37bd7f2156dbc166af2b0052cb112217a815842876808e874fa1d44b2fe29c9ab32ea6ba1ddfb34039a0532f4ca43fe2a66c43cbc8e1d07b50a01572a1e97a804788dcc4ec778308ebcbc07ef6268cdd10c8f11ead804216c74f9c6934635681863e1319d119dc6d2d3457ad4868a5966eb30020e0f191e33a97178cad85e988bb7f46eb6be109bcf3f57480e02b3411aa10a34d9f014413ef3d79ecdf27c06c3cf5e0f91ec1707e47834b8d3974c6122fc40858f2436e2b27128eec5559ae1d70bc91b87b2122e1a274370340713a1b2fa2cc84beb5b1052e500863465f56a407f3daa03364cb576f58a5d13365971a961530919fbcb8d0f7fd4d112d17d89cf7d8be3e677a7538aaf2434004f83bd05bb28eb391ca72517a156207e17b8bf5cf3739af98b47ad18727b718ec94eccb17437bfa642558979876234f5d2ac1f000b9e376c92212b5d9980dac44fa13aa6957c13c2d231e827ed7f6d2f066ea6164f07faea8a3d7d313aea76324265a3a1575bc40fad8fb4f6ba3b16f72e2a262abdf63299fabb6ed2501b6f8a6a433b81218e8b3ec48d300b38400a8ed944ad3c21970f5529c6476ad573b0089576ce4a43dc32e704efe8ea341c8f46aad3d46b2c36bfca12a0605ac1005a874dfe66cfb26da69f78db07b22749ea1ea115a38e79290490dfe3ec16364cbae71761b336942eb1a15adf8841dc79313c18e49d09f0a37cd1e84fbbe251add8187d93749c1a4c5b27242a53aed5a55eb75e921f28196f724f61dde5efda83cf9fc7f7ed709776c57491db3d8b1a8d55026b986c0a56d30c4debdfae53a737c35f0847a9fb24bd7451ceb114865494e3b477eb7bea8c6bbaf3c7b0049d671e8a446b6890f31799c7ee7bc4ea1bfdc2ddeb549201ca0b54f979c0cdbfc221f36f613470ac24930b236c9cd26db28d06a805462b0fcfa486d1a1a61474d6aafdc3b881a2fe736499ce0cf3b9a0636751f3634620665ea6951edbadea6e4ef8fecefedc3a1869e1f97333a549726ec56eab76b51ad91cb33ec60f7456518e227386785bb200b66d28a1c2aa20ae870f300798620071b48701d3bf15530c3c989d4d339b5a2d246130e0109e85fd77d7180ac0d614b3de62cac5bac3df1d0e04d0e9ce1d76ee85ed906e3e66530991932699be78b4e46d50426480bb156b661f17c899a5d06538e6abe228e231b2bb570db200eda6baf31b7639afb2876eba13a44b5aa9a911e1be8372352e4568492c996a3e327f238afcbcfde0745c91e2c0995ea61e00ad788ec869c42e31b8b7b770f0dc3b2c2fec5fb353e8eeff5abe3317e5aa1f3b09054679681a3b46843dac2a0103dc54ee48beb39c22829dc01161a38990170eec49a8e50d5c8b1ad42e7a76328b5ede55428db6725b295b0ded40ce553a57d76bf376452763427e072193b8e5a93edf1044907108949b5f3eb69261692727e6c4140943a8e5a47af5fb79a3ee7c991bd421de0ff5bbedf61794790de35bff36420ff06c249eecb928a669e6bc871f3cb7b6a1e3566c1f57246c73697a4374d8596b148d4bd686271bd92f2ff1ef93a3e56ad2b55da8db1c06b343f081d28cef2ce251c1949da7e1638c76e07cd8a6c27d48566505dd4403f36b2c63a4838b69ac83e39377e15100fbcf4d53efa9fc9c9862af424df9f840e95fd963066aeab233e00c6581d0e9e7fc86c714b998a94a1ec2101a112dea6ddcd1d220bb4058cd1606fda82b25fae470e3f458b29ad1b7685ee8da1e5420ea7840c98223db63a2961a777f962ed7c379c014ce5e5678b4d78ecad27c37ae51777bbb34d73df29d58901b699e88636cf6e440237903114efa9ac091f322bb42725994d16a23766a6876000528b711cb016769aed55c6965635b6102df0a182451b0531d079cf5ced9fc93651078bfef245950e5b2c26b3fe03e463e1f7fab5321a4cb5d0b65aa0eea56a4d196ff933af66bfbd10a102e081369bbe35240ffae6087a67b6c607f8e25f3874f9a52fa8efd01baa9f03e5abc924a3e1b9909521ca7aa488708af897b01a47099ce31ad01df5c0d208aa931eb5737bf11109e8d4f60fea19d00e6b4bd1b952e565f7d1ca5324b2491770e1f53fa525c002b63540d01bdd4f95d06c98aee9341937385256dddc140397788908f2651e6b4eb45f69609b3b9356254159f0cd6a5c53fe6903fcc9796d5128d1afb2d01f283a9190afa566fecbe602b77707694d3d0fbb2d0a5bf82c4c3a59e3dd1c6daf3610c67514b938234ae2a5bd778af79a3f2947bcf4c91b8aeb21710604874de8535bdb8459e3e10abad54df1152d149bcf533f59af5da5c1e4b1d24e0e433e1b5b33b54721590df02275afdffa03f5cd1e3a25b6006f08d51fa12e3371f4e34ad614a4379352c428550fa97962abfb7075b31668c824a4b72108a14aa70e2381c9345e63a6c6cde905bd079750cb4bd8b80df969efd558971ac98cc011b8e74d4e82478d351462a64a1d087cb1376b37990e3c307006379db004fd44429443577b1b7305b1c109ffd85119c8785b01140772818cbd2eb42045b80f4002864f1976dc0aca9be98c8c67116e4327cc1f87188d4471283649a05f7292b134bac458af001478536523e9cf3a6d3c645db3287833d31fa9ea59b2260e2508727eccf0200dd59ade2e1e0232ce860ff8a11d53c895747350dfcb9a82c4e716e158bb73c7aba98ad14416324f0722d1215c07c7de2190b0b022b5abcd7ca48a5598d1535cbe9b73e9883ef9d6a7da27130a47485748cbf39e2befe560ba62cf442133b85082be557f4f363d76f9f67f38ba491959c5e4f53048c46a97685ef32b52a34d46f5fc5514312aa0d2c01d9022e41fa90b763b09ccfbd8773b84f6a4df029acfdf28b7446be7c1d11eb57cf2688f2f28ad0e2a23df963002aa5f92836e25c20503f80611d7810306e0815d9dc2800615a82b07dd8d70ce72a59657d856cd6606b25cd0195ad53ca5d16f194b074233b5508b0b2a9eedf9f1f98c66c08050e69657fa0e842b6d2eafdfc9751b9129dbbff075700e78ba4b474e03056e9f58c4579f4a15247ffaaa17a0be10565998900d85c1a9861ecb70c81e698b72b0656a648e7c5f6653197ee5af65ffad48fc90d87a217a15e70115c2a876477c932324bf03f37e6cf15282686e7aef06a42e380cb9db8925b2ab1103bbb63d304badac3686e1c57053eee54dff9c089ca4be149fdcb850350ea8eef24d4af16b723306cad0cdbd4630a28246b53699b8cbf2ea6e677e5edcb043b557bb41ef1999174903fd4d44d3a06456c5e3cd2714556d642002f2b3b1111bb94c2269a80b4615637a731d5e3c0eb79986dc7af88f01b1e3b06f947a1c3341fe23b94c455051b6903f442f67cbe432d24013f200af8d851fc6d33947198e8b76473c33a8ea96398e898df8da34df5cc19a2b22722646df04b5418eac2f7ef1fa677f33b8e65823ee8f90734cd4e5432461cec421aa9148796c82b8480883a815ad202b3d272f1dfa17949875db2acc83b370a3678cd1ef3d9c10140f98e17ec822d1a1667147a2d4130e27d33fcd5bd501e21c9098f4e8615f67c8699ad09e02dd719daf047f49e7cdbd8f9a79f77c58826e0e66c36242b5386e21689a1b13cf817fcbbd5a6a3668b24033b822fcdc17da8172a20619bf47aeaff1ad4132e44c3b12cfb7c68511d55aa9bbc1bb2db61cabb725c4f3b31d5a6aad635c76c009df0c3ee36e3776fa7ee3fddd35c34ebcb8dedb88f8991a15e23c10aa5eb8c9b9a2a3610e5646229c098ea075c4ca493d5d955d75a02abcb34c4ed60e748355b4d7ff00c2bb351e847b79fbc648f1b2bc7bd3456ee5d309b56e9d5217243e987b5e8211cb9c12cc3a81f2c8536ce48d9e606a77a91b0f1a6b739b27302ed66fe5f948676a7456c424c1caa081102e5680af7e3c425bdc02e35c163c7fe23d85e0e29574744f5ba7b796673abc5f810ea132c4245ee303c4f5ea5a9797120903237f696babdef9eb0e7925dd4dd0e553241cf5b92a0a4a19a85e8866fa503b5fb21cc40e74e3dc46cda5de31fe66b36e925d81bcfda80ccedb7a0887c9f8cb406207ac08b0dcd5c4878e1f134280fdf589d06fdf464ee37deb6e0ea882e5c0f9f7aa69f22f646a0474a172234d46daa3089e7aed301c3401eb4c495696233b08ed81c08026ddd1048ad95f9f25dfb01c85e495f90f7bf6bcd15acb11acf8a655993f89cec13bb3bbcf9f75be2f79c868ef4bc5f4e97fe0bd08b84dad704db96323c308a1ca6edbd264d7aa0fe861cc11f0b512c0b1d7633bbb7fbef2fb9a306a1c539a0ddeb75b10081770d755e6b619fd6fb9cb577e4a4fe26adad80e43666c3706f0fc03b26f045e43cca0113b74874acf5938416a529463c135621626cdc7db87ea75f2c199d1fbfaecd3be80a62cd10983ef45b813007a8885bf58b9d324a2d556b036878603ed02b8c65273df0f91f3cf63fd503893c27fcbcdfced842c68fcd8fcb7e60b275559298c3864ecd7aee5339e4ac665a3c3003b1b6cac9f32f91479454c76d4f1ca6528ae49266a2dcea72e1e0172d46ebf38d5f6a244b6876b845d95488b92218f01ba93eed37e2df788547768e742031c7a225c498f7a854dc188c8c0117fd3959f0bdaa3b6d102c3507117124a8bb5b7f3684fe45b6dd91ea294689c1b3de23b2cfde40f39b2d346c74c20ff1537f24ce0d9fd732c9fdd3a187635207ed0e18548e930ce8ae4e9bb8f1b5bdd18844398e987cdcc40cce156834586c56ee8c6bb394c48d5a0282c84c31b990d06631602b60964942b02d3247ea9bb3e5ed5f7d7160ee9e6629c943405fc75939b6533d378762dbed8934bb0d63da1f3cfffb931d5c0716c140473a757b9e586049621b97bdf5bac5281d71e35ab4131afc4ed50f142bd734107c644119868c4be95309d1ce918b0b1010b7ff9c9cf9b21d872d15f1bd198e7e51e548177da366e8c9a1bd530c715a09746bcbf4a28dc66699d2c479434eda957a59ad023fa48e614f24e5dd1bd45bd9b1dd295a67e2f458a7d1fb2ed2d6542dacca9186d44e67940604c84bcaf9776c82ecaaf699561ac83d2da53263f288d3a71d5d5c2e791c07eb664dbc882ad84e8b747e79a2f22bc1874e8022901917f34a6323c761ab3c1a8fca6a5a617b9fef724e1a3210104d27811760dc3b87f1d8ee248cb4472f531ffce115dfc70c10edef310cc660b4ebd4c7476c22383c8ae0e33e6d2ab126936b6b582ff82707fafca0661752a0729d4c7e8ae8a228843979faf3e50cb597729198e5b92c9b7303600e559d3b37fb6544fec7bfc46d60e333a09e944a5904a90525b695fae0f0bf801b3a9651d958c986ffa2e07735e3beeb299a6695806496b4d6729b6b7582902b12c2777905c1b9407cff3ada946f4e5a6bb319bce2f2c4d0b69c49a742045e5eeaa143581785d82f0c5a1c7d686d93a0900a3c748f9bafd9d4f174d9a68b1d6549e73e85a03276a5fd773c110ab5a5356792f4be5842e137103f14f45da6a10eec8d7254062fd6146e31b49239294ed429863654c4c7cc1e2490c8b2d371f3acfd1ad9d07efd3c9ce3dfd0869dcb7489f284063f2feb72547cd949084ef0978cf62a7da7075361662ffd53ff3d48a832af1d31670de01d57812f6090bcfedb58e1927b0c34f938c0a2de4d7bdd4bbdf6bfcec05dd8215388fabaf9eeccc2af345f05e8a8eec1e03267c86de11f78a997fda6e39df2f8a2e48fdbf6edacbeffaf44854cb06aa95a9c971e0e9bfe00f551e7ea9b43ab78cf094a92c22dcda7e3e9049fb91d60db7fa036aaaaf4d1fd5d61ab029a1c654b882fcb6a9c933c6d52265d122e09aeb0f0cb5a232d7605113590f5b849568ddbe0cad48451277b69dfb1592c2ad3bb363874d7528d6b229fd2b3a4d498ea7b0b2480cd31889136b1877b590609f03efe110b2449b085f9711c5387d5038f4af8d0ee487a4e0e87b401b0739660c459ccad91a8e18637c0c52ebad090d09ce2dd80cc45adcde231a7b6951abbdd95e0ed8ba0c79efb613c4845d30b49f70c130135199f606967ad3c5259718ad8c97ff934c509fffd5bda0883a1bbd0c6b47dbd017908f2817aa6e84612803cb97bef0349539fe919d9d2556f37816f6dda344fe6d145a6613f2ebeee557e38d87b5e29d2df159542cfbde4881b248d90290026626fd9386b390b7831152c2d79ac399885be224568ff96c5d375e448f70da8fc22bf90687256cf1fb3cc136f604c9cbf2283a78fcb3eecde545b4c8110f718b923a432c9f6a78b9cb9ec192b0628ad1917fd2030f10036dead11162129ac0569b2f581c1a6e66d149d59308a4e4a5d9e62234329e90c0700295b969b88a434f5e400b6ed9e7af56b12eb711ac41bfb6f81a1ed5d005b0c7c90e5fa3fc98b08ca262191c7eb08bb403d3eb0024b73a58af1a38068865b4aa476ef7623eaaeab9b37e0878735fce6a11e14127fd24f5d412321e3a6ec3fb8649818f00ddf6cf817a137a8b3591ea920f87863f3bfa75bf462bbd1e29f00b03bf1ae504c4f8e74d6046ca636744093427493a7f599996ba0f77eef75247dc5020fe3965c196a6f700d48dfd8929028b360bd88e5372909f2436cbc6bc7987417f4b9cc8a5fcd3846a048da7421f3913be385d899487c8ee2bb4c48895050e77ddc0d34efaf0d4b9cce1662d5164c9a5805651f9e9ef2757a6c172378e64e81267b94e2ea331c29d21137f9a1add990091c199134240f2f85def27cbee2fc0aff06ce8be5099bb32fd65c0df5fb4a380f80fbbf62be0c6dbeac45993ae12bdf3468b1dba12275275639006d73a729b5bfa6aa9569dcd1f5eab2661642bcefca892d87ebb667db5411355fc4bed953de2b304e2fb22b0199dceb9f756facbfb7d64c6a639557990fe6dec8c50c9484465273caa5ff089bb1344df430c4f21bc5586be5c5d8fe9270c24edf2fcb8cfaa280fb1b72565acd9e44a9057bc85388f8af93f07937aba981673a110fc82b84eb56de059974a46b99f69752f55d076b06e484458b1319f35554fc455b4e3c78537e05ac708607c278f4d1f3c3cfeddcdaac5c710dcd7b678957bc654d7c7c289e1b759a223b5f819755cd4c1552f9bfce52b81e1357f13eadb240507833c6d2121dfb7a4ce6a77322fde57128f1a1c7963f5f2fd0905bb3c6ec61631b47ca4ed4e6ff5c8e85bca9c897dca7acac6e316d6b745cb2957f56c509e63c6f0fcebcfb8520aaa9513e2386ba44d8ed8ea44d2204aa985582b69ef1c927eb08231bda4f93dc4ad2cbba4665682458bb216f8d53b8f49138dc1b35afad04887dcb253f97a0c834e1fed33559ced7d6d55968b6d8d119df6d00569d7158d30ed0045461b681a7f205ae19093c5ee95064c6bd5593d433d7ee998eb2478565f78f925f5789f24a1c5b455747cd1db2e9ff6fdfe54cd5debce6b7db657e02b6c7b684859841a9910aa01fabc5fed8fb140d3418b89f707133e689a47617104e221bf4da0caac8ee7053cd1c2554c2108b8b6232f9a5d830f76cda5281794802b6b40aecc79e959a1059dcdbd3a5a2439110d6e10362ed4945f0ed910e7b2c3db533fd9f64c8bedd5cb61c5793290467557e97643e3d44cbd439ca83875f343c28201b0445dc59eb60be167cac9308dafe13c24076be95ac12d018944237505b047e7f0e4a70e1e18974701bfb5c3708babeb06964e3a1484accbf3a4518c87ac7d3af9713014e878b800362acd30be37614ea0d9b8af71178d93e8624a0af7aaed40f73058af10c7aadc51af115235fc01515cdceab19f07fc881408f0e5eeb3fa3c9152db648b70e5226ffadfd7ba9a84b15521f32d2bc54102483f198d4a788d96c7190111231adac8c9ad898e80a2bcf47cd79974eb897dce008b8b72862334740daff8578c40fb88e59c7c1b30ed333e27ed30d6f2d1c208f0294ed1b3191ad158fefcbcdc22414c34b91ef8622b4722b674f677bd5054e3b8058950573c40ee81330c71e358f80de3fc715479a7311e930c6eb00bf3450c20940d5955a873725b236dfe8d98ad79bd2cb69251ee8e71f6b48b3e620c4c946a48e40569471f7a56df9c52c1abc1e345a3f1d152e3ecbbf7a5782a200566d896cc47d95390e0136f74845a6e9249df008e8b9be1d033d3bc8e7824b09b63d3f90484d02651da22f3a248caccbdf7535ac91461b729d817a1253cd7a8b44e93fc16232e993ea5fcfc33c8d9b177366dffab8fd584d4f66b0c14bee2ce149aed5f605107cf0ea8ae27758c9af86789a1f8c08bb0b1f7916616dfc33a90eaad977e27bdb4c5f0e665e1eac715361c11a074c6b88df0175c65b9f638c45b8189ffecf48371a43c9eede32ae0bc66317519559f24f00bf14b35c56aa2fb4a67be6a872d5154cffe70873285d2d2312bff4eb4ecdf8827ecbe0382d6394b714f60dd6a721ebfa9e635670d86d35215b0d4dd18fc5cd7486cf0b2385d6e5f75315d015c0b77b89b21cd1046d7d3bae30efd15e6ef21d4511599cb1d9a47ec40b9d06ed68404a11fc032e49fb4b5d9ca75937916e7c99786dc8ba19537aab779773bbc44fb8c2174af57774b9f69b77f0af34e4102a0b83340174dd60251cb18da42d0709c6cb233579bfe870e277e0e72258b60bd3bcc36b3d2c9ee7898a87fc7063ead420046a021b99711a5e9957aefa5a65d28a3030db232ec3f4c2aa21241def22c06c30143a64615332fca0e8b12d5f6d8c58dc337178644518a16816ca97e088c8a7af50ef8ba195cb0ee36dcfda1f3ac6a8a47416fb2511b9bc2b2379869a20a321465258236e873e99fe32f514c992247b2e36ac143e2b80e7b276dbf985af2f0f941cad0a9656413edab82211d9352118fdf5cbf5b217e4e77b054d36734b3430807801edad45939db88dc173b4a74aeea158bb19f1417911eb8373bc5708c0d2287a99f4cf3982bb5c47bf414afe8d594386b961d2da617cd47fa28e08944341295fa0992fe9293ae6e76258ff8b8b3c374b3779258271c3b83f2902ebb5c5c4cf796c17bfc8708cf5c4135c7ef05fd31790944cbe27ff524898c095728c259b911ed6f9ed9e97489a45e982c532a4c26c02f852879ff9edeb6a4f561da5aea28a61e14c21a2fb513958497fe4c65f1f5a8ac3a940555c8fb735904d59b2b1e3a0e0b43398deb0df9305cbf87f79fae083fcd6876f18a6ff2a4eb2fad39e701b00056a27d9075b0d3d7207598e1ed07e0f18a10b616f720ba0125399b10ff2a616a3b977e9e3f10c23b30978b68aa358bb027fbc450bf7b1bf52f133324d80a7cb941e87e5c9cc45cfb693bac1e609b84a4ae56078c7b3749c5a2dedcd3838846b67dcb72ff3e24001eee3eb7fcb903738cf76e3c30b2ffb25e76d157cc102a14a7d93c6ecd9ebde7d6d2e6e8d1aecccd4f09cceba600c985f64fc589642a53c4db9f7a59cf39bcac6f5021e545e2eab7aa24d85fb867b745754ba69ecca335d7a7dea9a3eb0c449e094eee1379a46416ae0025f8affe9333fed701276fb6c16f50a4318c5d5e6403287a784fddbd7cdf572f9e3d6ee9ca48af18f4db86331e1ef29d7fd4d3611fbc1d65edabc26d64b35b992fb8c6289e6dd3b6dd41fe732f708b95d6567f24721ae5ab7d0ebea4cfb235a5b48e6899f990a469313826f1ecbfa689180946ff4710cbd9ef8e2ef443dbeaad2ae1ce1c7e448ff2dc624e4dc256e8c87e534f6c9572c247a57759463eed6252ad0c050d6020b248357600e8a9287557381750e2e683293e49836777186f8f3fdf3b1691252ff809a872aa6dc7d6a5447c6791c3594d5b39495a6519c09e74e9c2832a74f8cb25ec0f91905e44e9ed237479ce96ea447b2b10f51b3e85e245bfdaf3f4fe87d01914e039915898f0019fd40eae27262872fa06469cba9e89a20b8df0fc1818a159e9088dc861165481c73deb537921a5610c30e60a6c8e54de5f7e9cb22338cd8e85d96468004303e07499d1bf28a6ec8f69120a3eed8a4a298205923e50d1ca1f2787de4d3f82be3f084d99779daec8ed07c6f337c82bd22cc0532b20a81327573e9c0dd4972ac75e73c9b2a2ed893ece376ec3c1ce094432610206f27b3589c71f6e44b90505d5c1b4cd6d77c075c27fefdb7434044398137fe237219456b5bb45375745e165bb32899b06f855469dd44ff6fa61815e9451ae7574ef07bfae06854a39a239d926a7755111bdbe857f456c944129b947e52c501128b39ecd66e5e8e5929d4089f3f06e0db0d8826e3da6c8c5b558883e1c082224d055f30968d35edabe3550560d0d638701f524089c75446147fc125cd01f6e69c28df7aa6e0ad97f08dbb91e7003fa255e6082abb5694d419cab6d1f33401ed041f1ef34053f6dc9593ac2142f5a4d2c403839e568abc4a2c809b682ff4ba81abe8c0740889ce43c144fbd9e5315ed7bc09dec94e0cb97b2fd06f17dc9090dc18bce40387980c13f665cab46b674bad581f82317090ce40ec6f86562b7ce2f6568769ba7812937eab31e0edde62a26447c4269977a3b1348668f61b45d3c23f7ffd114fb105db1cd10259d78a82c750cd173d96367d6608148c27909942fce807894236a0f2b84193e1bacb649fc69d1a7764105fd6b3b310027e711ef715e51d3f1c1ee53864b1492f49f8f7f491cd09923e8e66f3cd68f37a038df27cb4e569c29862ed281e43daa8c4ae6714e519ab02280cf6b752375ece8383b9710d1ae2d781fe188cbffad3edb467a075f008dfa9c433685912015f93ffa7a1c912352d3954d245405563c3e99dcc278fa024189e52e623c12ebc83bd8a03256b3a4557fb242e0b934ad0634237acb873728f4beff9a41875089891d1395312bf3dd1cac62db62ea0852ae2838269bf51fdc44dbb7b141ea0c5eb4961ae7a41de3c6d00136d9f0ea449c9da97c91d4483f243b709aea78de8b58c606af7a5382937b2a60c844217894d4902377dd94287bf0f50c34ef3028428948ebb2ebb6c5528b5e3222c459ebc853593106c986fe813be38c9f11c497d737912ef370dc69479362f25a9407c6ea4519a410a5024e5fa165876de389f692222902727d81b0fd38fa8b9db8d66940298ece0b9722cd3c2fc55cf86c017dab9972cc9a18c84f7e595abcfb422a8724302b40e912cfbccd99b3ea6ccd2ca23c9cce76015ebfb1e05d1ff73cc3c7354ddde1c1e63eb0e30f61e55259a9d7f15dfea446b95394a4368bddd2a573eb082250f31fb611f3a95d75e5c612a6902816708122619c37f6f98a588bc2055c49f6c02c26b105d80625167bdc72c9bcdc4f2795a1f77bfd6af7ab57eae175239ef21ffef84a8aec1d72d80443b3ef960143e1a4dcfe3b719e2c28b32783631e49d45888d71a9021ece83f7af337e31350e9f01dd99ceab0afc4ed64307ed86ea81483d500e4298d80b26135554de25c9eaf46489ee7ff79a0f21e59ef96fa3465b22d75cbf8d1f7f83cf8a53866780687280613b4b56692509052d7ec4e0b1dd621024c5a8af31dd68a701fb9c7ab0dd987b4226d5e65ddb17338a75e4e50c446be3a470d4d3d094e416047ab00397ea40c667255bc9a4afa131be5776defb8a0e8f2ad4ae257e412f9f300c4acff5d664829474f65b70ab6018f739811a7ee4c9843c694853a80e28862b79c9ec9feecc24910c663c33b840400080c826fb9957f52813f297e72c7161b19a54b055f7fc1a8a390e7f83b83a07706d0eef8ff94c7390a02e0b7de364098a3174a05bbbb93deedeeecd02776cacde1f78cee476595018aaab6b1b55a2430291a4e5a9c400e52d4b45f17e377c9c1b4ee5c1b7436291a9a1901d85bec5dacbfd5e61f36328c65fcf04d9d61a44e20588d61513b9d9f448e7624e34f59f6bc7900bd7e45bddc42e242743d84b2aaa78a31d26e95cff29153c4b76ac5fa1baa4cef465b73af78aa5bf82ee804cca3fbebcb1fda5cc151de57b3d9a1d139c97656832c92a1c094b724539dde5da7621b73cc46724480510eb9dec0ccbf0cbdeeb92133a49df081012c55fac60cc2840d973e65133b1917d58a0bd7be92d0aa393c39ccd302bd2dbfac4a42947e190e84c1b3db0c61bdf03dc0486f784d0233205bcd2cbe2194418c01c2414d02b1f2095b506d789149aa565c2fb85c52c045989512eddb56d8a0aaf942281f01218bbeeef8dc74b40d8ea5aac9ef1ac942515e227f28382ce38ef6fee1632f9c46637fdd7846f9c47387d483305a3611aa61b449549f669d3af83f6839793b5d84de7133932f44e2448685a13af7a2a02ad25eb3c3f8a0698e3339a7abc5c3298454ea860e62174d9993b47924dde7f1d3e636a00c8ac6ae13bd75a8601d4080fafd9a86d3705a0e903c1aa753c6997569d82312b955a3d5916579da735e9bc2470c049e8b4c832249e858a6bb4dd63e7b72ecd730bb5cbac809d366f160fed6abf4a84c09cb42d56df45892d612cb12167ab7f2d8c79872d54295154f42f229312cc65dc7d891af66d2768a9d8776902a98ec2b3d53911d11dba449017f6809f86eb54839bca6e271307a34cf02614ed7161415e34b1dc6ad0392b05a7f40d7d3e7e2f0ac4af7b57ecc71f35702107ec4af2f4d5c1a9e9088fb2c06ccc3ca430f7318b09695a2e373947665b2b9b97ee722bde35b63f345b4259392c090f898de10d9e879c4db48980a58e53cd16582f959e8caa4cc0184ef0fb0bfc1cee478925e313997071cd3a1f545123440233771d6012d0c9e5edb7875594e97b30c87fbd8c56996d9876376502023794c42d74803b8f5f4a7f5d3159f4451118dee2b8a104c96e7c9b5281a57c1b1e6953803200fe037265db89950384e05e3f234d2426af0e6d95ae8f9ae01b961c315baae9324d9ab35d920985b1b110c5117992c00a1301163398098d135c1333d5e3a8d2159b6308a5898c35b37beff04c9e5d97154788fad25b40b6b3a9a652a86172783e10c533e79f48bab2c4a539f20bc4e0326987f1c3a87b9bfa27301a6937a30705418d3b88a9e4a68ac61f336939d751d35f12c02a10b9edc89029471b25de70cbf2b70831d0a3db90718914304cf73c3812dfe19e3b35666b86056379f4852414eef1eee284a5794310ec5b747c3a1b2573c5af6cb7c561954b7395e0c51ffd81ad8c7463d0180ce7f0d38f3584c8acfde17c6255c5dc8cc9f2207d89ff30130e804af5aa2c25190c843e5268a00eb6c0f4b2affe91833e76f5e36a91d8f2f886134821276c8fcec1bca1e7c2905ec87490a21912da928f18279268860c1c2e4b9bf4c7c3e038f8adcc663e386f55448beb73cead8da60444c548c4332c4ba54b80a3fe8a5192e85a389e3f4cc1531899a4d47b0462508b76108394a4302a4361a19a31fb284a11a0e1b7a9518fa62aa0a47be86fe2619e352a89ebba3322156fa6d73548ca578eb34847ae270e5b5b5b94db5b30237b2879d3d42f1c1853d4163268b7d736d42055f909048406889c529fdef6092397a968936cd9e8fd2cf0917af5039db3023812dcf06de92086931660e8a8a6a2b31b6abd9096749c3f23175fd2e82705ccec3007efb37a3c5500adf07dc2c76cfeb652735daed74fd1d67ff1841359ea086e9209a519bdaedbc9097a80f19f4baaf712080f18ef408b8dbde79222f6a988a142aa1cf5818553a8ebe69e9d3d10b14c70d2db97e912fce1dd1944aa43a34c13e189097ad11cf44e96e9f945d6beef1abd55d2d91ac03ece05d12b17a61fb79439b74663e495b75e638b1953792f68105f4f50be6ad590ddba46be1d5063434a589ff43a7e74b1c425ad5dcdbe002f15f5b5d53ef8700683517df3347a248f369071a2ac24916387b0280bd001e60086ce7760a98d070bc2028892ed540062c584686280fe1022fc07a4c69dd3221984b59dc6cad16e951ee2bd59e6d9047d3bfb3ee98143147a5e85e62a5959e7dee77189f4618a308260c75a4cb35a3aee70f32584fa5b468de46237b62fe81ad271f3d0ffae55a471b4e8df9d27ff2bb4456cad0f2c14f5dc3d733d9fe64b15598e07800e55607f7838e8bc53e2fc0995020c4585a1f03fcfbd22c7bd4b4c3bd3a8faeee9432658fff2273df904a9ffec9d761b724b59a9d2e0b27c51f6e5511c98dc16a21f48e94256f78f3b2ae1ceba097a9960981dec6681d1925026d87b09338d34efeaf7a208c5de7aa551bbceb81e34f7d940827c665138cd6bc35b6894ae7c1e0c23f6937f192c3b1728129ea980662ad3a0a382c5b16e6f6d8b2e2aff30f516c3120397524e7cee59209fe89215087b8b57546a6190b8216c2e71124d1dd3c9f56679df9c59f1e19115dec728d5431d00f22ba694b0e80bdce188665b9399ea5b6eba790ecafda2d62fdad101b4d8345de10c1cf8c0f83cd60996311bc2e6a13be2890953748377b8c6ffb115c987d06daa51ac06c7cd2a273b0c1dbb689ab0c400c9d2bbdecddd19cccba2770240e2b3a8a3d47dcb5fd7c15b476b980128cb0f4ebbefd89bba87f7b363cb390c510e548920926df99a980dc2bb3d0eba1c17e1c9be4e18d8ec911ab4b97dbfc6ca765a89d93a9030acff0e2b373cfe6a800794398b80b7041c3a318cecf184a311f58ce85fdd5102997945a5299e0b782f1d9114d2c34127e59639b5a791c9aa6eb241696585aea1c85e7113563a2f56cdb7269b33608f593308f43c05b8fb56e4535e201ed6ea5e1b8e64f13ffd2d4aff5c3534882c45e75d9cd69681d9a1b6cf1b54b19ffc5112bd9c5e7cb2a4a9b88e398757d558c1c38e6adffc7ade1a4e1eebee5e97a8e8a7f4d3f111d53a297707eeed17ccc501473033d12dd5d8f78abc13edbe65f1cd1991accd3113b9eaed7c1e9d34fe159269c8665cbb77d95920ea6f676b76e2262f904cccc060c518d650652dc0e4b510e4f3549a54762106193b643d6c8585a15edf65c77d6d33d62eb5ad5514bc7079b97df554348470f8b48402667e4bf71642d798b05949aae0ceff2ce0a1995d4cec9bb35b1b8b295c2b14632e5f5b25abbe359122a7a121fe6fa8e02ad202c578da2df7f7e883c4ab47b927de043d8ef415c8fdddfd6ae819e9ba87787c21a9be51119f1cb6106268038e935f2249c249ee3260783fee944055595832ce611d6953d3451d4d6036db6249b2a74193fb3bfc5b5b686cb640890abd015172bad014cbcbc2b317aabdc7aeb6e56f359c3f5c1f91b7528177394679392deb4d008c4f38c6c85da1b7aacb84c4f02834d9f4cd6f7872e4e6461c09ea786770ecb0fb9f4bef9d54fdf285a4bed3e3b0112b4f3e8ef8cc82b8dff14a20aba2ded4b0814ae4b49814176d7bd8fd2c01daf39d760d332bb950b178f40f2638e888c8881a39e907bc1d70c753c9070dccab598b48fb2a8c9228132f0b79830dc3a798c091a66595d7c5dace504063fdee2cdcbac58e8963e48c836d8405e2f2fab9aff937a3ec8aecbf710f34374a97d42d22a8559a9caf613e3f31ef5c0519c54964a8c2e53ba91292493a6bac6cdae3fb6f5d893df75b7fb33d8495f8b5c71c63f8ca6a2f892592f83fb7e6862b763621fbed30c24bd489b50a6517a868fe650e54779dbbd400e04fe62a2ad14a8271fa2f2953a616b122d2a6b93a73389b5dccbb5d1985cb5437ecac3536c096055058ac8132559af55f60106e56ec2499c931aa02cf1a4f1406b35033617aa8b667e6ccf481088789b1ca6ca78d0705bc56c3d1acfc19ae159fd2c38f711f1412de5cc4376512a032a3b6b817fb908ce3c62ffd540b5496a79cd8222c7c9b5c2673009cfd1426e2d0d818d411f9024bbd94616470ecf3464be3853ee6c79c1ebde1521ace4a60cfeb1c3d4a6950f01bd58e7d346182d9c6530a37fd8ef0cc459b74085255911b11dca18ffe0861b3c30f579942e02db8ac1a7f541b24e9d2be3e4e63326c8598b4855d03948e0a1704e3630f78336d73165646be29c2d7639fe3ede24a7d6c8ea2b4c94c08d9e43062f31de27ff7d3007dd8b78851b9bae1b0803d2f93052a93b539ac14b8f52dae4ecebf80ad0c8a0c948248ce7b5b926b510d78e5df723a245d905a0bb86ffa19099aa6b744901a4f2cb6b3c4378c9f5198f69549f6d4708141235407b29974026496c34a65739f086d38aec8f65aa2057d431590f737cc32d03d7dcb6aff2d5b79e607c8019031013da0477528fab269e4966a57baf956a592e1d3efb219fda4f6ab278481d94b212c0708da973f01cc676b05e155250d2c3dbeb81d0809232557cd98ede2a787456c67c030331351bd0ac61a036a85e24c63e84eeedc1e5e8a637b5b63eafaac1dfd3e2c40adc2816a27337dc000629b1c7ab2f901fb5c51e91f0ae6e02a3aac8a756ccfea473a6da853d9e1a16bc1e535b9ce02d7740f17d09e05d1673191148ad09de3c7a53dd8a437c22aa7dbab6155acb4b5efbbb4d0175437e857b947ae16a27d9e221c8255d4083fbdbcf76ad51757dbb748d4cafb6c13f3b734d487aed9a292ddd44cea6aab255a83b923f4795b971e3b0b540cf387b5ff68a5b07115273af5312143ec70264d3b8c6be00246c735a81ae2a7657c52754d176a02e0b1cec71842a9e79d33658ad5b33b115b265919df4fea2d8ee53dd195fc5848d308fbfe903e865c5f9340d10f1523e619d2c07d1569cfe3e5006057b3755b0d214547a7bcb34844113a69e32ee6198b4f7c8e5078216efe070b0172b02a5da799a9f3ef4e25860735dd483ac7f03cf3f5dfd1fc570991e8b2170bd60932e788a3045ed7472604f12d143e14dbcbeb6dd4de2c26252d1a1c28b9261264ce2594edd2ca7d0d1894a87ecedd8976d953e66d96977b43eb7cf354acfed34aca0fbe4a1298e015900677de359dee1879f73b6639bf00a72a086a384561c381e395542e4ca8a6085054634b4069a9ced14a224efaed8eb96e0687a283194834fed0052ebb67dc716205adff3791159661038ce95a8153798c28a8d3d40f3767858dc180c74d092a9370ce901452f8eb8d2b8b3c06a8884fe9a2591806366c9ecb3513d20087c70c88a47aa3058a42490d3e50720047bda08626e92a9fc4ce9a60b136fd4f3813b3c2a514635e5956c45369b29dcad1f0df7975e8beef2b81938e82437aff77f0c3b6c5ba0cc4e194b7c759e99cd676386af93fc29f7c0baa97680a53c2952c77da894a3ae62ce9feeed0c8ced2b05a170cd71762d35ae978ec326dff5d1c507c700b490eecaa783654dca46222c68d710013dd23db989ed46ad3fbffbaf99895376cce0ee9a1a875022505d8415241d5eff701b95fe0e49cf876ac39b44f880d30505a6de2d5a3093ab90004e83657254f8a2f1321f8e510df27fdc434c900501a5febc805666b611a6dd8c43061d6d5baba278789211893c738148d60b6b47a69bb4d6be96c69009e5405c9f7a5ef0469462be5a905e6589622822b733d01760fda19da9dd5c6b5250a38c551a176150787e0fcf4713e2a2cbc8bbac621d27a446851be0443c5bd6888fa02cbcbfdcc19e68aa57ffb0264966fd988f7a72096f82adefc527bc2ba9e7455baa886850a06803a909490b8e4dd1ecd47f7d7d4dfe09923ffd52126a56480e223ebfa1a5d77ccbf9dd738e926d0a596949f4ecf2fc7641d952ee097b79eac836de0c0261bdd29597f6d68fabb57608d6e806bf0d64d7a2c66f0190610c62162b119ae3283eae5ce0cf40d5bc808f522aa9280cdb7d3daecf66d650f258619e0d5a5c957ada0664c3bbda64f93f4b98a80fd640801e05f10054f23fcdb5b68dd015f69bdd5a31d4651e4fa3bddc187e825b98b20db45783aab6b9e5f5507901b60e43b188262462a95ceebaaaa253999097fe8efc3f768336d4d22f3abeb4ba2e09668c9c147180acc4f369f7709ce6e3e2e940655883c5757b9a16029137ecbbce9921274cc06f631ba58146e0d2b57b036f9b83df04fb201981fa6b9457810af6f6d7fc55d2b3ffb167d38cc625e71da08e4348c58bc6346632f6f756c9f6dac2f881189ca0047d7b8797a843599ed7098e4b39160bc21162580e828309e917a0e804b1ca9efed6a25636d36957c122c13f258de36b87085cee8e6ae6fb0a1251da0898a29d6eea6368718d6b67b3e7264e95c9645f9cb12d4a3b965b7ff583cf523978631b70b064d15be12dd4c9db5e2d7faa66397abbcc7772b5e16256ccd4acf9e93821faddc3a39ef1b4506dfa0c59d9f6e96c05963ee05d737550fdc872c87ca9","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
