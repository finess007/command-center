<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"427369a80b60da9500048e98a8c012b325b3eda5dbb9d503c096f4fff267720a474f622db5b8ef787ab46a92a3c856a7b320a7b2f88332af88b20d2842dc292ec6c868cc24ad60507449329973cd6a5b21d3a993dad4bb2b616108a00fbc865eab6cfc4ea4f05cc4d1c8caf47de681b363e9d8c6c17248f92068432450697099c9e3d04910736b8ddbe7d822645c74434dc9750450bce197d86c9952d915ed9ad5489efa0f71d1546b5e141dc4e6ddb0cc6171ab21950c2629107d103eff77e463a56493bc2bf0c17321c7309193401902f5fc0a90ced68fbcd316c1849f7dbf371e559be5b04f60de16ec583a94830be767b8b8644d0418ba3f841ea53771df8b9b5d5b69ae67798d84cd4e5b672c7c3905379e8b9ab50c43977d068632bc629e63f2154a32446340ef27c8e358d7691dcf579a56ef9dcd1b4182ebea8cc5e019f64171204e7c2430b38425ab4375798274e51221b4149cc42f1bb37f67b66910f510335330ad01c4ea2477fc2893323ffe8ca69633206296dfd227a840f70d10c8cf20a9ccbfaff5ed264f41841cdc78ca688a9736164ac0cc9adf1b30555682f532b0f55ee457069ae5fdbbd26d69f183e95a63d1c23ec2b07fb4b2a938135e82c4ba374d88b2465f6319f69f1d0c2ab7bb4310b708cba35a6ded3139915ffc95d8994322faece9c1d2afdc463a5b7ec4abc8cf5af15814d0fb0c3e706f26217ee31a207a9777fa901a1e941995b05798366b8710576b11ed40666cd9cbf5645637b5674124b0814b9b4333045cc5e4a53984025503b37cc60704905c4e5bc644041f0ff716ddd9a4acb997cfd2a902471aebb4f56c47aae177fc422ca1d1617922e7fd8f7777f9997557b38290cc93b26a49daf65bb101c3ac75807e8919c2eb552ef1a558b26f14ad2f72383da3fbd62629a119bc4d1ae1fddb4192a028170b7712994a9f3941da5fcec51d5e20ca48937e63dff28c7b1c6583772496f3fe3d81c90491d237d766936a4e93d1c5632cfd14c837d48188e15e7a6cac3917e6a5d63065379c5a9f9263be62a003efb15afbf1ecf610f39d1e0fecca8c5edae8f4fca2ed2e8084970033a1b0129d84da7a5bf7fb4ef10fff2a369f5931e9f5040a4192711eeeab993f2e429dc1befcda5f66fe63e5393c34f32b6d80a895765f513bcd48c8f167a129d87dc774637448f1f380a167343199d9b76ec9fd080bae9bd0a80fec15d3d916471eeb17c268c5918e2430afbf394e098756736118b1c801b826b721137c9751c95bf56b6601741de39d221c90cd7a2b07295a825acd85e336302d99109fc89f97e1bb60a151319ba0e50a55e26c00ac22922bedd1a0d913a8b84a054e4a756013840541bf2bdecf0e58779abdacc24a83c0206b60ec7fa9bb49f26558a40a9e4891fcf44b5d4948e4737bff9752de63f321f2f3ff84bd7c67183dda46d9d3dbe359dec3c44141ed2146018b284870b4d0601db174477c4595c8d0c9e9f20a778ceb7df1b4251d99d110e2194b6f752f78fedf2a939d6c52aa9256c38ab31deacafe2a40402ef52909b6933b7d90224ad08269fed414a788b63e5ad556ce9f0b687deecd4561d1041fe90f2addde1e17f7da13ac89da59779a1d9879021724eab03c033e71da8e3e31a4fac72340f1b9ffd19c8350691bdaafeac573746c4dba6939dbc62957b18eafd832121841c2e88a70656829c4a30bef94aa4f3fe165f3b9bd372b500b9e40d615907cd81db0b78185982f0989974bf7517f40d4a0224cbad4fc1e8a1953694ffe3ac2c74c6a1d9f6f7f459d4054d3ed26b359b13c5a4ddd02057e6c3029109b0e86962a08cce2b505426d11c1f0ebf7235d935fb1e5ef3691467598b7a56722ca6aee49de0603d96c6e47a739386eea3233295ac14d580cb7b5996f3129a5f98dbb5f51b466b2f4a0f4d2b37d4b46841b3da3f51ab0d7f48f9c9f5cec42fe9f57ebcb808f5ba6f4629c11e1cf7721d110554580cd21c5a8125e706d1335cbfe8f967e668a996878987b75fef0923bf8b6bbfb0ff1580a1543a7d4847c5d886e018a7845e11353df55e6891feab94aa42c479bcc85dd1bc4caffcb1879e63464f7acd5cd7c5d9fc5ba71535b6866fdadb9914653ae59c36e342f1a396b9cc61bc245f42011997a193090c98c28437c2ac9e0aa6bded11162653cf759467f0105300ea74dc224b06cb3ceb69b652c96ee345c8893911477da9b428f1231b3eed5bcf6e01a6b520a2bf5be37af45fc94298bc46cc6718351d39a85da723e4c3a7d901833ccfd3e87b5b4dba8d0b842cd96a21f1224b3e8b5d6376d99bc804aab504429cf59feef5856fb2a14fc2dfef027ef4b88b2097c857564c07a0bee53f1d4608d411073c130ceb7bc955e528dbbbafc906e2ce7fa1173ca185c517a960dcee1bd434fe91c0f854f4896deb59306521fe2dfeae98d6fdf81c9457e2c6e7f633e1c3229a3810014927326202f9d743da3f1d6ceec9cfb15af84b5d72c6ec479c505f631533eefc1e8865f0e05d6e3ee61d9691371ca2f65b43da64a0ed1fb08a51eb0e06694731997e9a5ec75fba8bcea46d7ef74a98403efd259986b8b6a47004c14d80949677fcd71f119d8e96a331f4072fb7281291293654fe4c6f83795d206953ef879610156635385cd697210287741cac23407dc2ec1d3c470180c58f1bd17a7182dfb4c7c384be859c44b78e975ad183121d90c42781230553d0e953fc296844f1c4725cf3e82bcb2411984bdf880539ece217a512b32be5753f23fa83e0388aba40b0ae209e05c0bef8c460e63d33f279319b9e9c5d87be116857d00ed2c728f237c3d27a9b544daaeea9a0dc5bec7eb5f34c1721025265ab46e1a1deb35e6803bd5a95df885639c65a5b0e065f93af0d5b5767868905f128496dad23a025f3512aea5e9469c91ce46407a173e86efed0a3c4d74686e05f25119fb2b587cbb9fd5d01337096dcc5bf1680a3118d4aa93dcf21ca390360f656880fff6e9230a0299fbcb135b78030df1128cf76fffec5bba6c61df765acde10a500112432862b686b9f6584ac42885377e7eb0e647c673e329cc296edd0a295e4959d751e64dff2fa045f0b140c1caee89cdc2f93ab5bb5a14efe479c157ad0b4d00641ec550def6feff14131bc85001fff41d20fc38c3092c6defce81aef42a887cbe8758f066a49c28d959293b83001cef81ab963a5c87fc29e440cc6c09a4b4a1cdd7057b93c721556626a77294c27a481dea6ba3f1278d2f2ed4820077835a2e70fae9429ad9cf274e3ba0e8f8f081b1fbd9563dd967e9de951f77ed5f1cbe548b165a3daa684a838a3e4200e1ecad5180fdfb941bf908fe22ae95cdd20d7359a74842605a6da1ca38b17131821b93b0e90ca683119f5ea9e2283bfea631d5aaf1f905155e733ef34bcf2044b0ee0341d62a71e08bb611e787e31c7c3601d81b205a1562f5214f52f5d382070374d4e7a455c160d024a5c43fee3de22c86ed7d256025bdc49b798e8ab019c6814efcac8bae41a2cd6cb009bc60c8c5637ab2daa1a5a748b3239cc85654068799e77b5e1e7f6896e91a30a842e8cc8ddedf67e5354839a8636cee173b0261289dce5a40dad578f1223f7d14f57261c6c894d63a8b060ec6c26876889efdc08fe0afb391ad2006f0658538a3eaf12572a82387ca8022c0334900c74acda723041d55bc9b5178d4223dbb4cee8d04b482ed0e7627c5a01292d0e7c91db86ea05e73c5ab626c7a19dfaf2822af02b8c4119e3910ea5bd06dfd6304e49e93e058000a3988d6317cb7d9717bc82c4b1cd2fd94f2efa1cc79bc379b779c3f9beb13206eebfb3345a8cde5ef7475b333943dae7304857b873dc762d4c50d58c569ddf6504a5d116bb65c903cb9196fb9c3b860db4e01335cb1c263748340688cb8d05393ec6e7cdb37e05e2e6ba0a555fa7c9a40fa0c436e959c07254c07bbec44e63297a1a5618c687a74b174d2b83b590db5c98dcaeeab63efe66450090c9f74608ff1540e817e6d0067ca55e873a95a529b79df3f37f7fce441699959a75ea2c790f841484abcb389baf4a220bc86394d21989880ee12e67795b6d668047f06617dcb0d88edc349720233ed732476bcb38a7048023b4ae76c2942787d171dd8ca7ea9a7dbd9df947e6fcf868fc33666c4a3aacadfb16cd98005f328164f0235600d705079cc98d2e30dec32c669b189d6201aaf2f6b2bf5247b8f9c517bd0c08760820f25d550d5e4416cb216a83e8ae6ca101950d65f5d55c28ede8a38a77c504c8594545626856497f7926498599ab8def9d002c0b311a0f3ef8c871105943172a5e30f18c9b104ea4328656196cc342f230b0841140e1e9d2931c88fcff2149c292ceadcf688c01fad38500dfa317b3ccdf8a10a4afd2b306b27d6f88c9f52025e2809e1585db47cdde6f3ba5b2186ccd3642df47a4e5f3076b33dec89890421090231f99a4dd4f0bf02429a27ba53e978175af6c51c6645afea7176f92d38f28d9c32eb5927d4ce1f86da2a0fe0f12cc91ccf953e5245c6951dcc3b4b8794fcdf3d97f75db9a1056901c6c59e0b9719aaafbe6e018fa79f20c255ec28bec887c54323bb9d807ff2cb9ffacfc502b2bf43cc4e37806badc4b24df73918f198925b6ec38d3f4944973aa3ef43168a057e67ee54951de022253911ce967ea9c231378f80ae8e14874f498efb34f9b85c5120f1b6e5bf625161b1826f4d8c56ec1cb936c71d9b1d00c85c1c67569e9668d1a766214ec7895355be9870a6de086cf41710eab59bc2c729f0453d2e0303c14fe1f15f043313c2580d1a6e10620ba5e2f0a5cb49009c36132075e7c4e85de7aa9c9b75c66f6571c2d0edc1f5a8f293c778d5a8e2b53d347dc81a2597e9226410220ef393aec4ee39717fe339119a76a163948791c7a0bd97c875d5ce3eedc5a357fe30df98b862d9d7d92faed5bdb29bdb99592495288662eb29f1836d25e20e104834fb2b413f47fb386dc3c67d5f5e68eaead696a8095bed52eef28014bb04628c6459ce677e33fdf62e07cba0a18a8ab438880806117d7c3974b08d93a934d2d20e689072ae497d67e9e06298ce5a49dcda399b7dec46eedb0ceda42bf6bcf5ec86fb49ff37c5c4f57e2c0fa9fc6c8c8c8feb9b9f3290838fb6a5ef21359d3d6158bda4d22b4d1e5a28cdeaa52bee27baf7af32585710914826eba50fa86e13896d261bf0e135b50b5eda3f1972f27081909279b920bd77d322f20f3762a82ce0a385d2d1941c241c3716c9a1ae95c0c419a88a4dfeab35806aaddd5118b8d806783c19c061412f4bc09fcb1162f9c6dd88d04b2ad0b94c01c8093ca428b07fa0ef0eb45aa92279b5f9fb5e3f393ebac2d9839daefefd7ba2b792ee679adb990e08f9433cafd2298cf9a3bbef57546fc795694a6b273a9deab5d968e94e5a56606da994af81e4327ffdab36201cadfd5b9932c342aea348d95972b3a81274d73bbb09785494ae22b4dc6eb5d1aa8bf53ea2888ee3858deab7a10492a4304dbd8eddaf55d0808d805f3198d1787d062484c4a20e80934b338ce29ece74c8908eebdf721384773a9e2e88c2f89ebfe7793a80ef3d67e15309a7cc7a05d6be38f3d5d8982b0507027738b4e69e83de361b18b6601ad293ddd9721ff79baa01671bcc7aba2b66d307e6e9a0dcd541fe4a4348fdc0c975987133cec14b082555c035446f57e153a64ccaadc04d87904dc26f188e501a20677f94bfb32f61a84fb3453ce41b6a104ab979b11fe5d2667d474d254c81f38b1ba0b1b36e20b49cfe256312bc72a959322e6c4a3fa79a9039418606a48824e0fb5d9e8e09a65219f2b519df25510325e7d01c7c892359644cf36720ffeb33df06d38f04f5d8855398c02fe685aa0d508be8b23512b75277bdbb5d4d3b65e4c9496dd59d0f63d75530645948f627efbd51096b52327938888f54e0ce9e788cb52e604a17e2dc67c9444e797607b0edd8864a565eae198137fc8ecad98ba682bd7a3cd63a542ccca2fc27d1eea362f4e1019e57bd3e4ea1ac52ee11ea42c64e5c55bbc83ab4df690dcaf51892d41b98c4b7568e5264504b4fe5af297f450221005576ea108ae72c1b297379df9b3277e5cbcfeba022b135858f1be76c37b506d27003938ff78aaef9df4b94a2701cc3611964f75a7d9e05f803ff68dbfa4c3159717ce9cdd6a517264ec9c1bc0c8f7adb698d7ae1d6c9825d55dd6cf6f86c9acba666ea8a32d45fb07f9f8d7308a0ba0773b708dc23e2e73deac9466c8d04f618be5c99d15adf7026567c6ce0ebf50341ec300fac15511d6c5ce6cbd5bfcd1f66cb3f487f0d47020d10f351551e2ee97302999b18f869a0ffb98011694e2f79a52d6413ee97c9d7396c2621cefe552122b8f80de2d36b76de1ec1ac574dc9c39343caf3f82941e134434ae1e31e13762f19e8dfeb8aaedca21205fd0190aad6fc41bd99cdf6b6a0c86245fc9da8ab2e6040b946572ee314a268d7e01fe30090e35fea902d3c56aa0f599ade9c7a042ef498fbda13e2ea81fc076c44be01c29f8cbe4198da328dab73d12d05378de6cb4966c1d45ee299590084cbdbea09a4f9b94b7617200eeef104a78aaf6580796ac511716525d20ad66b8911788131ae87128770e81ff7fbe26510db5d7410d263788b6fc28183fee3a729f6cc5f96e3f170c274cc7a976441f984439f49aaa6234ab6b59f10cc0ae2bb2226d5d1917f06f679b0357bf56bcb6b414d4fb787041ea0147fbc7349ded7e4c88aa76199233fbcde016667857d5e43fabc70a4ceefb42d86146edb3ac2304e5d3daaaf981b207bc155fd5494210fb3f98c9eca0b11bc65b854db882c90568c125681548627cf877232ecee4189e9207a337daf3a931ddf10afcebb54dcbfdc3e73dd61c23fd1a367316c3f97f8f10bff4c55c06aee6e0a6176eb31c8221ad26277eec4596ae84a9f67368aecb3bdec11b7a84ec93586649757cabff98a0796fa89928b73917f17ee3090ba490bdefe88b1de1ec34d817101ea139e3fc608c0c35fe6525c92b0ee08a2ef785fd33da8e361fcc34f542a7f28392ac5f57ac02836fe859b2fc3bfc1688426ce034e1f8422b90ec6e85e8843d7d516083c3fcb40106b678fc5d4cf034fb3b239d43044ae5dd8a9321a0c0749503b89f859eae3854552f3f94d44a533ef505a850fdb616c520a7bd85788be05feda49194926c366bba3afff56365539612228774364856b88a9da83cb84b630fb17c73109f2810952f66a940166d43512ec6906bb2d070f1c742b67c8bb84e9cc84cf41aa425bda1a65386b81f21b561ee163a7ab0f2729404dd040f77019f7930a54bf2cd0b7a5325d29d83f63cd03e4ecb94b38cf16964e8dd8a715acf4c423be4c6a4c5a79ae36f70af83611f67e1b5b283db31609e81685708c1a2d5b8e54a3584318a4c4fc7d55f95ea891b32df476492230c1f7424d6db3da30ad572feda5f51acfc1c5093c61b799fd2952fc5fe9949ef9bf0846a4c0cec9a564ce45a9cee0398d815f4bad6a500eb8274b4eb427dbd10a97d63e1e242b6ba099f02fd6b1a107465a91888d7e8852e967fb62a082ad71c6db6813885b1dc3a9056b9af85b92a83cf75038d4fc547daab62842228aa94bb2efbc9372f3ea87c005334a58f859fec226e9598351cc2046a5e19911e274308a1cb6c910fbb932202f53072506a9f0a5bc8e7621787a5ac079559fa17ac13dccc6ad69f597c7db8109824c7eb3f6f8be4ea25e5680d3c334b4ae3dfb26191be573c2f78284acba1e8d3d9b97d1af9f230faaa4f9a754c518af7fa759ba945f8f3aad1717dbc403cb3070129a328e3ba90591529be549f33dd98de12eac5bf0ba87962a5f028c151f074424a64b00683dcaae3b16a547ae2ff033f5c493a90ae9b0936f0c375efe5a42e3ba7a2eac289d76a754be5d1491738d7a217aa2585888762bb0dbce12bcc1e4091e7ce8bc1ad335940282cf9c944d3b74f10fe5d4a8a24958f5be08b1a41f0592ce49b77152348d9988e8df44c96f1cc260cd2b09be7a1a832e7d8ceba7d91859d26586a683510c33ba70a1ef1a060d47b34c418c187ebb67307e32b26de7324b14b8698fc0f21603f2eb47f05c0e94dbee0fd734fdb177704f50772ca4e0338cf7ca84c43ec800fd8f7ddb38d28705395112daf217e6d70ca43d1cfd7f09564077e356693a8f3ad4a4a99f0a9f400a895b3392f190644a0dc560ec0ef4c4389a73ff5479920a89a7f9143d987b3800d185d065c75a90a88f9bdea82293b2d006f9162f042aada085f400a8437570b19bd35b978a0965f9fc56f343e0f3d80079267c2ab07b51ecb51ccde016d9cd91c1850a02b81c7ee8ebc7dcb3e14af22b96e5611895d8eac235aa18a727f81c6b98a04a9dafa806fb49f111a891ba139979e808f0eb005e80f6c82b64ea08e837f5d48dd4bc395dd7709eead57cace7fdde5a88c2754b2172166289e174ba70bd9d1f79c498a74404c14cf9abdc9333553d0d1ce0e2979c313e985ea7d13c90bc3938d95963d6210194e0a4ce1c8887632d160daad058631e8b06d302b3d9aff4a355427adfa605081c65d2aa2a517d701c57b42f89fd63b779bb8711e9f9ce98f546449ec9057f29bd707e6c95a2b74501bd22312fab99ea01a262deac778ee3722cc58535127dac2dbdd9b3a5f4bb95ff58c57d2072b0b6d7c28ef17aab36cd1332beba54325fa3e782ba651b14285c3cbc805abdfdc1821a58b6003239094d06fc180934d77f2db222660e3b5f33619690477b9259ddba2ddbc7508911c7594dc0ecfed033efb659bbd2ac1471ae2cb03b2dd65b6ea0c1ee85639a4519adc2b03b1a976d7742c01faa3613e626a8929c70d8d834a8303c5ac71598f2b8f50036fa259d463dddb1d6f1a2bf96ad81c05c41d3a727ba94d26bf14b3d18d961c5061161ae2280cd9b3f4294a4b920f2707cf9d81b9514c5f864defeb6c6f117f4821680156fa90ffa4d7dca1977e656fc2938d01fb9cbc567f0b1c93bc9ad37b41d0b270d0be32f2a16cbf843083ccdb264df7476fa6cc6fd1ca34bc515e717cb4b869d064e31b5022a024bb923335a5985a886f10b6332a8e229764faafae10778be969cd0354d27f948ae435095b2671517026afd062aaba9c47dc0a675fe1dadd3d54be58487757d1ea778d768863edbbfc34f520f4507718a5ce3d0bb0487bc069f4cf50dabcb45b26edf5444775e209b128e28e4abe14b77eb39d87d71318733f9351944f0990c9c389376e5f6795a8bee1853be7c5a8a8e6de28a95a9e802e7f1a4b97ec59ab2e33fab705dc64ff8beab1fb56ccfa929577491e2c239006110249c46b11ad41d3fd2a476e1578849e85c44a6cd407586eb586f7b674e80256dd59d496643bc5a310a3de28e2883fe9c0e63d6fd5a2acc25b80d450e2df28fc0803a4eec03459bb455a3744be0e56e4569610e1fe19a6e76afabc060c61a829cc70888493c7ddd46fe35e0a19cfaba7962bf05af57ebd3ae0b40cdb24bc5c20942f3cd4bd4927c721463f61bbd63d4fe5a6198d53d3df5d2186e4c04eb554a989995283b6cdf85f28cdcabefbeea5cb8d228e12263b6bf2aff426bc29ad88c18f408d329e7f2a48b6fc940acf49d8cc5c7c14db5fdd20d0258fa4e5f668a7bf0502f4d05cc6902d4ad7a7d52ab97323fb261fb0b30219fdb0015603502626b17b46e62ce1ab9e73e94e58f990635390fa2bbb684c65627197306b3fa5456399a5004e7f3cd1f7b111fa9d704c88b0e83a6c384883d454c04357712a53ff50ad16521f19663cdf8112639a18e17230aa590de33ced8c41466ca3276dbb6314e5673cc8eb3bfaa2e60ff7ad3138710e195936ade625409ffa8b99837818cd9626ef522d6f9d4f3b2c9ef9afab9ce5f83b7b8b1aa346ac7506c9848e9d1b7f3e59df3fb8fb8aaec1014334c1d101b4a65a097af2f4d35b576264d0de3855aa5499033d7669550df85322468dff509b188073b1e9dd24b21c25c34ee5f434175e3a149b79daa3b62e9ba9020b9b2dc2582b0b85613d110727cc608b023e57d2ed22f706c3361ebebd5de7540d8fa78432170852313997f73485abe888de22e193699ce65e9cb95edf70d2c902a86337afdddcfb81fcf29b62f2205c01b21baedf4cf193fc2884802b84c66395a29194a63ac83810ded13afba86c142a0aff70de81804d62b345dfd89bfd78b89a8b05eaea16571676e6015ef9188054e97774896f0945b216abebc0d31e89e781ba69008d3ada1d98da21bb9bdd85fbd4e3fa8d1a149ba156b1ded4e72b34ba1efb8a0e23ecd894c037652613c790155f50559ee44b2d7ccbb527001820b5c2be6d32f6634b0a50b54a0e3a7531e1c9d79e064018693143730867e53549e270674fd83ac6da9bc65d557a9ec3d6abdb03c9e10583183b4d91932ffbd1235ceb20dbe1ec74c29edb47cac207de80116fb5d9ecd6eb11f9f94603043c487c5b25bbc55e51996958808bcbfed82215a5c18273867337ca55ef88e51fa9163e6c77886369cbfc71a78b24fbb566a9bdcef61d180fb05e61deb9eaa142fe7fba779e7e9b4b5cf8d3da614f512e8fe68fe1512fc1695d7cdc363c8617d3b650df8ffa27f80a0bcd980d917b80abfed78a540a1a9cb4822ac6a566ab1802c903e33f94ff4af520990ecf16e4b668380b4b01526ee0ca014e5fae29dd604ec66caf8806437291af587a584669d9fd1133cf27b13858032d9a7c60b65d304f2b66e7e6104b8cec63bee5c72a80cc052fdb04a8c7f33b31999da5fd39454d6bbccee96d96430b545cd3f9cb33e8a290126c05b51730f84228b15cffaac1a4e68c5bddf8c7f314d2ca2427d02a72791f3a0a2609ed37a8fefc64f695de77cf605d9367064475c6a1ad40a1ddd86351fad13bcf9ce96a94e827135d6bf986dde4571ba5dcaee353c171b0b953bf82733573d9d11ae461430523a14fa8e029d1ea0e15d501392e2947667a72f2bbad6f605a28d2774196e93b4404fa79ae2cb810a8305b001ebdce636df646b3cfd07479acdf65d8488a27bb09b711047d24a5ba2c2a936be67da6231ccf7dadf96d8e9dbdc9949a397b11818e90e311db2d014c13a26f15d084b8eee7066ff8730341c032ddb6972e8db6b1ea46f526fb02a8a0f1607f8d45e394b54ccaa1797eb52171999f502639ddeb7592382245f0d4208ecd44f011775ea3679206d50b215a5ab16a40104444965b223cdf0d15a5e88c8d440d683f41011742395e421cdefe85b5ac8ba2fe990d06b2bc97c9728e70a8d595baf9ac839e84edc299b33ef67b929eae3b81f9c500bef5220f7de508d548020d6e1c2edee4506c7eca0a9280118bc5cfb2774446706f36477bc074e35fbdbfedf07db20bcdec511ad514c6448500164bbef7145a329e3d2b34b8e373d2e42e65860235e39864d5846cdcb305a27b96f547a713e71b056645e89dc5b27a6afb37a6b4aab2317b6399588a654ef77a22f15f6603c6c6278ae9549530d4014dc21d0bba364095f2e3e91573e03f7ec9b1fb0581b6a925264821b97038cb26763c1e65a67ef05af80bfbd07b40ccf84965fbd493a4dcb361ee643ba538f6f42997a523ff099b59c567831ce0bbb9036f9de18aa24c5b23edcb110f72f3bcfb0e56329c70ec8dd798ccc0ad3d9bac17ab515ede08340dcab2112ca1a662d5355b392f780f700510c0ae5d2b67adbe03f5130c0500949025d5726b314d523c6e3d558c94a7627c63778408677b356bbe299de0c2bb1c92974ac0c9859c695f1370409f336520e4b7c1b225a402149d09645b9779c5cd570f8a62eed209a2327787010c6d1103a37f9d2786574cde422f4c84b842740f1dc3e316cc4f68c9deda928f1306debc6b511870e97826745bb28411b733c2f4ac1a9afa45c2696134e25465b6b9884b645b10bbaef91d19d95b01b79e1d8be52a5529f1ce9bb56ac07bd9cee0628f3201609057429dfe44d721a916a6f81e70a41b4c46463cbdad8b70ff28b8055ab9ef2dfba64b38d8c266f1d2209e2aaafe0c02e430009f3463093d1f5431a4a09e668234b95fbb48ed586c2693b97bff64d0622e00c1bad334567477ae2a324add4b95c157ca3596efcaf6e2dcc685dd026ad0c2c13a9f121490d0417a708bfaa9c92c519afa4b46a9309d13b4e0ddf5d60adf0e37ece121bd2aa450558badb85dd7d274d82a214f21e1d738fb0767748c9ddbce3ab0a600be94a94a82794557d436ce4c97a3a336299a5e9971a5c20381cb5a1f7829d11ef2dda944a4c1c19cad69b5fcdf64afcf5fd2a189f03d528541c5be1e9a1b1791c51a60a351ac2fa552b875feee77eb21af8a9aa7d4215b6605f967cbdd705a6f5d5fa72b1d2ced0e6884145fbcd09f376d30246a91814c4c28d90c0801bfaa835e7ba1afd40b64423dbf3dd1b7f8406c2355ec2235b438a7b219d737615b09159ddf521c92f753646bdb9067d91d65460e76bd01ed593088c9f2c16f04976acb342899e85fb4825323fedd0e78c710bbbe126e62992eaa4803f775f7fcb8a1cdaecdf8d26f353cd55bfb2fb2c20c1c8111dbe9e9d6cd2f2cbc3378500d8d1a8f82d45daeb12af4a3c227edb9dc3045655e259f335a28793d3e6278f326738a04608fce246c8461f54abbccc42ab366f721bc4919b868e72fcae6e1b2da63bbf87fa3620ebcbc63df3d0d2f9b3442c31e4fb57616b55896dcb5be1eb0913f49844ff9c7eb770e6d80fe3847216f5b44921dc0de283a8fb3342de9e9d0d8ca58a77fbe06dfa6b20b5cea61a4021ae51e98b25ff14edfd07506e0e555b4792fccda14f18979f3f04edf5b83daefa6eaf5263e516a222c70d2d85d3c2021c4364e48746f0d5a633db8061dede9a92439784b59257fad0825a9aa5dfcda564a868aaa53e88651547af9346d58e841875dbc44a46c860ce854cb1f205530db7e33d6c6d56fb8bd43485da30dd96d07ae17046b069bd32e6fb567836c618ed555dd17a36955a85c8cb38dfb74bfe82239c6b99f95f78f256a350b0e86f623e44e74bbe089e321bc7e4c1c27ea9b8b267771f44df0a012b57bced4e969c54d7bff4efe67a7f812823302e3f0af30551a721edd8e7dd74933ab7c4c8b97dd908b3aabec3a0c1e18793587bacf54cc68b8153b29108a645671366ab420ae83f51a8a57e5959cef8ae288c5a1354be89af222e6a63f2fab5bf43dad8033d9ce5648d47ea3fe87da44440d7f2e991282b01d242423f60adf1ec93f794ee6e671a07116d7d9984b5f30477e5aec5925e1466c1e1b354d3eaa7c24733193fda4b3f8496148dee6b7e3028b39ac6c5ff111e5248656aa78a83ff5503832f9a1d96efc2d34435e828d32b7290129007ace30cf1d86f241c54018b24ebbb49b0ddb3b4398c195f2e8609b13abed089b564489d6ca2e0b73ed2ac069b85d7a2e4866d756068ff5fe4db7033e3ac642b50f4a5a8c252ea21a16548495f19cb1c8360934b0778cbaa150c9de6d65228331fffb7a0f694813e0da024d9feacd0b5bb5ab615d74fa86edbe40276998799641186aefb9fb81b7896cbffbb99dcd6ee5e08800b65e964189f5f795de33dd2bdd11384950f75eaead8d9e310ca56ae8d66547121631faa88ac9b49fafb1bb85b9f68b636d6254c7f12a53ead89defc803bfec2958182be2bfca03f8affc8371ef0b1f1939e5ab73b0984cfcf6abe6d305ab78ee84764a58d0bf7be046386ca53a52898f974e96116d2b260304681a61691464c9c095b748e35ba48da3ee962ca76ed1596033540f72754eb0d3f33ff7a6f8ca2ec42f3e206cfdf002a45fd5204c8c408e9857ba71f963a256bb6db082d48bb76a960930582abeaed9165ebed0820e333cf3ea1345204e43a8a23612290551e88643452ba31b79d6819b6dc1a2e56e6e43e843b12273672268a7aeca5b69d7d51770f67bc2fb18fd404600f878967b1641caa254c2ff62fed855d5e181d2f4da56efaee14640b0403f18c9e8fbce6d469978fed7900f219eb3d67efc7c31d9538c00d4a3bea4547fdb788f86b10caa41d63369c95577c25fcb7572bad760e212db2f17e3595976dad3ca5679cafe16659cb167be9275004a3a7b5bc15c6959ec55a5f2d7af296dbd16705a57f4cf346fd9e2ef33c721dab521deb5854178ee9618ad7186480fbe33ab913e79f7b3b04b09e1c02c76be366abbfb87b4b33fd943eed331dc2025f09632bfea552d31dbba906bc8ad40fad346d398e9f7a8e9cbfef8c66131d27070341d95ca5b14c198ff1e430bd4aaf258b627c5f67436ea8420baf22f5490abd9c69576427e8dfa321648da5c61a71033a7998577647d10e692a6a0c3158521708504a79e5e7b466c93a522b8aabe4a2f97eca3a9c976bccde0d8884a24806db994d7820c6e1d640b4e4af8f7c7b9b5481294a69f27eb3dc26bcad9225995ad482ecc579451d7b44373f314536a7d32dff1cfe4675e1dcc25e22aed9f8604f4a2c6a83366916bb744f177a658f469706c521dfcaffcb923f90e682c1e79976ada12b878281e8618856c14e406b1652f9283a552880ec9b5d9ae62f143262200de4b3a6b457ecf8f55b4a8ea649ff4bba8e2e33258793f4b0ff996db7f098cc609cfc2409b8247d51bbe70c55f199ba6517100c6da983a41d0b0a0f5bc35c7bd93891d77d5b57ea02193659e5e82a1a613b407a5aadea383e31bfc548a2354d3df9fa8675aafe23180767a996cf37c2d5fb390d8c9c9ab6f10bd7995abeb881131148ad5db35f051014defd2feaf760dd81a865b1d9f3c12f472c5e7511ecef6467046c50679a0cb722fca2287bbf72e98bae54dd9a83e5977ee195cefdf79f0ff764cf8dfe4d3f5cf30554c26832ef88b726073a5671cb0492624a6559451c9b89c58e65465b85e5dd1a0f8464ed35840dee0eaa0f4ae20d9cd956f8b247f3481970aa3b2a3af9a32f09fbf821411d58d29266ff9ac869808d3480355d9b1d1dce2550915e6f7b70b881c07a92d8732292d9e98b4baeb8bdf3007956cd4ab2765fb079613e36892db1348cd9a4aae96892d46ad3df6e49d5fbdf72d2e296e07cb9b90b079359281b0934c0dbf4fce0a6ac257f9c21d38af8c231f207db3a09aae2dc691a32643ee69bcbcc1be690fe83379f39122084ca1c654ba8e9a1c9fbc24fdf99fef218c53d94ee7bb60d8b9e7deabb8a9d39e318bc663eb1b09dd2a1397931190a442fdc139c8e7396bb733c1b43ec394ac695e475a83f3693ad959382501b2428c5fc1344a26112fc3d9354623e87a8fa6d61eedc29da93029d7978d21ca4c7e2ce529a984d9e77e98bac7647581f1cfeb18bc32f8a1b23ae6dbd419e47e2b0bea8bfcda70370e9fe1424a3d286a2a1355d4617552afef5927ae1ee91305617eca02e9e702ec8e98ab70da92b6792edfa1224dd560265e1824d96cfa411407667ffa86fd73c226dccb42722f6dcb04a6ade87ea3aff20afdcd656efb7b8e7bd983110cc600a8e69db5fb6139bc724ec9d9abd9af9a2ebf0f2f75ea558f0e3fdb0e7641539933556b237fd32231388b54f4b798accb04fd997c392cb681650c8876256a63ed581d0adcaba7e8a80c74b92fa09a0f4b22abcc1307f2637fe670a143922b58597a0c926c133a7ef8a735cdf41655a35a637b3e4a674bd6e259ff60520e5b057537f24db494c60ba99404542f1dbe7088f4390b7d21697389e379223fae6cbace7afca209aac9d77dc7d22900672ab9e9b92ee32427489a61bb02ab08f7b15a3e91790a2803f7ccaed016a990ac71cca32390b0e341f862a6cb03aa651637e5133765fc692215bc908aa7c5e17e7996f9095a2a1899c4d6db6190169429dfb18f60439f863bb325bda171abc6ef7975e4d75a45b9a2042d594ed655cfbe26cedd3e18bae2cadafb0946368e1a62715da19679dffbfdfaf0b5a14cf7de1edd08c33e4c0d53a863974e84d385711ebae25245bf2fe84895a5a87446827b50ec3b11a2566628372f266a04b8fdf26e2cf39c69ef111b2c51c0d01f587e14b5a5369b50925334620b070a6238b40b7dd4fc514c090d160c17974aa04b9e826ecb8609848b8a5508b0aaab1dc99db3a3050a1dae71befb02f1c4d199522eda9795e55e96bbfb7ca443cabd1c39ae6afc3851a8cfd25047ec82239c77a0f349304c9c5ba019b5ef38a93c81aa81df81193ea81efd3a47edd89b92faa3608cb5f4b33344f400ea5bfb09b8160c1c0964151533ae917c1facefd5c2974366e7210e5498d5b1f2422449762f13c7295159cda59244ce10c1c0d89e5733185392ef1ee70495c4ab68bec6c1b0e3821c34d5af40d1454eb954d003436e6227a85b1f4ab583d3c70eb1e9b99c5d9827ab31a4bb8aee7d0dc64191e77db11c895a86e472bcabb0cf333f7d41d6e6ad1252925a1b884a5589888e4268122dd4fa4b2ff0a60fffc2dc86d7becbbefebd02425f7d4c360308a0ca35a89970572e46aca9b4ea2e55010ae2cecf8f78bb96d0b78292d39d96adb273059b7a508de257d3f369499d027e5b6c47e23cbc40a2b7f720a8e4a3cda4acc858ee962366c79fdbce527741802ff2ac97c348bb47fd1dadd818cbb23c13837a3c7d7d282fbb60c14e48dbfd12c1988c355010d40dda58db685da2aa6fce6bc78f98a1ac5da6ae19b2b12b03b4e9585d2e3a2248d02dde7d1d67669e3811501bd38ea443542650ea0050f28a5bfd08218a795fe17b6edd6e10c9b3b50c70a2db3128ae258ea51510168d0054386244196634ea83f368196cec86928f1d697c3eabf44c97fa95ff77d47d909c3966304c9edd51954d296e5d4c081836e2e43a957bc0d5f114d27cb1a891f5bd465d9568d8449ae645e6d7bc0eb3b71bb25c0021b77776533048b141c0f58cbc3a9d7d59fad9490fea80cb42b182a3b9b36a4732c8ce1165f1542066ab6fbbd4e56346bf117f57f1237cb273d741936136f66acb94996741b5effd7eee577f8a7eb87887d43adc2ff9e8f490e8530db3c5e1e2740f1f3f835e71dcb41654ce2ec10498a23ea9517bd542384c04d099eb68973fc5f8bf18d4582670f0c94a3f4ebbe540e7c71b1204c3b7948349fe76f7dcb5e463e70be4f06b5f49c1d38a63cccee587f3d59a93ad098826881a1bd921c1b460a7e813c96eb79e124621b079127826789fd6141b74b2ed0a5018e1da83b9ba30d495a161e66863515cf5a723505440e1c5c38cf68e003634ccff4b63ece7a2f6367a62ba1253aa3c6673258d489585249f9167ea5e0b9d8fa8840e669af28d7ef4bf5ab0615588c727c93fd988785d51eb0c786721f29b6bfb184aab2e2e6ed6646792405c3f879085ecd469568e08cceb197da620193c7b7d10b64c485e01c1e746f98b78dde0fbae6c58a5453e31e25a0258babaa72c236b9c36408ebfc1bc955a4b331b7bcea9ca2c243e99d0ae41518ff2cc772551f5d1553c7121501a27231d2af4ce233053227d46ddacf6e502a6fbddcc01d1ac7a6f250f47692d1f513cbeb371f00ef684462fa2a489ec1dbfa89ca95a787f3d7a3f8192cbf35f7b95fd6eae4d972ee92df182081c9268c9e734c27acc61f78e57ab5ccec90afb8b52465eee45edb1ac09ff98d7c1a00ddee8681663630ff1e8f06a5ff9c6af503bd8a0b9903ecf402ee48d2643654682caccf9dff7bfcf553fe048f7417c39aed171176745e29b90cc2b881e51be0ca22567cf8e32df7e49e52274a49d7dd2af781b9139896171040ac7a93ceae3cb9cd031276ae1e3a6209317a323d325a107e2d596b0eb632faef3fb636cb1f4e55fe23b810538e7bdc059327ba0f72c00e55012219ad0bc50f7206d4f30198d8f3f8a12734e789830864346364eb9a707d56a694ef08c9d3c982c75bb9380564bdb162b981162cb0fa7d7ac94ae87a6ef3f26c635dcadc94a5634a480f3ae71616cd007ec6b87dbdd6f84d187692593676b16fb58e0d86861408a8462f9f985b690f33f0294a4d88e8d1d65af5cde157c786159122256285979d2c04ce1bf18f4870a6f7b80faa7ea1e9b7b503cec39de909576dbe6fe1c3db74aab58dfd3438836c7ad600a9e2ad790153c4c84f18b59b2072e45b4a8e296d05486ce38cd338c1a51c964d538d31b4a9098a641898b4491928ef31384381de61f2b9876d238d863b5278fe61479bdafb067e4cf5991aa96543705e95bc9288cc2dc98804e8f188778bffc5daa9d83d4c7d3a13c99b3533aac466135c1ac4df1cecf63ab27431e782eac6717081ad53f985a17a492a80e34070e3e2073ba59a83a6214721c24207b1c19304d2df5bbc156cbf0a528b744b9492bb89538a25f4d4075f089740531951b089e2cebe8e9cebe8e0804d209a1e56dfa08ab4022131cb2425405382452d8d6fb148da70c811b8b37e41f045b2616716bc6cf365ba7eeaf66f7c1de585a53c1de95a9d50f0672f9e8ecb603087e4f6ccfa7ec39999add9975f8e0b23a125c83ccaf5398a3e74afef7baaa9b358efe850a10bd396a99ea2e0236873e6983b9b202a06a474b8ab1f278230066268e06478cffef13bdb74eb623149fedbf84e466d0daa2874f66612c20becab15b694285ae15a2d44ff012d97ed7b0815585d0ee9ffbde1117999748f1b20eaa9978cef19539c0cfa581bb2fca54534f7aa6efaef433c12c3eab1f509ef9d2330b0ce301b86eae69a930edb09f3a04537f45b3b9f8ab185c80f1443ccde5c2fe446cb79252a9a3728938e80e71e65275e1e47db0ec4eca15e50aa4bc62ffd0eaf53e846aa42f8c43facf84856aa2bd58e1e91b193a1285678159376bbdfd4dbb1fbb7d1b6b02483e9d0d76213d5b5018d531688f5b53baa073da2dc46b320787efcfb0649990bca98ae4c2550ab2b714d2bb6aa2edb5c2a9ab602d3c5d3f127b0c61d37fa40328ca21f8cb10c3e0f6a94274ba8d8831adfd2e08b8b290867a88a5d2d0bebd0efd7f72ce4bf5b342b1a9c30a7da40e359aec08e60084261c0c5023908023ae91a3ae7c0d6601cb3b1e1c9e0f5b12639b67d18fdbe68f1e6734c4014572d982c8d1ece40ab02a4bda96119feefa76a3e4b9b9bee458a7ac140fb64abaf3bc66fb3740695700662154ddba4291c44ac7f289ead3faa9ef5f294c9ed2cbfbca28924f2cbe34dd59e25028cae91f03365ee8dc03376f062ca15abd88cc4d7a690e6bb21a41d11e78ec89ae5695e24a2763a1a358d563f7df28c4f6b1590eb7c798c77895128a6af751198b5cc95a0b8f318a5679681854c752b748b8adde34054efb6cbe5b492d0ec98601e38d13789e9c6acce4fdf841757541265659b01d1322aca795239726a57c03523f5fd9c7608f1498481b109e417415a1ddaf3fda0c897556a2003f1b68ad3932a8508be9204488ff6d8e12d50b54be2661a6137765850d099ce23f09e53bd43bed4d931768f6dac186736bcfd74775b023d1e3ea1484b9df1c4d4316d160a9e11ce458f2125cbe138296cceae5ab0400ef6ef8d10ffbca9183def7356f09e671092f59ea8590850b2f30a569a1f15b9325390d432a77d7a04725280f9276a70384be50c8341d9477ff2eec05600425b1c6b435b6745790e3a7edb5fd0cb45f8a7433937b9a34cd0700d785e61c14ed9bde201cc96a10707887ed382eefe3a4218045fe91e2d9094f6f2e2d3f5c5dbad8768dabb4c36123de3e69c1c63bf76703e97f42bcfccbe31a32ac53cc30920e84367ca509c6a9744893f73062951b9008d91d8f1f4380ce6718bf698d81192407d674c00207b19e6f0199ceda77d1e666b054395c258d7284f69bb36890289ad7c524532e76d1b8c29c44b8c3081692f774c6854d2c669608d846503da51fb081362842bd86ef01790adb98e5fdfc14e106be55c07536d7dd6dff8e4d325e123b88bea9ecdb7471b62d97d9a2754dd04ac723c428e9c073b2ffec88d3ba54f6a7b33b484823816d47c19e52a1aebeead38a63084cd2b51d7d4df020e8baa80b499d467bc39bb8ada152f2c82c9f4a8a64c50f7999f1b8414","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
