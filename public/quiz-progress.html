<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Quest - 300 Figures</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 24px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { 
            font-size: 2rem; 
            margin-bottom: 8px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { color: #888; margin-bottom: 24px; }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
        }
        .tab-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            background: rgba(255,255,255,0.05);
            color: #888;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.2s;
        }
        .tab-btn:hover { background: rgba(255,255,255,0.1); }
        .tab-btn.active {
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            color: #fff;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-label { font-size: 0.85rem; color: #888; margin-top: 4px; }
        
        .section-title { font-size: 1.25rem; margin-bottom: 16px; margin-top: 24px; color: #fff; }
        
        .info-box {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
        }
        .info-box p { color: #a78bfa; margin-bottom: 8px; }
        .info-box .emoji { font-size: 2rem; margin-bottom: 8px; }
        
        /* Progress bar */
        .progress-bar {
            height: 32px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            margin-bottom: 24px;
        }
        .progress-segment {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 30px;
        }
        .seg-box0 { background: #ef4444; }
        .seg-box1 { background: #f59e0b; }
        .seg-box2 { background: #eab308; }
        .seg-box3 { background: #84cc16; }
        .seg-box4 { background: #22c55e; }
        .seg-box5 { background: #10b981; }
        .progress-legend {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
            font-size: 0.75rem;
            color: #888;
            flex-wrap: wrap;
        }
        .legend-item { display: flex; align-items: center; gap: 6px; }
        .legend-dot { width: 12px; height: 12px; border-radius: 4px; }
        
        /* Sessions */
        .sessions-section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
        }
        .session-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .session-item:last-child { border-bottom: none; }
        .session-info { display: flex; flex-direction: column; }
        .session-date { color: #888; font-size: 0.85rem; }
        .session-notes { font-size: 0.8rem; color: #666; margin-top: 4px; }
        .session-score { 
            font-weight: 700; 
            font-size: 1.5rem;
            padding: 4px 12px;
            border-radius: 8px;
        }
        .session-score.excellent { color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .session-score.good { color: #84cc16; background: rgba(132, 204, 22, 0.1); }
        .session-score.ok { color: #eab308; background: rgba(234, 179, 8, 0.1); }
        .session-score.needs-work { color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        
        /* Review cards */
        .review-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }
        .review-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 16px;
            border-left: 3px solid #f59e0b;
        }
        .review-name { font-weight: 600; margin-bottom: 4px; }
        .review-note { font-size: 0.8rem; color: #888; }
        .review-category {
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            display: inline-block;
            margin-top: 8px;
        }
        
        /* Browse tab styles */
        .search-box {
            width: 100%;
            max-width: 400px;
            margin: 0 auto 24px;
            display: block;
            padding: 12px 20px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            background: rgba(255,255,255,0.05);
            color: #fff;
            font-size: 1rem;
        }
        .search-box::placeholder { color: #666; }
        .search-box:focus { outline: none; border-color: #7c3aed; }
        
        .category-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 32px;
        }
        .cat-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            color: #e0e0e0;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .cat-btn:hover, .cat-btn.active-cat {
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            color: #fff;
        }
        
        .category { margin-bottom: 32px; }
        .category-header {
            font-size: 1.3rem;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .category-count {
            font-size: 0.8rem;
            background: rgba(124, 58, 237, 0.3);
            padding: 4px 10px;
            border-radius: 20px;
        }
        
        .figures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
        }
        .figure-card {
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            padding: 14px;
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.2s;
        }
        .figure-card:hover {
            background: rgba(255,255,255,0.06);
            border-color: rgba(124, 58, 237, 0.3);
        }
        .figure-name { font-weight: 600; color: #fff; margin-bottom: 4px; }
        .figure-num { color: #7c3aed; font-size: 0.8rem; margin-right: 6px; }
        .figure-desc { font-size: 0.85rem; color: #aaa; }
        
        .footer {
            text-align: center;
            color: #555;
            font-size: 0.8rem;
            margin-top: 32px;
        }
        
        @media (max-width: 600px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .progress-legend { gap: 8px; }
            .tabs { flex-wrap: wrap; }
        }
    </style>
</head>
<body>
    <a href="index.html" style="position:fixed;top:16px;left:16px;color:#888;text-decoration:none;font-size:0.9rem;z-index:1000;background:rgba(0,0,0,0.5);padding:8px 12px;border-radius:8px;">‚Üê Dashboard</a>
    <div class="container">
        <h1>üìö Knowledge Quest</h1>
        <p class="subtitle">300 figures ‚Ä¢ Spaced repetition ‚Ä¢ Practice in Telegram with Nova ‚ú®</p>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="progress">üìä Progress</button>
            <button class="tab-btn" data-tab="browse">üìñ Browse All (300)</button>
        </div>
        
        <!-- PROGRESS TAB -->
        <div id="progress" class="tab-content active">
            <div class="info-box">
                <div class="emoji">üß†</div>
                <p><strong>Goal: Know 300+ historical figures</strong></p>
                <p style="font-size: 0.85rem; color: #888;">Pattern recognition ‚Ä¢ Mental models ‚Ä¢ Never blank in conversation</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalFigures">0</div>
                    <div class="stat-label">Figures Tracked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="sessions">0</div>
                    <div class="stat-label">Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="accuracy">‚Äî</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="dueToday">0</div>
                    <div class="stat-label">Due Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="streak">0</div>
                    <div class="stat-label">üî• Streak</div>
                </div>
            </div>
            
            <div class="section-title">üéØ Mastery Progress</div>
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-legend">
                <div class="legend-item"><div class="legend-dot" style="background:#ef4444"></div>New/Missed</div>
                <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div>1 day</div>
                <div class="legend-item"><div class="legend-dot" style="background:#eab308"></div>3 days</div>
                <div class="legend-item"><div class="legend-dot" style="background:#84cc16"></div>7 days</div>
                <div class="legend-item"><div class="legend-dot" style="background:#22c55e"></div>14 days</div>
                <div class="legend-item"><div class="legend-dot" style="background:#10b981"></div>Mastered</div>
            </div>
            
            <div class="section-title">üìÖ Need Review (<span id="reviewCount">0</span>)</div>
            <div class="review-section" id="reviewSection"></div>
            
            <div class="section-title">üìä Session History</div>
            <div class="sessions-section">
                <div id="sessionsList"></div>
            </div>
        </div>
        
        <!-- BROWSE TAB -->
        <div id="browse" class="tab-content">
            <input type="text" class="search-box" placeholder="üîç Search figures..." id="search">
            <div class="category-nav" id="nav"></div>
            <div id="figuresContent"></div>
        </div>
        
        <div class="footer">
            Synced from Nova ‚ú® ‚Ä¢ Last updated: <span id="lastUpdated">‚Äî</span>
        </div>
    </div>
    
    <script>
        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });
        
        // Progress tab data loading
        async function loadProgressData() {
            try {
                const response = await fetch('quiz-data.json');
                const data = await response.json();
                
                const today = new Date().toISOString().split('T')[0];
                const figures = data.figures || [];
                const sessions = data.sessions || [];
                const stats = data.stats || {};
                
                const boxCounts = [0, 0, 0, 0, 0, 0];
                let dueToday = [];
                
                figures.forEach(f => {
                    boxCounts[f.box || 0]++;
                    if (f.nextReview <= today) dueToday.push(f);
                });
                
                const total = figures.length;
                const accuracy = stats.totalQuestions > 0 
                    ? Math.round((stats.totalCorrect / stats.totalQuestions) * 100) 
                    : 0;
                
                document.getElementById('totalFigures').textContent = total;
                document.getElementById('sessions').textContent = stats.sessionsCompleted || sessions.length;
                document.getElementById('accuracy').textContent = accuracy + '%';
                document.getElementById('dueToday').textContent = dueToday.length;
                document.getElementById('streak').textContent = stats.currentStreak || 0;
                document.getElementById('reviewCount').textContent = dueToday.length;
                
                document.getElementById('progressBar').innerHTML = boxCounts.map((count, i) => 
                    count > 0 ? `<div class="progress-segment seg-box${i}" style="width: ${(count/total)*100}%">${count}</div>` : ''
                ).join('');
                
                document.getElementById('reviewSection').innerHTML = dueToday.slice(0, 8).map(f => `
                    <div class="review-card">
                        <div class="review-name">${f.name}</div>
                        <div class="review-note">${f.note || ''}</div>
                        <span class="review-category">${f.category || ''}</span>
                    </div>
                `).join('') + (dueToday.length > 8 ? `<div class="review-card" style="display:flex;align-items:center;justify-content:center;color:#888;border-left-color:#666">+${dueToday.length - 8} more</div>` : '');
                
                if (dueToday.length === 0) {
                    document.getElementById('reviewSection').innerHTML = '<p style="color:#22c55e;text-align:center;padding:20px;">‚úÖ All caught up!</p>';
                }
                
                const sessionsHtml = sessions.slice().reverse().map(s => {
                    const pct = s.percentage || Math.round((s.correct / s.questions) * 100);
                    let scoreClass = 'needs-work';
                    if (pct >= 80) scoreClass = 'excellent';
                    else if (pct >= 65) scoreClass = 'good';
                    else if (pct >= 50) scoreClass = 'ok';
                    
                    return `
                        <div class="session-item">
                            <div class="session-info">
                                <span class="session-date">${s.date}</span>
                                <span>${s.correct}/${s.questions} correct</span>
                                ${s.notes ? `<span class="session-notes">${s.notes}</span>` : ''}
                            </div>
                            <span class="session-score ${scoreClass}">${pct}%</span>
                        </div>
                    `;
                }).join('');
                document.getElementById('sessionsList').innerHTML = sessionsHtml || '<p style="color:#666;text-align:center;padding:20px;">No sessions yet</p>';
                
            } catch (e) {
                console.error('Failed to load progress data:', e);
            }
        }
        
        // Browse tab - figures data
        const allFigures = [
            {cat: "conquerors", name: "Alexander the Great", desc: "Macedonian king who conquered Persia, Egypt, and reached India by age 30"},
            {cat: "conquerors", name: "Julius Caesar", desc: "Roman dictator who conquered Gaul; assassinated on the Ides of March"},
            {cat: "conquerors", name: "Napoleon Bonaparte", desc: "French emperor who conquered most of Europe; exiled to Elba, then St. Helena"},
            {cat: "conquerors", name: "Genghis Khan", desc: "Mongol founder of the largest contiguous land empire in history"},
            {cat: "conquerors", name: "Hannibal Barca", desc: "Carthaginian general who crossed the Alps with elephants to attack Rome"},
            {cat: "conquerors", name: "Attila the Hun", desc: "\"Scourge of God\" who terrorized the Roman Empire in the 5th century"},
            {cat: "conquerors", name: "Charlemagne", desc: "Frankish king crowned first Holy Roman Emperor in 800 AD"},
            {cat: "conquerors", name: "William the Conqueror", desc: "Norman duke who invaded England in 1066 (Battle of Hastings)"},
            {cat: "conquerors", name: "Saladin", desc: "Muslim sultan who recaptured Jerusalem from the Crusaders in 1187"},
            {cat: "conquerors", name: "Richard the Lionheart", desc: "English king and Crusader, rival of Saladin"},
            {cat: "conquerors", name: "Cyrus the Great", desc: "Founder of the Persian Empire; known for religious tolerance"},
            {cat: "conquerors", name: "Sun Tzu", desc: "Chinese general who wrote The Art of War"},
            {cat: "conquerors", name: "Spartacus", desc: "Gladiator who led a massive slave revolt against Rome"},
            {cat: "conquerors", name: "Leonidas I", desc: "Spartan king who died defending Thermopylae against Persia (300 Spartans)"},
            {cat: "conquerors", name: "Xerxes I", desc: "Persian king who invaded Greece; defeated at Salamis"},
            {cat: "conquerors", name: "Frederick the Great", desc: "Prussian king who transformed Prussia into a military power"},
            {cat: "conquerors", name: "Duke of Wellington", desc: "British general who defeated Napoleon at Waterloo"},
            {cat: "conquerors", name: "Ulysses S. Grant", desc: "Union general who won the American Civil War; later president"},
            {cat: "conquerors", name: "Robert E. Lee", desc: "Confederate general; surrendered at Appomattox"},
            {cat: "conquerors", name: "Erwin Rommel", desc: "\"Desert Fox,\" German WWII general in North Africa"},
            {cat: "conquerors", name: "Dwight D. Eisenhower", desc: "Supreme Allied Commander in WWII; later president"},
            {cat: "conquerors", name: "George Patton", desc: "Aggressive American WWII general; \"Old Blood and Guts\""},
            {cat: "conquerors", name: "Douglas MacArthur", desc: "American general in Pacific WWII; \"I shall return\""},
            {cat: "conquerors", name: "Suleiman the Magnificent", desc: "Ottoman sultan who expanded empire to its peak"},
            {cat: "conquerors", name: "Tokugawa Ieyasu", desc: "Unified Japan; founded the Tokugawa shogunate"},
            {cat: "conquerors", name: "Sim√≥n Bol√≠var", desc: "\"El Libertador,\" freed much of South America from Spain"},
            {cat: "explorers", name: "Christopher Columbus", desc: "Italian explorer who reached the Americas in 1492 for Spain"},
            {cat: "explorers", name: "Amerigo Vespucci", desc: "Italian explorer America is named after; realized it was a new continent"},
            {cat: "explorers", name: "Ferdinand Magellan", desc: "Portuguese explorer whose expedition first circumnavigated Earth"},
            {cat: "explorers", name: "Roald Amundsen", desc: "Norwegian first to reach the South Pole (1911)"},
            {cat: "explorers", name: "Marco Polo", desc: "Venetian merchant who traveled to China and served Kublai Khan"},
            {cat: "explorers", name: "Vasco da Gama", desc: "Portuguese explorer first to sail directly to India"},
            {cat: "explorers", name: "James Cook", desc: "British explorer who mapped Pacific; killed in Hawaii"},
            {cat: "explorers", name: "Hern√°n Cort√©s", desc: "Spanish conquistador who conquered the Aztec Empire"},
            {cat: "explorers", name: "Francisco Pizarro", desc: "Spanish conquistador who conquered the Inca Empire"},
            {cat: "explorers", name: "Lewis and Clark", desc: "American explorers who crossed North America to the Pacific"},
            {cat: "explorers", name: "Ernest Shackleton", desc: "Antarctic explorer; legendary survival after Endurance sank"},
            {cat: "explorers", name: "Robert Scott", desc: "British explorer who reached South Pole second; died on return"},
            {cat: "explorers", name: "Zheng He", desc: "Chinese admiral who led massive treasure fleets across Indian Ocean"},
            {cat: "explorers", name: "David Livingstone", desc: "Scottish missionary and explorer of Africa; \"Dr. Livingstone, I presume?\""},
            {cat: "explorers", name: "Henry Hudson", desc: "English explorer; Hudson River and Hudson Bay named after him"},
            {cat: "explorers", name: "Jacques Cartier", desc: "French explorer who claimed Canada for France"},
            {cat: "explorers", name: "Leif Erikson", desc: "Viking explorer who reached North America ~500 years before Columbus"},
            {cat: "explorers", name: "Neil Armstrong", desc: "First human to walk on the Moon (1969)"},
            {cat: "explorers", name: "Yuri Gagarin", desc: "Soviet cosmonaut, first human in space (1961)"},
            {cat: "scientists", name: "Isaac Newton", desc: "Discovered gravity, laws of motion, invented calculus"},
            {cat: "scientists", name: "Charles Darwin", desc: "Theory of evolution by natural selection; Origin of Species"},
            {cat: "scientists", name: "Albert Einstein", desc: "Relativity, E=mc¬≤, revolutionized physics"},
            {cat: "scientists", name: "Marie Curie", desc: "Discovered radioactivity; only person to win Nobel in two sciences"},
            {cat: "scientists", name: "Nicolaus Copernicus", desc: "Proposed heliocentric model; published on deathbed"},
            {cat: "scientists", name: "Galileo Galilei", desc: "Proved heliocentrism with telescope; house arrest by Church"},
            {cat: "scientists", name: "Alexander Fleming", desc: "Discovered penicillin by accident (mold in petri dish)"},
            {cat: "scientists", name: "Louis Pasteur", desc: "Germ theory, pasteurization, rabies vaccine"},
            {cat: "scientists", name: "Nikola Tesla", desc: "AC electricity, wireless transmission; rival of Edison"},
            {cat: "scientists", name: "Sigmund Freud", desc: "Founded psychoanalysis; unconscious mind, dream interpretation"},
            {cat: "scientists", name: "Carl Jung", desc: "Analytical psychology, archetypes, collective unconscious"},
            {cat: "scientists", name: "Gregor Mendel", desc: "Father of genetics; experiments with pea plants"},
            {cat: "scientists", name: "Dmitri Mendeleev", desc: "Created the periodic table of elements"},
            {cat: "scientists", name: "Michael Faraday", desc: "Electromagnetic induction; made electricity practical"},
            {cat: "scientists", name: "James Clerk Maxwell", desc: "Unified electricity, magnetism, and light"},
            {cat: "scientists", name: "Werner Heisenberg", desc: "Uncertainty principle; quantum mechanics pioneer"},
            {cat: "scientists", name: "Niels Bohr", desc: "Atomic model; quantum theory pioneer"},
            {cat: "scientists", name: "Erwin Schr√∂dinger", desc: "Wave equation; Schr√∂dinger's cat thought experiment"},
            {cat: "scientists", name: "Richard Feynman", desc: "Quantum electrodynamics; legendary teacher; bongo player"},
            {cat: "scientists", name: "Carl Sagan", desc: "Popularized astronomy; Cosmos TV series; \"billions and billions\""},
            {cat: "scientists", name: "Edwin Hubble", desc: "Discovered galaxies beyond Milky Way; universe is expanding"},
            {cat: "scientists", name: "Archimedes", desc: "Greek mathematician; \"Eureka!\"; levers and buoyancy"},
            {cat: "scientists", name: "Euclid", desc: "\"Father of Geometry\"; Elements textbook used for 2,000 years"},
            {cat: "scientists", name: "Pythagoras", desc: "Pythagorean theorem; music and mathematics connection"},
            {cat: "scientists", name: "Hippocrates", desc: "\"Father of Medicine\"; Hippocratic Oath"},
            {cat: "scientists", name: "Galen", desc: "Roman physician whose ideas dominated medicine for 1,500 years"},
            {cat: "scientists", name: "Robert Koch", desc: "Identified bacteria causing tuberculosis, cholera"},
            {cat: "scientists", name: "Jonas Salk", desc: "Developed polio vaccine; refused to patent it"},
            {cat: "scientists", name: "James Watson & Francis Crick", desc: "Discovered DNA double helix structure"},
            {cat: "scientists", name: "Alan Turing", desc: "Father of computer science; cracked Enigma code; tragic end"},
            {cat: "scientists", name: "Charles Babbage", desc: "Designed first mechanical computer (never completed)"},
            {cat: "philosophers", name: "Socrates", desc: "Greek philosopher; Socratic method; drank hemlock"},
            {cat: "philosophers", name: "Plato", desc: "Socrates' student; founded Academy; wrote The Republic"},
            {cat: "philosophers", name: "Aristotle", desc: "Plato's student; founded Lyceum; taught Alexander the Great"},
            {cat: "philosophers", name: "Confucius", desc: "Chinese philosopher; filial piety, social harmony"},
            {cat: "philosophers", name: "Friedrich Nietzsche", desc: "\"God is dead\"; Thus Spoke Zarathustra; will to power"},
            {cat: "philosophers", name: "Ren√© Descartes", desc: "\"I think, therefore I am\"; Cartesian coordinates"},
            {cat: "philosophers", name: "Karl Marx", desc: "Communist Manifesto; class struggle; influenced 20th century"},
            {cat: "philosophers", name: "Immanuel Kant", desc: "Categorical imperative; Critique of Pure Reason"},
            {cat: "philosophers", name: "John Locke", desc: "Social contract; natural rights; influenced American founders"},
            {cat: "philosophers", name: "Thomas Hobbes", desc: "Leviathan; life is \"nasty, brutish, and short\""},
            {cat: "philosophers", name: "Jean-Jacques Rousseau", desc: "Social contract; \"noble savage\"; influenced French Revolution"},
            {cat: "philosophers", name: "Voltaire", desc: "Enlightenment wit; religious tolerance; \"I disapprove of what you say...\""},
            {cat: "philosophers", name: "David Hume", desc: "Scottish skeptic; problem of induction; is-ought problem"},
            {cat: "philosophers", name: "Baruch Spinoza", desc: "Pantheism; ethics derived from geometry"},
            {cat: "philosophers", name: "Gottfried Leibniz", desc: "Co-invented calculus; \"best of all possible worlds\""},
            {cat: "philosophers", name: "Arthur Schopenhauer", desc: "Pessimism; influenced Nietzsche; will and representation"},
            {cat: "philosophers", name: "Georg Hegel", desc: "Dialectics (thesis-antithesis-synthesis); influenced Marx"},
            {cat: "philosophers", name: "S√∏ren Kierkegaard", desc: "Father of existentialism; \"leap of faith\""},
            {cat: "philosophers", name: "Jean-Paul Sartre", desc: "Existentialism; \"existence precedes essence\"; refused Nobel"},
            {cat: "philosophers", name: "Simone de Beauvoir", desc: "The Second Sex; feminist existentialism"},
            {cat: "philosophers", name: "Martin Heidegger", desc: "Being and Time; \"Dasein\"; controversial Nazi ties"},
            {cat: "philosophers", name: "Ludwig Wittgenstein", desc: "Language games; \"whereof one cannot speak...\""},
            {cat: "philosophers", name: "Bertrand Russell", desc: "Logic, analytic philosophy; pacifist; Nobel in Literature"},
            {cat: "philosophers", name: "John Stuart Mill", desc: "Utilitarianism; On Liberty; women's rights advocate"},
            {cat: "philosophers", name: "Epicurus", desc: "Pleasure as highest good (but simple pleasures); atomism"},
            {cat: "philosophers", name: "Diogenes", desc: "Cynic who lived in a barrel; told Alexander to move out of his sunlight"},
            {cat: "philosophers", name: "Marcus Aurelius", desc: "Roman emperor and Stoic philosopher; Meditations"},
            {cat: "philosophers", name: "Seneca", desc: "Stoic philosopher; tutor to Nero; forced suicide"},
            {cat: "philosophers", name: "Lao Tzu", desc: "Founder of Taoism; wrote Tao Te Ching"},
            {cat: "philosophers", name: "Zhuangzi", desc: "Taoist philosopher; butterfly dream paradox"},
            {cat: "artists", name: "Leonardo da Vinci", desc: "Mona Lisa, Last Supper; Renaissance polymath; mirror writing"},
            {cat: "artists", name: "Michelangelo", desc: "Sistine Chapel ceiling, David sculpture; complained about neck"},
            {cat: "artists", name: "Raphael", desc: "School of Athens; Madonnas; died at 37"},
            {cat: "artists", name: "Sandro Botticelli", desc: "Birth of Venus; Primavera; Early Renaissance"},
            {cat: "artists", name: "Vincent van Gogh", desc: "Starry Night; cut off ear; post-impressionist; sold 1 painting in life"},
            {cat: "artists", name: "Pablo Picasso", desc: "Cubism; Guernica; most prolific artist; 50,000+ works"},
            {cat: "artists", name: "Claude Monet", desc: "Impressionism founder; Water Lilies series; Giverny gardens"},
            {cat: "artists", name: "Rembrandt", desc: "Dutch Golden Age master; self-portraits; Night Watch"},
            {cat: "artists", name: "Johannes Vermeer", desc: "Girl with a Pearl Earring; only 34 known paintings"},
            {cat: "artists", name: "Caravaggio", desc: "Dramatic lighting (chiaroscuro); violent life; killed a man"},
            {cat: "artists", name: "Titian", desc: "Venetian master of color; lived to ~90"},
            {cat: "artists", name: "Donatello", desc: "Early Renaissance sculptor; bronze David"},
            {cat: "artists", name: "Albrecht D√ºrer", desc: "German Renaissance; woodcuts; self-portrait pioneer"},
            {cat: "artists", name: "El Greco", desc: "Mannerist; elongated figures; View of Toledo"},
            {cat: "artists", name: "Diego Vel√°zquez", desc: "Spanish court painter; Las Meninas"},
            {cat: "artists", name: "Francisco Goya", desc: "Spanish Romantic; dark paintings; Saturn Devouring His Son"},
            {cat: "artists", name: "√âdouard Manet", desc: "Pre-Impressionist; Olympia scandal; Luncheon on the Grass"},
            {cat: "artists", name: "Edgar Degas", desc: "Impressionist; ballet dancers; pastels"},
            {cat: "artists", name: "Pierre-Auguste Renoir", desc: "Impressionist; joyful scenes; painted despite arthritis"},
            {cat: "artists", name: "Paul C√©zanne", desc: "Post-Impressionist; \"father of modern art\"; geometric forms"},
            {cat: "artists", name: "Henri Matisse", desc: "Fauvism; colorist; paper cut-outs in old age"},
            {cat: "artists", name: "Salvador Dal√≠", desc: "Surrealist; melting clocks; flamboyant personality"},
            {cat: "artists", name: "Frida Kahlo", desc: "Mexican surrealist; self-portraits; pain and identity"},
            {cat: "artists", name: "Andy Warhol", desc: "Pop art; Campbell's Soup; \"15 minutes of fame\""},
            {cat: "artists", name: "Jackson Pollock", desc: "Abstract Expressionism; drip paintings; alcoholism"},
            {cat: "artists", name: "Gustav Klimt", desc: "Art Nouveau; The Kiss; golden phase"},
            {cat: "artists", name: "Edvard Munch", desc: "The Scream; Norwegian expressionist"},
            {cat: "artists", name: "Hieronymus Bosch", desc: "Surreal religious paintings; Garden of Earthly Delights"},
            {cat: "artists", name: "Auguste Rodin", desc: "The Thinker; The Kiss; modern sculpture pioneer"},
            {cat: "artists", name: "Georgia O'Keeffe", desc: "American modernist; large flowers; New Mexico landscapes"},
            {cat: "writers", name: "William Shakespeare", desc: "Greatest English writer; Hamlet, Macbeth, Romeo & Juliet"},
            {cat: "writers", name: "Dante Alighieri", desc: "Divine Comedy; Italian language founder"},
            {cat: "writers", name: "Leo Tolstoy", desc: "War and Peace, Anna Karenina; epic Russian novels"},
            {cat: "writers", name: "Fyodor Dostoevsky", desc: "Crime and Punishment, Brothers Karamazov; psychological depth"},
            {cat: "writers", name: "George Orwell", desc: "1984, Animal Farm; \"Big Brother\"; real name Eric Blair"},
            {cat: "writers", name: "Miguel de Cervantes", desc: "Don Quixote; first modern novel"},
            {cat: "writers", name: "Homer", desc: "Iliad, Odyssey; may not have existed"},
            {cat: "writers", name: "Virgil", desc: "Aeneid; Rome's national epic; guided Dante through Hell"},
            {cat: "writers", name: "Charles Dickens", desc: "Oliver Twist, Great Expectations; Victorian social critic"},
            {cat: "writers", name: "Jane Austen", desc: "Pride and Prejudice; witty social commentary; died at 41"},
            {cat: "writers", name: "Mark Twain", desc: "Tom Sawyer, Huckleberry Finn; American humor; \"Samuel Clemens\""},
            {cat: "writers", name: "Ernest Hemingway", desc: "Old Man and the Sea; sparse style; Nobel winner; suicide"},
            {cat: "writers", name: "F. Scott Fitzgerald", desc: "Great Gatsby; Jazz Age chronicler"},
            {cat: "writers", name: "James Joyce", desc: "Ulysses; stream of consciousness; difficult modernist"},
            {cat: "writers", name: "Franz Kafka", desc: "Metamorphosis, The Trial; \"Kafkaesque\" bureaucratic nightmares"},
            {cat: "writers", name: "Marcel Proust", desc: "In Search of Lost Time; longest novel; madeleine memory"},
            {cat: "writers", name: "Virginia Woolf", desc: "Mrs Dalloway; stream of consciousness; Bloomsbury Group"},
            {cat: "writers", name: "Gabriel Garc√≠a M√°rquez", desc: "One Hundred Years of Solitude; magical realism"},
            {cat: "writers", name: "Jorge Luis Borges", desc: "Argentine short stories; labyrinths and libraries"},
            {cat: "writers", name: "Oscar Wilde", desc: "Dorian Gray; witty plays; imprisoned for homosexuality"},
            {cat: "writers", name: "Victor Hugo", desc: "Les Mis√©rables, Hunchback of Notre-Dame; French Romantic"},
            {cat: "writers", name: "Alexandre Dumas", desc: "Three Musketeers, Count of Monte Cristo"},
            {cat: "writers", name: "Johann Wolfgang von Goethe", desc: "Faust; German literary giant"},
            {cat: "writers", name: "Honor√© de Balzac", desc: "Human Comedy; 90+ novels depicting French society"},
            {cat: "writers", name: "Gustave Flaubert", desc: "Madame Bovary; perfectionist prose stylist"},
            {cat: "writers", name: "√âmile Zola", desc: "Naturalism; \"J'accuse\" (Dreyfus affair)"},
            {cat: "writers", name: "Anton Chekhov", desc: "Russian short stories and plays; The Cherry Orchard"},
            {cat: "writers", name: "Henrik Ibsen", desc: "A Doll's House; father of modern drama"},
            {cat: "writers", name: "Samuel Beckett", desc: "Waiting for Godot; absurdist; Nobel winner"},
            {cat: "writers", name: "Albert Camus", desc: "The Stranger; absurdism; \"one must imagine Sisyphus happy\""},
            {cat: "writers", name: "Hermann Hesse", desc: "Siddhartha, Steppenwolf; Eastern philosophy meets West"},
            {cat: "writers", name: "Thomas Mann", desc: "Magic Mountain; German Nobel winner"},
            {cat: "writers", name: "John Milton", desc: "Paradise Lost; blind poet; English epic"},
            {cat: "writers", name: "Geoffrey Chaucer", desc: "Canterbury Tales; father of English literature"},
            {cat: "writers", name: "Edgar Allan Poe", desc: "The Raven; inventor of detective fiction; mysterious death"},
            {cat: "writers", name: "Emily Dickinson", desc: "Reclusive American poet; published after death"},
            {cat: "writers", name: "Walt Whitman", desc: "Leaves of Grass; free verse; American bard"},
            {cat: "writers", name: "Lord Byron", desc: "Romantic poet; \"mad, bad, and dangerous to know\""},
            {cat: "composers", name: "Ludwig van Beethoven", desc: "9 symphonies while going deaf; bridge to Romantic era"},
            {cat: "composers", name: "Wolfgang Amadeus Mozart", desc: "Child prodigy; 600+ works; died at 35"},
            {cat: "composers", name: "Johann Sebastian Bach", desc: "Baroque master; mathematical complexity; rediscovered later"},
            {cat: "composers", name: "Fr√©d√©ric Chopin", desc: "Piano poet; Polish nationalist; died of tuberculosis at 39"},
            {cat: "composers", name: "Franz Schubert", desc: "600+ songs; symphonies; died at 31"},
            {cat: "composers", name: "Johannes Brahms", desc: "German Romantic; completed first symphony at 43"},
            {cat: "composers", name: "Richard Wagner", desc: "Massive operas; Ring Cycle; controversial legacy"},
            {cat: "composers", name: "Giuseppe Verdi", desc: "Italian opera; Rigoletto, La Traviata, Aida"},
            {cat: "composers", name: "Pyotr Tchaikovsky", desc: "Swan Lake, Nutcracker; Russian Romantic; mysterious death"},
            {cat: "composers", name: "Antonio Vivaldi", desc: "Four Seasons; Venetian priest; rediscovered 20th century"},
            {cat: "composers", name: "George Frideric Handel", desc: "Messiah (\"Hallelujah\"); German-British Baroque"},
            {cat: "composers", name: "Franz Liszt", desc: "Piano virtuoso; rock star persona; invented recital format"},
            {cat: "composers", name: "Claude Debussy", desc: "Impressionist music; Clair de Lune; new harmonies"},
            {cat: "composers", name: "Igor Stravinsky", desc: "Rite of Spring riot; revolutionized rhythm"},
            {cat: "composers", name: "Sergei Rachmaninoff", desc: "Romantic piano concertos; huge hands"},
            {cat: "composers", name: "Gustav Mahler", desc: "Epic symphonies; conducted Vienna Opera"},
            {cat: "composers", name: "Anton√≠n Dvo≈ô√°k", desc: "New World Symphony; Czech nationalist"},
            {cat: "composers", name: "Felix Mendelssohn", desc: "Child prodigy; revived Bach; Wedding March"},
            {cat: "composers", name: "Robert Schumann", desc: "Romantic; music criticism; mental illness"},
            {cat: "composers", name: "Giacomo Puccini", desc: "La Boh√®me, Tosca, Madama Butterfly; emotional operas"},
            {cat: "leaders", name: "Augustus (Octavian)", desc: "First Roman Emperor; Pax Romana; adopted son of Caesar"},
            {cat: "leaders", name: "Winston Churchill", desc: "WWII British PM; \"blood, toil, tears and sweat\""},
            {cat: "leaders", name: "Mahatma Gandhi", desc: "Indian independence through nonviolent resistance"},
            {cat: "leaders", name: "Abraham Lincoln", desc: "Freed slaves; preserved Union; assassinated"},
            {cat: "leaders", name: "George Washington", desc: "First US President; refused to be king"},
            {cat: "leaders", name: "Franklin D. Roosevelt", desc: "New Deal; WWII; only 4-term president"},
            {cat: "leaders", name: "Vladimir Lenin", desc: "Bolshevik Revolution; founded Soviet Union"},
            {cat: "leaders", name: "Joseph Stalin", desc: "Soviet dictator; industrialization; millions killed"},
            {cat: "leaders", name: "Mao Zedong", desc: "Communist China founder; Cultural Revolution; millions died"},
            {cat: "leaders", name: "Elizabeth I", desc: "Virgin Queen; defeated Spanish Armada; English Renaissance"},
            {cat: "leaders", name: "Henry VIII", desc: "6 wives; broke from Rome; Church of England founder"},
            {cat: "leaders", name: "Queen Victoria", desc: "63-year reign; British Empire at peak; Victorian Era"},
            {cat: "leaders", name: "Catherine the Great", desc: "Expanded Russian Empire; enlightened despot"},
            {cat: "leaders", name: "Peter the Great", desc: "Modernized Russia; built St. Petersburg; beard tax"},
            {cat: "leaders", name: "Louis XIV", desc: "\"Sun King\"; Versailles; \"L'√©tat, c'est moi\" (I am the state)"},
            {cat: "leaders", name: "Marie Antoinette", desc: "French queen; guillotined; never said \"let them eat cake\""},
            {cat: "leaders", name: "Cleopatra", desc: "Last pharaoh; Greek (Ptolemaic); Caesar's and Antony's lover"},
            {cat: "leaders", name: "Nero", desc: "Roman emperor; fiddled while Rome burned (myth); persecuted Christians"},
            {cat: "leaders", name: "Caligula", desc: "Insane Roman emperor; made horse a consul"},
            {cat: "leaders", name: "Constantine the Great", desc: "First Christian emperor; founded Constantinople"},
            {cat: "leaders", name: "Justinian I", desc: "Byzantine emperor; Hagia Sophia; legal code"},
            {cat: "leaders", name: "Otto von Bismarck", desc: "Unified Germany; \"Iron Chancellor\"; Realpolitik"},
            {cat: "leaders", name: "Theodore Roosevelt", desc: "Trust-buster; Rough Rider; teddy bear; Nobel Peace Prize"},
            {cat: "leaders", name: "John F. Kennedy", desc: "Camelot; Cuban Missile Crisis; assassinated in Dallas"},
            {cat: "leaders", name: "Nelson Mandela", desc: "27 years imprisoned; ended apartheid; South African president"},
            {cat: "leaders", name: "Margaret Thatcher", desc: "\"Iron Lady\"; British PM; conservative revolution"},
            {cat: "leaders", name: "Charles de Gaulle", desc: "Free French leader; Fifth Republic founder"},
            {cat: "leaders", name: "Benito Mussolini", desc: "Italian fascist dictator; made trains run on time (myth)"},
            {cat: "leaders", name: "Adolf Hitler", desc: "Nazi dictator; Holocaust; WWII; suicide in bunker"},
            {cat: "leaders", name: "Francisco Franco", desc: "Spanish dictator; won civil war; ruled until 1975"},
            {cat: "leaders", name: "Fidel Castro", desc: "Cuban Revolution; communist; 49-year rule"},
            {cat: "leaders", name: "Che Guevara", desc: "Argentine revolutionary; icon on t-shirts"},
            {cat: "leaders", name: "Deng Xiaoping", desc: "Opened China's economy; Tiananmen crackdown"},
            {cat: "leaders", name: "Mikhail Gorbachev", desc: "Glasnost, Perestroika; ended Cold War; USSR collapsed"},
            {cat: "leaders", name: "Ronald Reagan", desc: "\"Tear down this wall\"; conservative revolution; actor"},
            {cat: "leaders", name: "Joan of Arc", desc: "French peasant girl who led armies; burned as heretic; saint"},
            {cat: "religious", name: "Jesus Christ", desc: "Central figure of Christianity; crucified and resurrected"},
            {cat: "religious", name: "Muhammad", desc: "Prophet of Islam; Quran revealed; united Arabia"},
            {cat: "religious", name: "Moses", desc: "Led Israelites from Egypt; received Ten Commandments"},
            {cat: "religious", name: "Buddha (Siddhartha Gautama)", desc: "Founder of Buddhism; enlightenment; Four Noble Truths"},
            {cat: "religious", name: "Martin Luther", desc: "95 Theses; Protestant Reformation; translated Bible to German"},
            {cat: "religious", name: "Saint Paul", desc: "Spread Christianity; wrote much of New Testament"},
            {cat: "religious", name: "Saint Augustine", desc: "City of God; Confessions; shaped Christian theology"},
            {cat: "religious", name: "Saint Thomas Aquinas", desc: "Summa Theologica; merged Aristotle with Christianity"},
            {cat: "religious", name: "John Calvin", desc: "Predestination; Calvinism; Geneva theocracy"},
            {cat: "religious", name: "Saint Francis of Assisi", desc: "Founded Franciscans; talked to animals; poverty vow"},
            {cat: "religious", name: "Pope John Paul II", desc: "Polish pope; fought communism; long papacy"},
            {cat: "religious", name: "Mother Teresa", desc: "Served poor in Calcutta; Nobel Peace Prize; saint"},
            {cat: "religious", name: "Dalai Lama (14th)", desc: "Tibetan Buddhist leader; exiled; Nobel Peace Prize"},
            {cat: "religious", name: "Zoroaster", desc: "Founded Zoroastrianism; influenced Judaism, Christianity, Islam"},
            {cat: "religious", name: "Joseph Smith", desc: "Founded Mormonism; Book of Mormon; killed by mob"},
            {cat: "religious", name: "John Wesley", desc: "Founded Methodism; revival movement"},
            {cat: "religious", name: "Guru Nanak", desc: "Founded Sikhism; one God; equality"},
            {cat: "religious", name: "Maimonides", desc: "Jewish philosopher; Guide for the Perplexed"},
            {cat: "inventors", name: "Johannes Gutenberg", desc: "Printing press (~1440); enabled Reformation"},
            {cat: "inventors", name: "James Watt", desc: "Improved steam engine; Industrial Revolution"},
            {cat: "inventors", name: "Eli Whitney", desc: "Cotton gin; interchangeable parts"},
            {cat: "inventors", name: "Alexander Graham Bell", desc: "Invented telephone"},
            {cat: "inventors", name: "Wright Brothers", desc: "First powered flight (1903)"},
            {cat: "inventors", name: "Henry Ford", desc: "Assembly line; Model T; made cars affordable"},
            {cat: "inventors", name: "Thomas Edison", desc: "Lightbulb, phonograph; \"genius is 1% inspiration...\""},
            {cat: "inventors", name: "Guglielmo Marconi", desc: "Radio; transatlantic transmission"},
            {cat: "inventors", name: "John D. Rockefeller", desc: "Standard Oil; first billionaire; ruthless then philanthropic"},
            {cat: "inventors", name: "Andrew Carnegie", desc: "Steel; \"Gospel of Wealth\"; libraries everywhere"},
            {cat: "inventors", name: "J.P. Morgan", desc: "Banking titan; bailed out US government; art collector"},
            {cat: "inventors", name: "Tim Berners-Lee", desc: "Invented World Wide Web; gave it away free"},
            {cat: "inventors", name: "Walt Disney", desc: "Animation pioneer; theme parks; media empire"},
            {cat: "other", name: "Tutankhamun", desc: "Egyptian boy pharaoh; tomb discovered 1922"},
            {cat: "other", name: "Ramesses II", desc: "Egyptian pharaoh; Moses's adversary (tradition); great builder"},
            {cat: "other", name: "Nefertiti", desc: "Egyptian queen; famous bust"},
            {cat: "other", name: "Hammurabi", desc: "Babylonian king; first written law code"},
            {cat: "other", name: "Florence Nightingale", desc: "Founded modern nursing; Crimean War; \"Lady with the Lamp\""},
            {cat: "other", name: "Henri Dunant", desc: "Founded Red Cross; first Nobel Peace Prize"},
            {cat: "other", name: "Clara Barton", desc: "Founded American Red Cross"},
            {cat: "other", name: "Harriet Tubman", desc: "Underground Railroad conductor; freed ~70 slaves"},
            {cat: "other", name: "Frederick Douglass", desc: "Escaped slave; abolitionist leader; powerful orator"},
            {cat: "other", name: "Martin Luther King Jr.", desc: "Civil rights leader; \"I Have a Dream\"; assassinated"},
            {cat: "other", name: "Rosa Parks", desc: "Refused to give up bus seat; sparked Montgomery boycott"},
            {cat: "other", name: "Anne Frank", desc: "Jewish girl; Holocaust diary; died in Bergen-Belsen"},
            {cat: "other", name: "Alfred Nobel", desc: "Dynamite inventor; funded Nobel Prizes to improve legacy"},
            {cat: "other", name: "Coco Chanel", desc: "Fashion designer; little black dress; Chanel No. 5"},
            {cat: "other", name: "Marilyn Monroe", desc: "Hollywood icon; Kennedy rumors; tragic death"},
            {cat: "other", name: "Elvis Presley", desc: "\"King of Rock and Roll\"; changed popular music"}
        ];

        const categories = {
            conquerors: {name: "üó°Ô∏è Conquerors & Military", color: "#f87171"},
            explorers: {name: "üß≠ Explorers", color: "#60a5fa"},
            scientists: {name: "üî¨ Scientists", color: "#4ade80"},
            philosophers: {name: "üí≠ Philosophers", color: "#22d3ee"},
            artists: {name: "üé® Artists", color: "#c084fc"},
            writers: {name: "‚úçÔ∏è Writers", color: "#facc15"},
            composers: {name: "üéº Composers", color: "#f472b6"},
            leaders: {name: "üëë Political Leaders", color: "#fb923c"},
            religious: {name: "‚õ™ Religious Figures", color: "#a78bfa"},
            inventors: {name: "üí° Inventors & Entrepreneurs", color: "#34d399"},
            other: {name: "üåç Other Notable", color: "#94a3b8"}
        };

        let currentFilter = 'all';

        function initBrowseTab() {
            let navHtml = '<button class="cat-btn active-cat" data-cat="all">All (300)</button>';
            for (const [key, val] of Object.entries(categories)) {
                const count = allFigures.filter(f => f.cat === key).length;
                navHtml += `<button class="cat-btn" data-cat="${key}">${val.name.split(' ')[0]} (${count})</button>`;
            }
            document.getElementById('nav').innerHTML = navHtml;

            renderFigures();

            document.querySelectorAll('#nav .cat-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#nav .cat-btn').forEach(b => b.classList.remove('active-cat'));
                    btn.classList.add('active-cat');
                    currentFilter = btn.dataset.cat;
                    renderFigures();
                });
            });

            document.getElementById('search').addEventListener('input', (e) => {
                renderFigures(e.target.value.toLowerCase());
            });
        }

        function renderFigures(search = '') {
            let filtered = currentFilter === 'all' ? allFigures : allFigures.filter(f => f.cat === currentFilter);
            if (search) {
                filtered = filtered.filter(f => 
                    f.name.toLowerCase().includes(search) || 
                    f.desc.toLowerCase().includes(search)
                );
            }

            let html = '';
            let currentCat = '';
            let num = 0;

            filtered.forEach((f, idx) => {
                if (currentFilter === 'all' && f.cat !== currentCat) {
                    if (currentCat) html += '</div></div>';
                    currentCat = f.cat;
                    const catCount = filtered.filter(x => x.cat === currentCat).length;
                    html += `<div class="category"><div class="category-header">${categories[currentCat].name}<span class="category-count">${catCount}</span></div><div class="figures-grid">`;
                }

                num++;
                html += `<div class="figure-card"><div class="figure-name"><span class="figure-num">${num}.</span>${f.name}</div><div class="figure-desc">${f.desc}</div></div>`;
            });

            if (currentFilter === 'all' && currentCat) html += '</div></div>';
            if (currentFilter !== 'all') html = `<div class="figures-grid">${html}</div>`;

            document.getElementById('figuresContent').innerHTML = html || '<p style="text-align:center;color:#888;">No figures found</p>';
        }

        // Init
        loadProgressData();
        initBrowseTab();
        document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
    </script>
</body>
</html>
