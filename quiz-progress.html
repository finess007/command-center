<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c7993a2db31d82f91b8a0af91674a7ba5a11871c8f7b01bb0c847bb43bda839d9ae0a58aa6eea985476be8ea6cd1af84e915b6c0b932741036d645728b0f5c25e1ef6626962cf439c3f9296b649d2e883bde79b16e1742f8dc7d240980b699f21727732bd82c58136935c1e16e0c9f4889671cf1bf4035f0c8cc7eb16fe64ef79ed3d6ef7294767a3cb1acb5fff1a65c1e32aa4b4143b7aee1ee5991a1cd7ab2f21f9f6c81930a6a39429e40f12c12e5e8420de092e292157b7f0fa33ae24050c1178788aff7cb5ba057e438111ff3d7b96ebc80caa7078da64e976622efe9c4b3150438578f75758685ba1f9ff963a7546a84a929eb1df6c65af029d69e4adad589f63f2a16bfd9a8a96cbe163aa02d477363fc1359612dcde766fc9444431b67dc8fe62670491dc924be7659d3c7bb2bb58e9b31b0659142f13ca527e5774df874a8debd92554a1dae1c17f2a22152a00216a81b1d6983d9155bfe154eb675875c8a9553b6c0f768e37e92e23506e7130061af6eb26b1fd22ecb6c4bd4c344b4d725a7c5a80f095a40a021ce4ad57f63a540803afeef218331568b2f78f2745d0f0fd3eaecb05ba8e49110cf7ff6c0e96f5df7ee522b3009544cdaabe38ec1bb2173cd336e796464647019328368762b22ac4c08557b280285fae62e9b190e264c6fbd535205adf82eff0696452d94512f7f431b70b50ee3a46c1ac0005778d837e72547b5c37b537a4cfab3eeeba7734f8636904d0f8138ca04c75ac9767bd3afe6af50f97f1b565456d7a78779dff6f388bb70d675572922b7b82c0309d5f11613e07a36637f106ee600ed1e278d94210df0e5c97bc6c240984c04b73c1ab91f414aaaba95169622af4adaa316022b2fe3ad38edb2afb5e4167a0be0e619f617d2bffc48d72fcc7ab94dd2ae431bc5774badbc20f256043ed9c2fb5168d3cf3020071e51505d4f15d73110364f00e1b947ed072b607234ce2a27a6a01b4f557deb1a7e04593649f63294284936b38704f4173138841dd2be8b32c65b30fe9eaec3b8d44c3d769b2039d1806d3896abcb0ea8a30e255cbf2eeb65389d4421bb98a60f9db62d2c285f84e3ec4f2fb9e7161248e47ffbacced35668cc7f0c06a8e54ddcfce0d08587ad97a8a92122ccd8ad21d4db0fde74fe7359856077a3a2dff5718a1993977a3b945d7c518e2bd61dedf57f34c64bb6f061e5e484f017b1e396aa0582b1fa95ce7de0554f40dd0cbea3f704d0a7cf42b9cfebee9f9a1ed7c0947970d2ac5cc5d424d9fe90508a2baa182f250382a9d10f71628ef430a4238d57623a04eb5ce68575894079b54e9673005faf7f8b452415fd04b352709be95eee37c693eb75d5b9f44ac6eea6a738c24126bdd84737fbf59182e7fdb48cdb811dd58815c4e44896e50cb44c5596339474d45738699718ff506b920d7a94c66355f6891c9dad24dfe5f5bdce86b760c73dbc71e42043656db196b1eec9ad94ac684b36b0584675fb0f91cf1a4bc59d93be065341f233dbd6cd0a151b8974ab2dd50cef32cbdc19036afee1577313a440582cefe5a59a56efca858b24489f74cb892213682022eff84fe23a19c817ce1cd8d2d2c37801fdaf91cd074dedf3d2024f89a9b3e82eee5cc9ae694369c7e2681e23d133b58ef660c3e3bcba7631a2ead4cb4130805403138dedf7e427243d812a4c7ee3824c7b736836bd7ea624a655b985596ce165c109b4d6f38add1595f2668270014553cdbabd484c40283cac4265ab00c88c09176548f04ab920ebb174759ff6b220e649d7a88f9bf582d3adb21318ba8a60924b05c2bbc1da1220f7e3d79ab2d0a185036a3ef51ee79a81faaac890829642176394521b2d201195733e39a1a9512ea7471ec6352875b79a91c689d352a9125eaf1c00b751f8d6679e05a83794400cd524466be1c37ffad55f74bf6d66cd83ad1ac43b2731ea3594e5554e796dd2fdaff1bd6ae8c4c3f096b28cbf8c7cc1293161888880d196bc05ec2ea2b0550f037d4014ec37a21541048ce2e4ccc8179d57b0b911a2e248639ebe6689d4eeaf301b421ebd4ebf9943a5b62aab55c7674c66889d11a6191ec04edb10776cd26176ff95b3b8b11aee630c0520d624a0a40df701d40fc1337dd883520e01c28c1f0eab45a1cbdec35d5f78fadf3292fd065c23f5d91e232b0211f6ab219f3bb4b22617b85337785c57d97c1165beeea17080b124c7ae82f40c78981e10caff62da34dacf8c39367d1fb1cad339ce644c79c20960e2b17ae297c9671d68cd1a5821e0ca1d373c01c9f485070034b253617f98134e3dc092f2f2b45736209d6746d4c2aafb1741c75e65b58705250a2471824ba3ac9301525cab75760eb989a7337cba92bd22b8f4a451dd89836712f2e84bcb8165698f0ed367b65779fd4802463563b6a2f54676b4150ec2855f2457ad83b0bfc5965377f4153a7332f22313fa7df6a20df4cf235d37699a025d189812b30af38214320372765ffe9da0fe917d41e1e7163a2208382922cf77b66e71ebcaaecb76b04c613fd503eff7e4a9afead5d39425f351fff89993123ffb410abbc32b992d2b9968b87b40de7afda8855d1914e3f751d278966c4243f92a17598591c89024ff8bd39cb6a2f25518bb9ed187dd99fd6cc26023e9c21a217361ad5a279a8a4ef5e1f73b3f0b33b9f0b53648c9fffe3bf13cd92f61691ece9699075f98556d547922a9c6d2c852baf13262abeded6cc9eaa870e9212ccc38af040f8492aa6cbee185fa4a299db3acf74bacbd9b129e4257a6138f70081e8d9b4e97526acdd629d35c1ee83970d44ef5e32fdb0e3575914c3f625517d97aa5c1bb6a95f91428ea01e65a24c515197004fb5ab8828ed97585183667379c35443f08edc96ad05ac9ca7cd7f90023fddd062b9b0c32d64f92991af88d4c2e2d9be428d78c0fa8bd0f17f00a8ecfa7481917afe584765c971ae946929e227c9b679b1af350f9ccada678793bce2c7b5995ec428a686702daa2ca4ca3629a28d3c664a5eaf518a5cec0dbde9e8ffe796aef7312c9ca5b5bb6672f6b052d3ee592d841dacc9bf117da5d416e8e2dbe895777c39c0ae5c95f83d4fedb12dd7b0b852da25401f78ae8b027d1bb93edb32d8fc3ad3cf5ec50d7c8da81590ecf2002949a90800bb955c90aa00cbbb305a50596a3941d7047ca351bf41982408262bd05d584a9067cd9d46e4a7fc1e7ed1bede7ae1dadec043f7a7a9caaebcac9eec0dac52c4ae8455a968274d373e2c39987bd86d3643c36cd6b7a0317e9e84580b0b67a3e3d0482e08be7c124003ccc4ab844640aeee6b156b347fd43367b3060131e837e49659ef6dbf1f982231d54a4b010e02f8c06483dfa90a64650af3a32a7c53f91479b0dccc535a6c951e30c0bd917e9a4637e4a2f3ce529c0a9c4bb9a6f3f35cbbbf8d07c706a94c6393f57a699dacda6513c10557a2db98f0acac0fd198c8f34afe793309581c2cb9f6e72140261912178c0f7347f6adb2d6b26327e24bf0be1ac67af8aae23c1d2d4ba060b7e3354bb940614444417eb0b992babbacbdfcf7d06c6c9ac2da3e541f43769d9aff8860c2e39d8d72cdbcf42e4d9025107bc5e22d1b31197d6934023e21932fd25c52d430f657868ba9f2da603bf27b91dd227304a19a7577567d81e9fdf113e4eb22492851b1f33d125287ebb315fbafd2b76fa55c07e475b398748e1dbfcf751d3cbebb05e9cd4e5f3154891f1b9013d4c17f9bdf751e9b4c76479111b92b780a2b4a17948f1fc96956fe673adcae975f9123840ce3206be1d35764d2900046847cea40595cd2dab1d6774ccbe27d61265db45c8a29fe932f35f3611f93478fb3208fe6f63e5d309db3feeaf8b16893a2e1f5dd3b561ef502f1679a9adc7c04fc998f377b330dd07427cd00247a412e632d4c7357dbad12488e160187360e26381b5eb2a07243ebd839cb3515427565e8b2754ab763fb83622ec0c579867c8c1e1c363de77f2e44fc0d48163bc5115b51ea2f74c39a58d8263e47dae3372dce20e7cb2bc42b29bc6dae498a6f8a35c528f50177d5b51b8ea9b664e55c61a78f3b01d90499319bc69ddcb67e8cf18c4e5042ab3edf7dd000bfa2914d26a9c9390a83e5141dba7a6ec1e90b2db1d28d8f76713ef644acf5a152b2f97136305df45ee14d57cd86f0810bfb1b1d0232b8d4f5df44172831d0a219a470279a577766eebc2e0977c2f62e9bc56d23cf50176436510b78769147eb6fede31c20395988c11634fff13bcd5b03d783b6c393b81c002cdd2363d56d38543a2b4b492b65bd9199e83440a29b554ac658c03d4ecaca124d89e248aefde6cc2a0b3b09f5d4fc1c303d5f7b126b57647a546362fda493b6f12a410af1ad1b2ceeebadbbe496890ffd415c1bf07d1314648f77d4c63b81e5c54747dbbb9de9c38a02f8eb54695c2a444788c41f2660f9f9ac1a24c8a285ce50e82ea7decd07e76f2459779193a35891eb0e11296c702e228f380809c3dffcd6be59832b28e7f8457e2802348b586f80468a1a3afd692e9d9291c0c9367f807522563186149c555b5aa9465193a62f6effe237265eec8fdb31f5ad772e85d688edce54edf0ee5a9bde05b9f0f60e813371970fa2a804a5b488b04c751c901901d53449f89ac960f0c118844675ca652f30f7fc203e7729761921a98d196c6f570417e40f3bb7ed2b8b4d55864fe32402a77b1250ee1a24463a98c417b7e3bf5c7345a773928e1c7e2cf7dc68b0bcea6f21587b0f841ccbfa577a89d71a8aae9c42a09b13429a2263da70d18d1f93c1fe25754ff3b16ce3220c050ce24a1498ee4c4bc97dc2ae4dad72dfe06281171879b2948b36d211a0f7cde11f9cb5f10559be11fdc60ce60412700ab76ffd0ff02b8ae9880917b51b3aaf3254b67f21e1476103e147412b95f268c5d66d6cac0c3b48f5d4de482198b1a46bec8495d747d29aa0a2e5b9123ab9d24f28c0ab75740a6507c825637d8d51c36d2a21a81705f61b7ac19a58a0f3a6eee841808cb3ab642920bcaaf97a89b3a2745441ebcfdfc30d61732c9b64771b13174f6b49c7d582dcf5eebae631bb5e3f7a68afd2a8a9a1f83d315e42a31363e6aa59a5207cff3b36894978a64f090142a3efcf35329e3d873d60129a5634b80607a1f82ab69ea376ed06e6b1a6442674b9d4f64578073284838f7b424283d31c0faaa91ed133e30ec12b99f3c0e1300c5638dc63f9ebba2b8aeaf51543bf631e6e2c92fd021c41e65f045cbb66f802526c3fe04ecb75a3c336c1ce964a4393aea193d34a21ea5ab703696a920d53ee320647469c76cb44096639163e6d976086df593da866f8096d6942c3c641696ee1cd6506e10c24e99600943ea73bcb700192c44f397e236c87803bcb1611d8691e226de2c58ea1fe933c676ea9d1a4a59af7002fd9f127cd7d942a036ad6ed129fc9208ed97ece5e44e2652f55d5b1d0a690951246bdd8620e064391cd9d60d8124f397da4d34760a4b3eb0e1cd452ff0670e52bb584f0d838b8f5bb65d4c299219af14252ff28f6895935547b3a9a829d3c0d10d8cea7bf1aec42c4394e46da5b39e60a3d8bc5c9855cf8b15f251b8355ea8e3578ab97d6d101c550e8f1379a707775341c4b0cc5fb1505e34670cf45842849ce02ca28acfcff86f1af170ed785a3558987242fff4d72d059f662f275eb76a1f05c7fa92a027e7f9e0d63883999f39e2fcc7d070b1993dd3b873058d4b7bb4a01bf3d319fe82fd7d44e44a26e7d6f361e6beec3a688e0d692f847528ed0bf9cd5daa50e6e89d378a4cc09383203011ceb2c594c151e8bc835f87d74a91e594f1a44b458587da26998130954ed13278d060caec9fec962814811b98a6ab74a3e0ad4f7d7dc9db5052a3e6afd12ba3c9e40b177791439b5393ebc69037124f555c4e8d9e20e05b3fa49dbbcf0939ed4b9be5de2be9bb0b6b137335fd8eac33e85dcb9984f0989ff7cd1d92d08cd978425f42440387aba74ad8a1c0cd36e02d129fd355aaebc8899ba2c6be3f17ff72a4514eef75c31a075131c6ffc358d853595115484b56350d96f1bc8a57af029db399114789c25918c98b1ae411bef50907a9d01dbfee3f920fe34d63dc97a0d5153c80d2ec54c9fcb81a03c8619e4997ee5a744862f6f1c3ae3108bd167019be6cd77aed30ba03ad8716e39eadc3b3cba0ad6feaa620a92eabc1fd9702fad168404334d7a5710e5919c5409a764951ca15de4d1c8bb1393327d4e3162185fe1c51a8c4d81bb5017a28204281a261c69f5946758bc39c115f59054e8afbbd8c17caf26d7fe19a9ee541e79d4e3c86f4480487c0a851e8b9caaba403303aa8dfdb8f7ebab671d5ccb4f1e21531914db1ec0de129294f45cf935fd2c1b2b34ddd12550057d3047c759aff83ce091241def8ca272587b527525669fa0d21182396640b334d0cb04da5351007b204b516c28133c0f8d7202bec1acc2322b157598e6575e6f6abed22a4e195dce8cb982213b95389d405c2fdaea8b7bd3dcd6cf137b85b231cda34b580411a62a4bcc02bcc5add520429d4e6f1a8561dae841aa9415f842ced21364e91ba2c90b9a939fcd5eb4d10e8e6441e44728f9557e51be5ad4270dd1c4f278d41e9295e5986821ab7d5b9ce5c47b8d266cab66bd81b181748ae05737ca7a5f1fef545593f1dd75451d3b3c7e073deec0be7e96a801d0f8dfba8556018c5b8ab9d59a0655d43882629225cdc50daf7e6bb30872a2cef662dccc30e7ace4789bf870ed322e2dbecb2d54a19f9ca1e29c13cf171032f53c2d6f6fa8e9271f23b2b3653de007163e9053a1169f64e2c54a8ebdae49120700814839d62799562c1cfe28206ffbd1f9d0ea55d987df41deaac8fbc13f6361c2d91a14a13776c55f296f5d2e457630fe4243870dcc9a0c280d5366cb899939dc02b9096de08002e00cba9069d3cf9ea6dd32d779ab6483d2d47a8d1c6280d13a360ade3fcc97a6f933d1596066f84c217c43a2eba0ba3378948356261edfa3d290e59b8c998247b4638d8d8ca1b354b93f612745a2a5549ef9812e88c4305db0acaea468dc0246bc9fc35df0aaf0a45fd39a3e0ea7c526d34410ec7bc972fbea6e06d81537a0ac120fead5f1a70b5b05185f5221e5c8eee0df08c5652921854726b4c5b912c537f3fb938220b510ae6c8feac0eafb894893c6eb08ff5f15b2d1f661c053f186defd09afa03bd5e51cc5d21fa053dbc97f37df8eed29a849b66d5ab8bb6b81db97d9ab704c00f47bb01437e4892442841c6f151e0a3ffa4fd9fcd2851cdc54213c8f13d45ee873d49390d6dda161ede1e716b10aa2a3ec0fda598d9b81920034d122fcc766d7e99f260660ca500b23c1c22c2863ea18b7fa5f6f9915a2de3b1182e3400a4da0934510364e572b1a10ae0c74306b2a17af0b9bd4381e64962d991126e02cb73a75f05ac0c70ca765b234a714ab379f655d246144f798a771ec9bce866cb1f4bd86d0e2fd2c8bbca48df50f3deffe14d6e39924f6958d78f77eecbe7debf7a7b03a5fd9b61506ae0584d646716dd74ea27e5abb20f27eef40b389bf40b7b0832b040e2fd31151ffd44a52a36679dd2448d38a3f4dad1bb4be1afb83d2614cdd8e1904c73c4a4f615c68a0bdcb01ce33e336fd1f73018f466e8b83c214c7b86dca4ca1c93f14e2a356755fd677b9c8dac454a4b0f3b19719bce35fb4fb363d2199109bef50d76a25c44bd1700c1cb82e1972fd5657e9ad24c18b7e65485ceba55ab24662b84c6a378e556c43610efc948d31c2e37e4980254f67a09c9e4c58fec9f369d6ec547b67a051ba25765be4443bba25e36af0f8c3f875115da55803d687c66be41872633bfc13c0fc2070253b7d1f9946756d30a70119f42049eadcff937e30327ee527def070cb5a1f3f88e2e3754801d70d3505c69283ae39e28261e7ba3644faaa7cb3b24d95f8d9c1edaf838d0509ab779b1f1732a864b9ba82b93fb4e908916f8e38cb2159fca034eb618a4b655d955d8bbc83a41cf79827ced7cde5812b8ea79ff167b2b54ef98d3d2eb1f29a98796b4e6971351507b62b43c6bb9bb29636125a262b22c97d9a3d10c5dcd2abc9e79f6acb20661228f0a1e124a44359fe8bc3a3f0f21d9886cc49cafc88ccc7dfebde9eede47eda092589a4a25565e6140c81014e73992d90c102c71eb543669ba65c7cdda1642f1fd8e896bfd18f7c10b19cb585b45c6a5215a5ccc0bf177ac484a72085bef27053673fd6f4add2e59ef97deb73f7012cd81d34228e96eba179b0b653f9a7e66052ad15e87d06498a497ee00a0af90243716ab03c46ff8c4e18351df0215fa1c6edce926ec52efdb5b982269fc1115ad80f7ae3cccede8090dede4f324998e767880cd1be14ea76015be500e235158596ad4595648b12d6df29b967359992fca7d265fa2c5dc8a3a2079b289c1e4b72df8c413fd4d1c617a1eacf831e1d78c8d6f604c061d44502da46a5bc7cc2beef08147d307c8d2331bd9a9b24775314b8e3c59d7f3471ee87f9777dd73c5a7ede2ea717703c409b396f018a9dfd52ad1b480f2bb644d0eb28adffa6946a423a11c52f754e5b38e6360d3f4a20ca0dc99e052dabd664beccdf631e54f786a8b42de0592bccf8411dbed74fe9ee43f412658b3f0d928ffd826013ef9f28fc87fc7e3e91e745a68b28a911b8ed101feb2648ee61e953da80f024a250ae9f9e1b5824c11002e064a8f2984663969d5e9f98b411582a1066171f0f68564c83791cae8ffe4a336e3f4c218e48b96feef7ebbcffca856cc3dbc883fde90866a7a7341108e18c20d2b7d4b369bc17ee5bd62a192c38af9e030a2791853ee54bec42c92595dc297b260141a74ed84033b8f05e9fd58d2ca088a557c76625fb986e65dd6d2bfd4173c6c1ebaeaaab55454516738477fc80b5dca5f4415023c268ac33f6b629da06a6017c17188aff4a37b86dda6e832e228a4af376f4d106b62c8429939f2041ddd2350435342a8cfb2f02a9b5aec4b7cf13d9be5593b7519232a36e73398a950eb0a65736d9bd29f8a8f71661c9804cd462ff20772b72b1bcec4b94e2018fff80b036ada85dfdb9dcb27c99c253ff5da390015223ee0f6a1e1b5f5802de1111b9ed145d2eb81f5240583991cd49f09f0ad652a8f08ff73141b251e5ba43ab624387d056ff972d93469634bd70794c27ac89fd4fe8a33f18d49794285ca5140b4fb5a484e03d627d037158e8d87d7fa5783dff1207169d71e404059e6eef256df9a455089f67ac72c01c05beb4bd1a5d40ed9888a961f56fceed4f8d3770bd327b8841a7af2936c30a80f36e718e6aef61aef016107e67524f30aa001538345cbd55c15e98a334416655fa261cb110aba3140b721d7d52f60900f4516500bd6f818131c920b85fcc6689b0c34725b83335e1408af9f66fee2078c044325eab82098b0b3d6dd6d72c5b92e09735c9db359edc94fc3914e2bf4ae5002397f887df8773ebe266a961573229c8d43a68145811932b4e58bb1a3f1cbdc662a4658b95f02942cd0e439b62700ce40ba8d0122a2e8e890b201940a59cd4afd35f982c1d5e542a51e65b2170c1be7f957178831d2ef0aab00eaa960bb7b68e3006964a2b102f0e4bee7084f05f01babc95b8e24fcd881b950281a8e86e5cef0362e9906cb26e0c783abb8a3e42b1665700827309b8abd2318b69ebcddeb53d296ad0e34d76d1c8aaf4a3594befbc04775135f3d86a546e2f7618f1ef1f1203e4f7a8cd4120aa4b95dca01939e57db9df8ecdc208500c80a8d3edd8b09d0ab6281154bd85315aca455b628bc3d8f761fe7871658f2acbe6185a7ad9b5219ddd6fd3c7c540a3a5006e5e88f6422c29f034b698c18d472bd85ace2aaeb2213ceecc5b8162987ae7c25d5808ef2f4bbc1bf1a2e578fffcee194f3a74a883369f7b7b8f80eca965a41ca1371b02fd35f87e4b7a329a8e76d5fa7ba3395a70f0c036f351207fc639885688edd3a314fd2f358c9c5825828d5b98f902a022235afa1e411135e88e0c0d5f75b55d6225203b53b9e0a4306ef505f93f657ca2a448758f7808fa83c1daf4b28e94ba750958f9fd31b8d2aa5155b4e063a1683a63ade3c2b5e93289dd36a99547a961832506b9c171fb3070dd4ac74a080a7decfa5a1c77030c6064a773b82fea7fb5e6a1ec84ed968d339d06fd0cdd94efc2403b4f55cbc446c8702d044b9acd84872b409c0e41e045cb4ba9ba0d4ad53835ce632719a689ac5f9b1a343acb4f43cc6ec87295e9e0410d249e560181f4dfd5cfd762b3b9563001200ffce7fea271df54c0226f307ff8b1aad5007b1df2c20b4016afb3df10b0e3bedb5f8101eec65fd5ba7d4f602934b3e384424883054a806137fb685ad66055946d55bf022ac7e71367e03cc4b9623f3b82e6083e543c32ef81d467413c104e85e0113ea32a8be1e9768dee495b792af6cf110a71f6a363a4c18fbd23d50537fe0f58585f1715df60ea91920594e8949e2e73deec48e0c05b1f8cea3f9c2adebffc3c3cd2f0da2b84185a77ab0f183f2874fb7659ab922c4fa17c7cb57c8c91de2793a80f1bf3bd9dd0b75dd8ecb5f5175153ddcb0572cb25c5021d51397803397a8edefad6865e4880f448e961e203671e03dc01c6a8b8cc3c5485e11e78e6f277912c821c7a8eda72d6dc6cdb4fcfd045df35b7125f40a12333d30b73ce43055fe81dec917fce64250c686c192aed2263b7179fd6c0b82466c4ace4796db4c6c2a463a5a445519e4ba69718048794cb2303e52c6d6f9831c1a7f703ab04acf9dca726c686d090ee8ddd3f7f48f6540278346b2180c10e296570275982a21391e4055d17a9877301bb2394bd11b35e488c828ca9bdab54176c6e7c1938bfddc337cbd471caef052f19eb9c52509350c5e3c1779a59d5a51c2ad1798f9b57040629bf2a6a786c4f5485fe4712dbf28cce81b7a74e749dbafe65782a98223ccc5dbc6087e9d239ae264e18bbb4b9f3e0279b1b970d3000ae52e150e00720846a35b7a2bbceb83cfe46b033ad54d964ef7461ed236a199c9f4f312110b8b09d938031e4ad4b49eaeede50ea32edd369a635880e777d131b31235d4f3b94afe957a26635aa2ef2ce65322c2f76809d19fb979195ebb4487baf37e5af889d194be7233c4898aeb7ce685b85be2a83fcb5b060caf4becbc94c81ce412061ae0f49f4a938ba86447e1c7c5618e21ca7a31cc51c3580202f0d708d20770746762bce5086dfa9072ff7addbda63be170fd0b0d27cd1b1a18cd2cf826b4cb8784975221a35af61cbfb8290fb6d73eef1a8033a51b9ebc900a532f0c30208f547036a34a2e2e576ac7e0ece8cc159b694ad8f409209a028fb5b36d082b68842c541cfc71c5f826f82798505b46166478b238d9f64b419aa363d5388b4317d9a8a1d6834451a04a47f2d38bacad2d7f9e5437b0af542b895ee9a2cc5dee057df710bb9563ddf19e25de85d09acc5e768acb20ffe508c6b6222de204bd947845637f716283206bc02e224ee96ba6812f226e1bb2b38935026c70fd6b05ff9614ea01701bf1b83a84d1a36083c3e6ed5d23ab93f1688a971be8f681a896e395b52192da2de0776268dc734522b7e199f2beee84f5d348b4ccca3c71772933d887051b3c272a3a8ebe9e952c9625dba7f180f615c4a450f37e3277bb34280b4099f980fa676510fcac84130aa039c3835fe7a8b13ddfb1bd672e435cf31c498863645a06250780f0ba9e264eb5d61cc16952647d3cad499b7331a7f6a3dcd7526a29aff183c9071ec6b471d50d78582ee23476684609f9e283c3fd00fa28ddf14a9dea587a5b2c95c447119a669e1fbcb4956674cf63c53824077ad87834018a7548ab83a9e515f5cc2d562b1845938639c17b02a0995b626453a1f6e0a9e8b09969f6da7da433f15ed39725f77be6b99de85c4f9b861e1a4a5516228c270124d9a09a6ec60e50d5e9d64dd3d9c8a32be6984c02861a8cca2450f2aaff7b0c80be234e4a6c1857471150774d3fd9e90ec8cbb2cb5752e9445c6c8ef7d419100d1cbe914e525cae9175667bb1ccbe86a1c2a56f375d02bf19c36ae9cb5e6c7a61756008cac8d95bb27cfc9badbd7d868818a783fa4249d8c9cc07a4885f40069a576079db2322ea923528fa5bde7c5de633ad96d72831f9043eabd07f4502ca81f54aaba9586ad94f0e9f223ace37db676bce64da8d80f46f4c2f0e8d0f15109d0315fb321611a908178a3c9d890396919b0dbd0cca891ac826d9b7a29943bd619c03961faa38845ccb53b9f8ba60c84b90bcc4f882a4c266f3ddcd76b4bf3a292b5c96abee4169b090087702359410afd41fb4f2e1a5c13d4c1480418aec4538e5af6e27c39412ab23c21c3ea96b309a57ff268b0987d415143337f0ab7a613db069575a887f7b1a302d3d749a0e00c8c1b52e5c93419e11507c8a7c613a42d75b799d4ca09b261d66f5b8c10616cf9c035f37cbc525c7a77f5ec068db0faee3a48dc8db82ab54da8c29496a07db63bde107bd0f8c3df2e3ea167bff3c14c9d3eb6ba908122f4faac2f329a0c06ec7d50bdea124c6c6e69646f3c3a5eb88d9698b8d281389330f00a7c01bc6df6dc160a57f6c2cdabbd0d5659b949e55c945f99bfa4d24a9d16f29ed2d224a302fc45fc586287298047f251814fc49fb937e6008e51a2a24cb027e0221a65ac9504d97bf6472203c9ed0dad08211068268fa52653420a05c924af6c58966b602aec0c1b253355b3d08eb90fb47e39294e0017d63a8d44883125de7d527e5dd844dc5a5b1fd19c9a4c5ae248e99eca4875f2ee5aa6cb0a72d6c4b788cc9fa56fee9df63235803aa82a61664dda09957475d810f0921f199621f4ad0c5b245aba7ed387faec2f9759d8bba8edebb8815f7efc494e555ae911001e0d1c2d18017b436ec901cb4f4dccf3782aef2b3dae34a61d6a436c10efba67ee30f3586f18f2cc924de83b1b56d02f89fec6ad5b980c24fcd08e208a324166d380b7c9c71a3d37dcf77b9f4fde6f61ab2500b1956cdd4c4b157ae4042d57ebd133f6182aa9f2527f5a2368cfc0d18e244ab72290196089d662657313213e17146d3e601cca812f85303763ce810972b19f10b16a6704af91cdea50f529ff2a3899b2c8df1865466b10c5789634517ff8a95cb05c9ec055d146f817fe6480c0ca26436cf4a5e946538f6ae9334b057ef863c486c60080a437afb4542a1432df5987e9cd94c7498ac872db9b46bdbf6257102fdb47028f9e8eaae3b2cdc63d93b4241893abd7e5729b691835eb2def94a9223cf2918d1b1d1d321bf7193fa46a55c83bb3e13ef92764624396a1d8bf4a574a1991290062e2d3c477b9174c808d637984a2bfc22fe7d4bb3a6441535ffcd3fb12ebd1bdf87ced1771e84378296a14c89b9c764f19677ecb0970ac930be90163349bbe5c693b884637b2a01b52294216236077ad2d3d07b96691b3c5b55b0d444377b83c99fc1cb0f47be47d7e6f302b54e3c4a4330e6d5b9453828fd00dae017e57b5386a7b914c73b7520487d9c6759b53cdf0a29f5fefdc970c294ab30872695607567f37ee074db851e78a73af1b42193f8acb325690eefc9bb99f04c6342f789941e5a73d91ea8f2576c603aa3f7121f0a93d601f65e80e572c24d2498dd6e3fb56a5d4c641cda5342a62223f46bb8762c6f472e0f16012d957e5b8dfef20d484285eaa99dfc7d5e3448d21af74a620f61c79dcdf7a25a7b764e273a4dc5de31bbdd582ed946c090836d2fbb8dab662ae33a92c0e552caecf96903f0b297220641d2d0a253427779b68a50c174481fb020b80de8b17c52e4d628ba92217767040481ac08e246f53ec7db20e69827dd8fbea0885827dbc8263a01d15bb99961df8a16375abf3ca292acce54622f24b2ae4bf336b6623e63df104c6fe45d459c316a89f1caa0b7ae1982fc580a98fbd37df831682c6222bf68e8b22f8895c6225eb42b319053acc29e70b7af3c882ba764265fab87ad0b0b1c3ff2f11a7906498069cc2b979f68760780bb79bc19f1f66b7e118a40d512fd7af24b2287787c06c5ad1d6401f28d81fd57d44631f526c8fca96f93b158407e9026e937ce20f054c1959c3e94419415ab02153a19af45bbba382ed3315d41d83845dbd2f7746bfdbd5a662db52376a966cf07ff03fbe937e4e5d15c9c59d2f181700d1904e8eb55082969b191ef1e9c60a8f483deb72bc92fccf85b6c1245b91f76a30b110c01bef564a5556e973392abb4f02fefbab55344fa21c6e31e64b482c034e0a6f1605a1a2853945b8014fe214cb233a02a7fb6c3dc1584cd9475f11a820a2362ecf0e39c64eb60290a6bafaf326014ebae086e614021a96146b7c3692a5ef57c27b64be48ae7f8eca437c626cd7641da8b74a97d04b401e820ce63bcf8049f2eebda1201245b4d8f7434b8d6f9203213473129f35071f8002976592f41f22f4eeef165b55593aa66b92392580277bbb6a34fc595effe713a3b13d826c5d0df9b8cd9c55eb1b3aaff76764d4bed52828bb4018313ab81f68cfe16692b6361bd62f0f7325c3f3487ce7db13808c473d3ea9f30a2a6e0fad3c902e31c57139cb7af43a4fd77704b4474cfdb2cfc5f44b68d4cb2ae2fe411fae6c610e7c20534a25d988d6da85df5caa2cac4c07be150f8584b315f548335e391d8c0cd2aff58260d5398cfe8fc8b832bb13d0c1036e05b2d2049262256ff7c757dfbcec8c35cc78cb2b3abd71cb5bcfe485df24d300d235b940605c2804be29dea726bf5a1d7a2b48c333e8e1d885c26f271f0e74f373a99f58429485fed15c1ad07a749df186c1dc0b264b49a83d154b6f8884d1bad36d308f1aec7a025354ab5a5f943249410ed52ca33dded76f89a452145029511ae3cacbc960f8bf64143ecc2d3ffeb008c2b742798b69881f20e5e1d2c53eef456b6519f84dd2eef8b028b18a3269be922f89723a80c7b2edbfe07f884b0e417d05b9106fb4c938c2a66fe7c6f23912531f13adf1fcb8cafb3976b3765b78611e0131395c4e080a08c9c52aedcd1e4a4dbbd637d8211891e6a024c32cbf947a857b8192bd4e394eb61740bed4b2cb2e2092497490a58abc9a30b13a9bf74b3c94d30648fa55d1bb28573a199d71ad96c1d0259cd55e131f345f9fd09520d73539f0775f00fadaabe35eab12a9240a00c14863942d9d6bcb8df892476c9dc94ef298a61e17597e62e2b28b08639f06eb21c8187ce9ac425fc384280d2dcdf3002351b21abe7c72a3e01cc9607c953073b4eb6345a8801fa872894f6b27bee66bc287d348ed69be7ba96eedc8c29a319846058da065514f930ddec299db2772097049143a63663461c2661a913bbfd212c0a83a720708b03e6951fee67ca32baf9cc6f445cedb66e58347b3e44b6fe75077f8641b53e8c15cad8aa7511b05556f51e8615eba1ba3198e96d77a1a358f2a38d867a412e5758d19debeab7a9ba3c81420e52e2cc0b0d9efefcdd0530756ae103b9595df4c2e98e8bca33d6375cca4ec194683ff44294f9a83a23321d7fa4615809b1e21686143e05a324ae976f4eb5b6d57d508e594a0b4d06cc0864fa3477430d8f40bb12757ebc3be057ec4cfe5858a3ea295e802e5ae3e6b8b22191c4bc5f345ec8af689e1c75ad846b17075ba61539408950ce2acecb0b351d9e5e964c015d88a3b3b4e2ba0103e0465908325d5404799658aeafa3876ec4036947711715eb96f87465a5ce20df31d6d5d8d3ea65282794da67b3fea414fce2106582fc6d951a3254a4c8cc34a424e2bc052b60f869975b8cb2671d92fd54bf9ecfd06314ff4019fee1337d1d1fdc7d0f48221a2355ee3de39b22764e0a238bf00f67bab879688d1e18bda4c4156747a00fe91844ef7b92046784870a65f2a1d33d8fe9d518ccde43a9d3c24943c515c596758edcf6d7338e054cb470884220e55a6f783a91a7c691d914ee437026c1506877a8242dab076ef13f3e46d12596b21835db788ebcce6edb2986ca5d5a584fa5c140c6d4fb7bde5b64c952309ce9d44ff7e096dd9fbbc3269912642dbca0354c9e14dafd238a4fbcd70421cc662fc5a74d7b66692b85aa0000c984bdc81177244e62310f4bed70cde497fd2f86a44788de95ed5c8769cc65af6a001cb770b059c1d24330b97db696404a38a190aacb54484ef9bb365a1605e1e36fab947606873dae99228c13dbd2b43f11fb72f21052eae89464833ff59c5934cb16b15f9dd8dc18e178018f07338a22c36d7a8acb32dd1198d75aa7bf871a1b6e83abe8b28bc6d0263b6967ca113c4033a6ded1d921fa263fc66b391ee8657300fa082d8593b99d8916c6e3c2fba6225ec5c5505c75269f2172878e9228ce4dcc8efc48a592734d0b91cfbdc0a1ec8e5ac0693de1b85abb9e42404778a0d162dce9de19700a8df2814420376325959a2c444a11983a27cb99006b593be06833bb1a6e436961ff80e71e39798484df66a3b00bb0a9b1aa079bdf8e68111de39033878fac8bc4baea96750ef9dd6e8d563d3be9ef603d8a7ff8c88e458f381f3ea2ca2339979e3bed24b2338e1b4253ffb5eedf1352ada492343c97f96e6916270172e736b112b55cbe43b1578ac3e8ebdda46a8b647e58d6c846ec2119ed04f2f237087ec57f75c1ac25d0941ea112c2d93260e64931a5fec8680803bc272bd7fed739ca88934c00c73a3fdb282f9114223ccccf3f667f4256ba641ce0c1d09f061639427612692bd9de6aaee5d9ddb003ee26711a377ef31142e5176cc6fbad0949f0353c6204d382c373cb4307b59a1f3466473d74cef82f19db3ea8a949eaa7c79d1927a2ea53043b2dd79a8c3e5885299cb485758484fb52dd6bbfefeb1eae3f6ae243f95eb7263c8298412377c02ce821893382ada7efc1a92cb07652969f2371dfdbf50cc640494dc820fbe3c81fb3a5beaf16ff54e725401d4f99a96e3d1da7255154073c00b87872aab3af1698e0fad58af99977cc57f52fa7591e001a4e660d9e1bc3b91b3b511c173b0755e9828663106c698fbeca1d2422fa3257dcf5d0782844a1219392b6c942cb90bd144ecbc80b583c6d451b5b08b41f4c1f571c88a3978edf745a9777654cd5ba5784f43546038ed996dc9b2e9357c26d3ef555da15b2734d698e72afeffbe2bdc073f087150dcc79f89dd924bc3caa467d4c49981a0361ed561b048ae696043acec202373fc022bcd5a656df73cb4b4530f2f50d5261e30b2fd537e2b6cc8535a6a55857d6233f4763e3c7ba964c43d2cf1327c76c143f6a3b631fbbff5f743a4aecb1add46f27e8678808f79d6a2f6664f3257c489e9a17d44fdb6e1d9b1e8c503a1cc3c3dfe2f4f91399ef5e8ad99c03127d438df5ebdae64a0139135c82d1483143234a3407af32f045985fd207b72ded86fbf5c61364ba5f386a0c8db0827389d527f0e037614684b11cf7bd5117925e0a7053646323edf217075eec60d644580c144eca6f222cdf16fd54022120ec2bfb01246aa53fac32c1dbb957cfaf104ed75400a1c6b39d30247361ad400f606173a5e63647ce3bbc97e32a8c67cefbe89ec3b206d95914280b8482f597dff3bc296c2e307a7ffdd00df30619f88fd7ab51b38837b1fa584d99b5303ad48b08ba3ee20cf714aa144407f9ec351f6ed76be35eb2f93c45ba15c2ea70a6f47d440eaca36a2914e78a2095919184060ba4b8a9ea1ccd764abbfc3c83857a90bb436d56795eb49a3055ba879e42e530dff201c0eb92880c2ec1eac3fcc236d69c3111fe417616c43065e16295232fed5f5f20c839d2f170f2ac7691d62667ce0f523d0e0e5c53798d827953c03ca739f71ea6f8560e4792144251d3bfde29dd6a581a8e68582f7f87c24ae6c56b214924d23287b26e8b0d3d683931a2c1c7bbb72bad711c0daefe30f4a5f51534224a8697b274ef37e3feb5d59567fe7136a0f53c1244311bf93963dbfcec71b1cbf1c38193c43acc177e001c0034870e37cafb0d17313fe0e0566c703542722e270aa8e92143a762df161a61417a7c3863c29b2ed484c7e9e39f6dd0ceb585a4689134d893b04f560f36be3144220c3f952eaad01f4781846a7abe5a6619d62c7351008790eeaf2ea8f576b9377ccc9fc90c64f5f1d56bcff6493be5dafa8d7922cc41c7eade0f49d4c4fcc555f166454135815dbd19555958f0dc66c7592ef03f9ef729427a78eec79e9af0b41016e5ed31c4deef68495e6eaa5472a0be67fd6e78e025ea0588f896f09718060a53d10bbc5adddd16c1aa510a8d3425fc4a91cf7e63e11a026b0666424f67de1ef69f46e036dc8e5028278df31adda2ab010a5671acb83f18b0f0d9c502cbae888b993c601a7491fbf5454a80bf1c037765b7ff1caaa383071da138f46cc2f12b8f7902f2ec3c03cb713453325936cb77293de47095be7e5e159e5d4e1c696d6ec6b3096b51a8bd0fa07b46fdd36d03e4a74a6546efea4815b4a819a33ec98d3d90df5b39166a129eb69dd5bf7798da74d6d63b58e897ba17446fbf3490cf23c27d5dce0602b7fd90492c560462d93a06c07dd78d217381f65537e0465ec1b10d709956135368628653b4f056e573772509e513317a670d03d9e56182f76172512e9547ca68f0e5bc717c544dc149158d9959fa9a932e517a86d92abdfbdf789fd914bcde90c5bbfa236a09090a208ee5421cd9fbe69021faf5d95ce652528220c795dc8f9b27318c24e72a6261b05b961d8dfabea702c5c7498282980ce85c8581a6f86b5bba21e1bfe61babea7f514305c71d3e18e9fae9c01aedb3be03b9a4ad031fae709afc26968c8eafab89307eaaa5a113c3d92b1690c781e71d067f7055e4cb73dac4de1c6fc5590e4df62e73667dbc11135f0f0b4d90b25c49f56b7e7c7a723f9439cfe36d0a5c309521d195e90dd5e1e50cd25aca463d309f12092e97d35a9a3aefa4c3273f3af3e71f6296bdc27c0c356e69","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
