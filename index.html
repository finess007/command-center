<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"65f5f96507ac07585a8f58c78ea7d6bfd38a5c6645432e88ee44b7c19bd16e98afedbfd520a367f22ea09316cb7cb833be46e7503370e7911c0f25e95851b3cb2424c7f817748c0049cce4148b909afd22f8f45d808e140b879d0c4a7cf9ad9861663fb87bb2d3821ebafb5b55c7773358248fc4df6d7eaa98dc9790d7dcfc52648c367095f84d84af5fec648ae36214f28dfc63755be91c3aaf7369a88684f036af424cfa73f32c90688369a21bf8cd2250568f6445ab9fe5750f1e065ef58578d524b0a6ab191b7dd613f5be8678e8fe12c0b1b4b85ab3f0762b54fa60270b998e776ac04aa31aacb84d03acc2a456b2b704ecdf9b62bc890ffd823953493e0fd4d7c6a41707f1f8528b0385aada73729b434b87cb1cb1705d703df9e6926af3bb40f565984a2a822742468fc5e8147d460add9be32b461911f8c5e0553a71d29459a021f5eec08efb59fffd45339cdd1903fa127b3bed0b2b3950db2d7996a1a785cc44d5256484fd55f64e515cf411cb5bebccdd75eb8553a25e0e5dda434a0a560511e0a00ee340b4d06f7745afdbb87a8d3a42e1e802267c550de5127677f02cdb110f83f04f4da2af2de6428f158d08137326f1c43c386ec7690ec4856e4c2528a866c5fcd88e0a6da1932fb125961beeac909e6ee3a58f1617b27914f8ec528b2439f8a1e42304628dd5f8e3fa5c83200926e65e8828d419e9700e725df6714a6ce80e17db47d644e9ffb4a470a2498be7e68863cfc8aa5946ed5639490ae88c0baa58c7ede4479a631df164898309f7290ed752dcdab81fcff63dc84cfc2c29238f54dd5ab4c8171e797de9b9579970244d3f5f1d5a90e4830e616e52c23e184614e8b59bfef2446520b75c2ad7b102d357525fe002801c3c8e79045b5c68930f10e8344eb66e3f6f5e85669f12e4a1d75c2c01b677a74c92fd1f5f22b7486938085093a7d7f9bab358d43b92952a660f9e4850848304f90d35787b033e5fcf64ac0af82ecc172d25e2a13800f8151bdbeff8e148e8d5d3b8fdc2f05f866e9610a1889676c3e25259b1c3a3222892555cd03fa2e2808ed06fefbfa8fb22643533602cf84723544cb40227ceda984fe2f512918e4e384510f3e04358ecef65cd6ab6eb1280477c146cf03d4ae253fdf4b9064517032ea28ae0ec81d099bf875dc7477c2648117e821b59fb2d48bcbf3912fe4827886431bbad2c642b9db83c0c387e33a01bc9d85fc7fbd805c31ab63621fc886ecc4da25b3033a7e041302e4cf241705bab7e85a0914a7d2f8067b7096434a5b4f9a10c4ac46348494eef7940597b3f40c0a87893c530f6ebb497ce6aceb4f76e5283ee46101f66e7f37c51ec0b1b74395862c015ddbe42a19c4957fa07fca93ba4136616579742091ce8a2b6c60ee1db789b0a631b28c0ec0273ba5a1952b118ebdffd87eb96f95f7a84bc2f7060dde021e7e55521b058799375c144f226e8ee844840a0b45e5b0fd5de110c8d7824e4c43a05fd8cb6533f06e11ef80ac0fd51ff61b32445845a4d1a4e5319e0d8de282e335c6850cab6bc4148484b7afc719c0b5eec010e5a5842f291a1fbed6a82a618ddb8c0b7270e46dd5ae73da59d9aa0f516f3fffd3c16041077829b71741742fb7f5f73eab33780275fc6c874ee520f32c224b2ced28f13607a9fb3237083324a82c4bdfa0d96736f35b9c04026c9efb20965ea9a74a9973134e96d6a9c00a3895e12f11bd579f173f9c5534c9922a9356e821535c855d6b9c9309deaad3e0f95a35d01beffe5ae1fd7c01dc3ef5fe95bd4faec8a079b1b4fcd27c32f22b40928b9174e3e871b8330cd08807cdc4e23ebfe2ab735a92a03a02290c0c380c3a57293d2ade50038aafd173e76ba2c51d9c06bb037dd89a606b3e8c60cf04c2a55f0f41cdc90d52ce45493cb2203f560a6f740965b30fe65ed4112a0169cb758ada1e9cd34cac98346f32a772e07c1b395a6b5a02a3d1861b75d6ea0cecdbd0749c81cc584f5982d8ccc85661268b3aade1a0c70cf5685403ed358201416d0ad1a3ad7eda3cba19ac929ade63bbbfcd3f07b1ba829fc00510e5de4869e10f46e23fc48838468055805331460c71db9b504a1f0592bd61b4e31f49df42317fa9bf1608abfa74edc775400a118366c4d962bcf81535da19159c65842a0f2e6c0690b86853cc87e5b76c0416b5c6b41854f2ebec2f607cb357c42955bc7530e47c849ebf66cad11cacfde8c80309133cb024dd57cd3e551fc0c1c9f59a619f7991f967b7bf8b4944a463266106b0f396e95f2695abbdbed74f81840a656bebe40f01462aff422d9a3e1e18956aff918057032e7af3d7d80398acb267e34d0db13113a7e85b224357b17797181b8fb4486d724277aea5dc75f00bc22fc0aa24e6d1ee5d0a2ca8a59be99a3ae95988a7fe63cea1c76ef466374dd04f2548f259a6e54c4f15f24b8ae0c50c7304c132e5c1652f9686dbca30d293daa0947fb896a4920b9cb9c284794b8b6c24077145fb937549715d65dc6d39ae034e3e221c36b08f9d714180e01f9fe8cdc929796a03dbfdcff24feee943489eacb5ced4d93b4182ccdd56d991a7002fc1f0e42c33709e27a9c9c8e8cc0e48e1283fdeb2735cabdcbe0bc4599fd325fd5d1becd0ceddc4afdb6440c1cd8576399f3890d08874c5555361a5e26e9e920d758de29a2347b2be3c49019ed8828e4da8d08d689e28cba15f25169fabda218d33e6a34fabc8e264cdc1b2e60e31d649eeed3cc22c075dc1865be2ebe29b171ffc98dc87f39bf9adb59cfd654c4f30b6b4a9fa676791901d6813de9b161374f1b6990db67272d2915b21a8555e8447059a1ebc2c02c1aa9c6f992c9ea2e7bb76df14dbbf7da5d8014facdb4052f2a59a8807dcaf4603b112115a3d5f095091750756469b2c038585a1939d4b20ca5fff96209a354ce7b279c6ccc19871ba17703db6b3d8ecd5202322ae60a3e2f4b1e0ce83baebf8631a71bca37085874e8e0c0439297694a6f8e5ed0d47018095af0290554ea74974071e405f867ee4c98df977ba6087ea726bed85a910b21c8f033870104c3c15a261f48e4e2ab6a53d85bfdf13fd09510d7fdc3c837410d3e74ea6859fbaa7f5f33ed5df1b4c731956eac61f9ed2be344aa21072daaeaa7969beb7180d5a0e12e024155b8839aa4b90e272d7ffa3b3aba24b479af708b520038cdb0868dcb052157ac0f9381d2cfcce6844cd56e5fcfe09fa6a84edfa4799a9612cb0623bad7d41116753f484cb0820cebb4c36803afcdb65f848f1667172a54c911422f87faa2ef1ae2d546a69090108265ba1a30cc8b98a189dba77dc184d9c230ae982a96caaec639db66904a314538a732e24ecf712b0eed1e96f6d4f0d0e386206d80162d7915a7a2e979a62932a2e8506ee49e5756a3d9774afcc2fc63c950c2a54cc4d81f3408d4a4b667808e254b21f9edbf2850cb8cfb38769b1d7853e18c60c03ebe277db5056244a67fc231e6a9efe97995dfaf2db5e6a85b5e8da2484634380ad510c210c2c5d987fa4a4b97b4b0d3b64edb204fc9b1c780360403015c6edadbe09efbdcf12c4917cddbaa486dd308bdf9197719916124d2137b2c0eeeca392703de9036576d0b80898a9a8439d69ac54fab61d0d4ce1930327dc49a69077804b7861ae822e2fdcb47ef104e4845375b8b6e4b5e7cf02429f67a96a005b2b716d52be075b49e3e82920e1d7f82a8bff810dd02b8d9660c2440c9733b5eefafe893d576537446c9f2ae419a60f16e1ce2cdd5f7a91b1b5bf9ea56bc6e5e619de902446392b831e6490204606501125f4cc0dd739408c57fcd6010723b70b2c8a5690a845df14d47d51872f4a5a04a08d4af1ed7a97389bfb0d5e01c7ed80903d90b6679fe92ce1dfd137850593e4347d7fa031ac9013b1c1d778b936ee4d1c4dc4c85ff0c4a1fe106c154c7c189f24586de21bd88ccdeb110e6f92926ac459fb6ef437db33bb7ca7c97fda55d275205bb6cff55970a3a4f370777c13ee01d9eb320e15374fdf5db6a38498ff53caf32e5872dca82814e267dc0e14ba3ca422f1a8545693d572b8defdcf71e91134a77c97740ba67e873ec0a312fe621cebc852c52d2ffd6de9aa7dd8f50b311f7c88c0ff9fa45ddedbf5f8dca5101767760efbb1c77f79560efa37617ed891ceaede02c8a3cb32cf52b95b77ef6c3211695bad5049fd5b1400f3a2cce608d174783f43bbb35db4c0186db64decbdbe9511b20e96d802735805ff4ba98a7a70b0d6035f995f21d457dff0806ea11c1718dae01448e0e6bc2acc52d3f1def6bc9adea1b9f7e64032b8af1e44066b2c8f62e746a3fb83c792607d1da44f300fade1df8675d39c32e0a12697a598b8f00386655c4fe9cd91a01eae95eb7b559bc6fe708012b2100106448661bcb565a2d2214429ab69dcd380441abd64586b4f004724e1454adb5af418743a7c43543b58ec92c27a0dfb32107a6c2a5e9a1717969bdafd4bef6b2035ae4e915b2d51dd408a28737250bf611c97ead85310a081952c727a520f27ec7bdf92b4f5990ba21d0ceff48247fc9510b680eeaadc09c6b81286cac6994ddded81651b0fec510ffa93cb13cee29625689ab9600bf60c541c9a66592164e0665c1715f331bc085dfb6a7d5bb97ff890b1a1db3243e5df2d449b7fcbbcef42d314f08bb1b0e40fa5a0ebf753fb83d7361b1bf17885a56b09a2872683de0566961d11d33493dbd0577d2aab77337056d821bd49740459fc888e676e784e08aba3bec517a3ad4a40aa88e85b21d120da74be8a6977a1a4d5cc6ed1a0263db0bf1ea8e734967e99e3d981aa70c0958a0b6e48846485c0185b011779578632f24d8b9637c3b7fdbaf7eeeccd8e2f2a1e81a540f2d341e9d6d30f8f91c6e95d75b5e830e5cd91d587e237104fe346a1002781c382374a6b1b3c958418eab9303088919a057106766e9ca8fd96a6abc38c92c102b5d1481806847f8f746d5e5270ee830479f9d6208b4ff22d52209ce322f79d8b383ccde60847009afa544df964848afb0db615164f8d732217a5c0100f23ea1e8fa4c42e32b6707e9b7e68004e3f544ed0425722f0651c53eb69c15478f8bdc109d606b1f2ee4867285b1df0c2921593356ec70d877e351a0afe5aa8dd5cbb10dd434d95e45d7a951c936742c2f2f4b18993b8cb610153ce50ee2013e7392c2af733716123deda79a5599594ef5560cfcb37d1857dc10f36911446b5a94b62edc65cdac5144615311239968906f5e38cf75aa725e37a2de31f24e499f6d2899685b71b9cdc718843893a0f7ddcd91deff24715864c85c3637cefed19c50c98e5d99f4f40491c3fa7c5d3fe7601b32630d3994cb111c174e603a4387306dfa7c1b19e27a3db05f45a49d55d8b79e8243964b716136e70e40fbc545044a6e0f023b5e383f8dfd95faeff3b0bd71ab7f291749935faa57787f3fbf72d3422d80d59c1ed6b4928f2bb9082efbc9b3daf129f107b484472c89849e2feb399a80762d22ea7683d416f4436d0445fe26d29c931b8a122bc4f875c5aa9ec84027f7a59e33eed7ca5fff969d497040c92521081f8f1da3a002bcaac6017875f54cb7e3adac63f144294a84f7e066943a6553b704498ee4ecfe99b8812d4898bc65b29e760dbeb1e089788fdedf775d0a5d53d285c585833dd0e680a4ec2fa41fadf7f91c7de3372332a1cf424e10dbdefb23b8aef75556ad158b9db623d54486d6f5a6585a5211a10ad2856668d5e90f87b0822341a74517ba50fe246ebd91eeb80c0bc7952d7c740cb472170b5bd267b3cda4c2ab5e170c961df368a6153c787cdfb919b1fe5e71fceaea485f304009f2b4760946e997d04cd65727bbc5aa8e553f17454b3682cc6ec0f6e02149bad8188986bea5c881c7ba11a158a441afa1ff7212fc9efbb5ef26864374a290a2a5a89a21dae9848cec1e54431a3f85104dba362b36e5a430e0abc49096f6e87ec551ec9f02e618b168e136afa997efbacbfcc4c8df9be01c5908a71ec2674730491c64eedef3adf34cd688cb4cc1f193d638157e97d4323a33c8a900e623601d6646aa7bf07cc268737b30016ba01c333f3dd002c99ccd5c8c7a437c9519a8867ca18d9e7432482d265e3b7b77f3891bbe111e124be32ed528e8187a1570c19bb63412456b647b0979fe75d2a5438a9b60ee379891b47a2efeacb9dcc9b66a7aefdeb09b33c708fcf3f755505f7cc3364b1b78e3a5868058cadd5a862463496462190d36cb6121c5fce72c0a3236c454e136ae807c92b52be655be6dabd20b614a21a3ccd80a180d97abee24d973970f9fb5a904f17929282d5b85062ac15ffc7396a3ff222a152a96a3927b3282420d4c271e77e876411affa6f6e3a4b770ed2b491381dd7824af27277bd8a371c82846ea58cfde65027998d726d7cbe62f8b008b33c2b3ec6abda55388974d13eed3becbd1def205c5296929331e3d5decc6efd334d6e9f1a6df431cb212ea3062f811e560fbcab5dca3e38e54a5a023713dc1fb4da767f1900372e1f5f74d64c428d24c7c744c35cc74588824b38fa65a805215929fdde6244e88bf812fbf24d48ae06234d3b103e0c04f2cf4293524423864bbe4b1846939ec29a97af46db0339e28536271ae26e62959a0913277f432f531b3ef725582725bf03303e88c21d57fd3ce16be4b752121c4e2ebd175ac6e2b0c102236ef9c97a3911fb1d8c4314a9d1afd909abfebe47947b2b9e9c1b4e1231cdd79ac82b0aeadd647c3cb70e8c243978afe8bdcd93c5a9b420e872444f7fce428324daf32c682a2d1c0fbc5bc7b0769d595686c3f0108a8e97d5ebe49e694071cd17bb4a728b3857ce2371e589a5ae96e817991905601a27bddf901c78701734a9a70b211605212a2ecc595464fca9abe29b45509964288372f6e1da4740f70a9a84f22d85925f0d1e72f8496f733e29375ea910063fd559cabf07c2852ab6b935a983745b33c67a69df8481cd08096bf0105047f26f3bb6303e49210f672e4e38d881df17dcf040cd76bcd5553b1c1db1397f5b8962da099602dbc6955709b1fc5bc923d9df3fd68034fcbfc0af3942317af3acc8608299fd2088bc79530668075cc872801e3864474785f57f1485b4d8fc179b3a74f1dab10993f97fb3c24458db4f946f30f84941f2d2528340af366cf903eab862d145ca827025ba368b03aa5ecd269ba1e59d42e80dbc54352e6f9fb81dff6da799e86aaa0c70f7e547e84e08388a623742e17c82ba0541cf6062e1eb112666836188cb1250831e669395e5fd5fbe5a6f2a716a4c3aca0d4fb1d07a67e41e15c3d65a74e1d8604ac31e209ce7ec1772d3a60f4ef71ed119bcbb2706d50bd0c00a28ea9d58f20b8aef7fc4f0cc820b3ae0368348eeb6ccfc263f12ced569b3bb739bc03531dc7858ddb2c90f4fd9abd504d16b2b7889193d479161e3f80ef2020ca690ea765ed274ad57b738a6c1fd5baf1172d6073223b2a5eab5cd3656a1be0c2ce93b9ff147a696b20728da71dfaba20888f04bd37998b77be386d0dfb35f168cbf8ba135059c241de7023321f16b71d253145159ebe78576ca43d7e5481131cac298da596cc15bf242f3db5c09e11fb92ac07e7c79f47fc798c278cda4b53847aa2076a1b5c7b977a60d8247e379928627044ed8f13fc54b5022e6bd061631071194494e7ae5a328e2524815bcfbea7b9dd304d81041277725ce1c188a620c6a1a8e666c0232e69abb7485b08cbf55d303f0b8f0a083e395c500da8cb9c7cdcaac10fd3d4c4b15bc3e67a79ad75c5fb21119559eab3ac1ca34c7be6d4cfa3a95c57bed63bb18a266d13ab2b049a075466612938af232235e04331e8ea0c432b5e7ad0870d02a92fbe8acf9591e3c4614cc8f6521c93803d6599caa42b454429f7c77f8c8c9ad6d667f2d0141d2906d7a6340dc90979f9d844aef8d91122fc66c623de21bc62520dd1b920f6fdf3c32b30860425843a72adaf63a0b36c8c8c0c5f4d93be33f9e675e5a965d815e8ec735751761110072622ac9d05cdeb7c5a33768af831195b41d6006e299eb0ed667e92e6a9735d61c1122b62155f715f6a528e6e7e07bcbabeb17eb76a89af64b2c3843653070852c6bde6f7f6c986e106236046db0054379d6330d4779cc01a3ae7f8ef956250d3ce7a2379cae526bed2197bdcd637b8c670c19b61c0479caaa5fcdf3c4fa3b438b4609b8a1480118c0e70e8f9393a97c2bb1ae6d0a2f2a97bdcc1e8c3f696f536a28602f5e42b3a4d91a90edbc5f1656b34f9370ff113f8373021f8752fc0532dcdb4dcd9d2918bf7de890f21a301bbff49ebf69dd0aed544e4cfb24200e77d1842ee8e3a5236bdbeb9421c617ea654fbc38604aa3683ca995358540a77b5254f3812bfeb32d921a781bc98bde6f0553fe5ae363477b4bcff25bf7f15155c9918ea1278e1f83a55537c2874e508b4cb21306a11497700275c3215f172038fb2dfbfbd6bb81bdd557c98539ec6d5d48d133536d8e4b4c213bf2845d39a8d8661eaf551957ca070738e47535f10e21f672a293ae8b16f8bf926b3545bb033f7ce918e36e61920a4274e2be21bfeff7d842a35fc75ece5f9af4f96c47a63e61cfa849eb67a9732f81d8dd145f7fa5605e59fa82e3e33ff6b4e93c771db84f4c3c4e21af501aef39e54d1a4b10c24461d54eea58cf75ac8322f1d6fb31fc03fdc978e46ec3cff8f5401c94b23784a63071441512af33611bc2a28ce0495de1bc5b7fd905f46c39014a4e7d10a5d0e4e7cb1f382304cde2adf4373dc51dc856b2e343aa54448eb28ede254a0edad4deaca2b9a8f02a0655fb6889398f101b831070d941f992a8bf541e945f69201150fbb7e8c03afe6bc446558adb1a5721e857841b5179af571b18d6571bac2808c9042d4df5f6c58b9d9fc3859dae35741e7a8c4884dab83133cbd97305b97ba529b85573110f131b42b810185555738e0b6d2bfebc3c3bdd651bb6bacebbc712ea70f4b373e0d0624ff0688347bc2216c6b106769bd775dbd92eca63ca7ce5fe8c7349a83f33164fd96943f66b2474d49cf72453f77929c8178c1626cf2a57bdb194fddf157e22fe5f7a0c7f53a80d4a93a0a9564ebd28d12967b9114cbe5ff4ab00b5f8318cbc231a7610ea3b2f0ec2e0066a5fdb64a99d9fdf483e8524653203878bd560fd15517b79ca2156d34ce44a9347136d6eaee57fd49b1f4ca86ca1044a0e5b923dfebcb3f269d2bff702c756e76ecc359e5d8d0cc27e109cee664d02b0c5ea97e874eff2a8d66fff6b22a9679c42d4043db34f86596c9ae5f3ffbed9e465678cb806b61819b8e49121cf558c99d0d9cea141be8e17d47540261d2998132c43bedd4c7d0eb727faf5ff35185cc07331904c091df1fff2a8fb3aa9de205cc9b77ed670dfb07eda6f93ce910e2692065b7eb5fbef6e65650e4208f2fbefe1d6940e86b03991cda4e55772f61dc02be902947034f83832ee945c714c4c4c667f6208a693de577f5bdde3f0c50f6d5acc64ca5395c3442ff0b793b05069f5209473c6286d84317f1e6d2a5a4a65d8d329471d86e4075ec172e8b48903df226584fe5c0bbf2b3577dae6d71cff61e6e092cb79d37a1d48e8ec219c013580dc525e9b79c5be33b49a16ab489255ac21ea836843f4c4a40b24c869236b367604e48d25e1eb1c2530b4ce88be898036495c6e09d4fb930279e40c9565e92e43a8e9cbda67344f6e614f3480dc0ebd0cfadce853b21e9dc660b6376ac809a620fc5a71b0373b1c72cf95ac70bba059eb132a3993808c1967bdd4952efde3aabfeccc95a4a3ff3091ca499eba4ef5f99a32b4d11f4d6f6e3da86fbe14429079b2d81bbac926be9a814afec90308abbc29239c1d57b5565424da24c6c30c34ff6fa470d43cd28bee722a2111681eee62595712b21093b608e2a8db6906033f9d9070aa6f9d6b713ffb550e51756fbee86aadab2a92a818e309745fa658661bfca44943506cf0d5b35ea335bd3472f74fd37bc2d7008d226dbe5f5850bd72377b8a00a73ad9561d13839e4a1346884ac4f93bf4dd03746b09ea4a6355ae2e59d526b5224625dc9dab2542eb49d44b35ddb6538229e7bed5e1ddd3ad1878d22cd69b9d628f5545150b15efbc469dfaf412e8b3fe62e2501271ce28020dd7d61fc8422cee74006f0276a1e9d1d49f809fedf02eaff3b2aa1d08622c5d68e9f70ffd0b03665b1206133ee83c2ca8f5c462cf7651ce4f9bc66eb76ce90ff39a13d1398b9d258454dd07f5725a30fcd67ee41e1662927d48668b2f5bfa2e5013491dc0fed33f93780f0e7fc1330fc661fecd4ef84de0600cc74b5ab120fcced2bd8a1d1d992b5613fbc2bd9944c1aece6afbf326a85f380c38ca11338dd8e075e1ab763e57b6755aba03086a668c807628f87bf52c3f0e32bb5c3b827d378b79b661816b0d37bc62e2b20e75d00a9ebc7875a4f15d0233011254589aa57822a9e388352cab5bf08ca4174ebcdebf0bc231dc8a46f384bd248109dfa80bc25c97d867100f92971ceebb2d7f4e20f99f61d8d338214f7fdcbae04c9b272c00c022862e1e7653a83acc4ec1d072614d92da223c19425a0dfd95b37c401b7c5a9e904b53be5d4ca568e0de368005af64bd5091a3b951d3e0120368fb279ee275ef5c6efef1473e677227a792db72d11082babb7fa58212f046e2501203139cddf0d494682d567b103427a51364b38f83ed934703ee9ec724fa9813a7ae62d7792f49f55de9f7f49687915a85250cf341cb3c8a984e309ef870c3203fbcf0a7db8430d3ae283e8d500e764afa6165cbd17e7ffc4840deea4ea76da3de4bec00439ae6f9d52dc720aa413e1803427d634aadb310ad829e70cd5f9ea09a0a1415b4f495934eef681cda31f4fe9821992eebec8ba0c52619eace048d88fe0a9f6cc329f48aa40f0bd308b342fb4ef24b693c74bc193f45d22c78b0dcbf54e48077eed5d44e804306b9754a9f6a30b8e453b59246a489a16025cb11ce0d6cfa1b4397cd253d1bd61f5b5a9d0a18ab7892786aeee52229d33d5378380fed8d50197220a86acb38edd022efefbed96fc891a1a970234e7dbefba8112cad9ddc70a11f9504cf43f28bf6bb53fb6a099b9607ce568efe7a78e3523a6b1c26c7c39c53e0f8e6284741e7b2e90d8c839fdd0e813efec0447ac5af043d843abcca08f97a1e3854c457efe06cd99e487eab5153bdbfe1124c107f41492757b9bc8dcca30e07df2c543bb5ac178cbf40155ddef23c92025012086820d9d374d6e82307e39dcf68f653fe86cb939064e6b57e8c7e318ede403f2898b1166a5504907e5b8814dae454b425a8f91403bd68bd0ea1c5bac481dae248de6baad13b15b2eb2e1c50bf58bb6e06d93efa8892f62c22120a032b14a023a7676f37200da5d382330726e4775a70892cf052b79e406ea036f7d18e1df46396deca0f59519bb13653830d1a8379fd2ae39e1dba8b0d6f062601da970c9e0ba91fdbf8d388b36604efd0c376c2c8a14913ffaf084e5b92eec2295d28a141478a6d1adc789aba79c4c0196278b0edf2c1b217481b1f13d46569a0160b15f85caf7315bffb7d1475acf70cb62b712d94dc2b023bd1f342baf04d5308dbee9b965b6e6d7d2bcf9b169da513af22c393d72b4c07c2f0bc3a887d857328d31e7ffb0aa1cf8bf528aba68c79410f4c394203aa46220f5c617e8f6eab9279c0cd14cd679118e0cb677f52057b5e3960a744ee354a42f0f079f967df34713a344d10ec56c1a3ee9275b32f1901e5a3212cdbcd4ab6300a61c8694424c4bc1a1a39f1ff195f6c3aa2d03a0409d42cd952dfe064c59dd09966d0016d4ca213e1746e442d573c6b5649952592538a7faff1b37a1351f8d896e44682c0edb1dd8d21f23183888f39d49925e39756cdb55e6589fb030c84f7d958c7285bfb96f0e8c4d2e2473c7971afa3ef705be129dfdbe5dc7b26a4dffb90b9868fb1178c814a2b6af87622336aee5b92e32e5bb00bf0742f98622cca3f91da689a30671ba1654053f4e82b73da28d06b886925588d77847fbb333d3b4213950956b55727d561bbe17f697418ac7d6a9bc973e855499a1e630655e5d4eacb0818e94fbf7a3ab584839ef1a5c6ef0fcb8a89ab5077db688a941ead3fcfe79fb7fa961a274664098d24594c37b47a34099092e106072bc28240b7c01d7baa0d4eec6856270986e0b79579343e0c721423bd47934db97f2827d7e02a28ebaa3ba021742f55cca0bcbd7fed562bd0bfd6d1e3350b58c101adc3f6ae071aadc7acbb381a0ab245ac2c56dcd1302c9d3391295a22c91cc2c0f9081106ef30f032a41afc858eb63226c511a8838e6e3f9f65b9ce9885012103728e5648d320d235d76437e1898896e927d987fbe8b2e74638d4fc21314a5ac715f7b9dc2a5b5dc6eb665f62952d446243c28987f0fcdaa13f6730467eee6bf4bd03a8c171cdc6b63ad3721d27576b7daa053d0b599ffe7dee7c0061e2ad675d6f597bafa6e98389b64932e5b1299d39bd00473761766fe2dc022db601d69b1d1af97422028b3b31afe5daa3074a03a3498d4d7287c81a8ecb86bf50f52ef0cdc1ed99a755a1fd10efe9386318656f2c08c2aa5a6fd10081622feb69381701d2dac8227998f1456d92dc9b2f1b564b3097cd8cda14e12240e19633c5c6a595d25ec61397be469446031a22b96db85fa0e0ed5042b56e3654cfed214678e7decc2368ba6380d36fa107513347398c3fd295facdc76c267130d2b0ef5fd5269793140df4cf8bea9f04df47e2cef3f42761133ec6fb84c3d0fe1bc50ac2c77411947743040095a6fbcbfb843ea97a88778bbebf3436a9ec3e072f20512ad62359cf36c51f731c32988216b27e3fc84fba7ef4888e440d6cd2683e50eceb8764a0c6f0a5b3966cd00cf9def5a17961e561117c1af130a741b6c8e6d32e682d2b7d63e5b1503d314ce0055cba6909bd6b3681aab259b9b5f40ce2defd810d41625e102bb94b3acc981e98fc70e0187910b32fc06f447b36ebff8fbe108afc9a969260213802606986da6f6699eac2dd4085063e43709c929731b0b5163b83acd4f6dab1ba23e04c0f28960ca5ad1633de7599fbaaba57714bea60d393f930f53550b48260bdb8fa43614fd940e77a2f211e59db79c87175e200175d571c61f1ccfac3047c0887d8b6229c0d10a1e4369b9c8dad0bcf4294d8b08bef23757c5ea7ca8f3790000cab4bb737e3c78a94bc0cbc16fe91d406c8b1a373ee5f51c75e17debaaa7c5ea3c5bbc8137ebdf4fac209cba4560d6fbff6dbf5cf58a6bb9199e48d470694e9fdf88fe189eefb66bde7c5bf7d1189079a077e2d875864f3c24b892aacba0c55daf120f41e68b239a9e1b31966c6c72c85c993348b5993f7b55244b849ef276bb090f44bbe4e80cf7d5ce514077671d14ab8b4049ba936be818bdb052ce452b9ff76809a171aec69a199ac3ebbf3aef5b5fd9ee7035319fcbd5ff7f224523c4d15f4e651b3bd11a99241f3855639581c32c65b5f320bc2172983e5c29984ae130827a3e8c9ceabbc52ae333fdcfedc76f897ca2f1062d63a7f5c32baa17319e7d91a87879a7c3808482bdce53429669574a4494584653ba65502dbcc0d19a7b4500656079d8a04699926872487f2932089b0f382bee79be9825dca6ae5a068dbd110a1d77553a8c30f87c94f2d3d44cb3b6de7fbf14ee8fb35dbc4311f4b51d9ada604c204fbb0396ab0f4482ff8a7adce7a43318793e00cb161566ab0817d6493c5198c83b65a1ab3f56bff306797d4358a7514e50e893641f9a8796df6f9fada362e97d6d2616895c9d7e7a8c1360da8ca8a1360caf6a59e4d8f8fa3106aaacf10586d47abaaa7801bba96079c17ff6bceb2e39d596d078545953bd9ebc1223965be88282ae5d9e0db332cca50f892f75cc70eb622b177909adc92b0f8871ea27bbb714c6aa3ae827d95b75447d2fa3f8d88ac1f0a0ad4ba0fb58dd362a5e47c30d51e83bde422f1ac3e492ad8a7582b61cb793333a0d11ce9686312e65bd899faa29e805b72a72eab9acca979d140223de8ecf1fe196d3dc0e0a37a10eaa62187f8fc087d55900d73e5d61cc2ca1709a78474bfa7008a0f1b10ce3ecef220823d5b4bd0787fa047505962c00bfda7f69a4b51dd83b0be8c653638d92ffc92290adee6e2a3f0c62176b1fce990782f0ef0fcb3c7b94d189478c979a9fec44a70947f6c8a863db151c43b87f7082727ed096e6ea2cd1c8ce52ac1c1cafd9a5eab22b2646b9600dc8c1fd446aa1db5a3fea97440373e1defe4f9c88a2fd58cf5adfd72feb51830bd7c2e108207e32966a480bdd2921226e0bc2ce4d56b133dddf533fb9f9a9c752622c184d9c76f97173bc258b9c1c5aa412b85d103244214838a04c7ad07690cb11a69a7394a4023341bd2be2fd7001cd2bac3dec462969211d9a7627ed93d31930df648fff88cb9f2e2894273fa26922c867716b0d529033113710aa2486e1ceebb81f6d461734fbf4fe2c154cd7b94e0f6452973b0650eba6db1e964776f9c08887f9a6800906ecbd8c8739156ffb591a3fa08edb0b6817cdec51ce720c7e34c7245c2891c32f450fab1aaf200748fa5548fef063a802c44ead021bc67bee1fa84ece3d5e3ba7f6212af4090e294b178fd84cc82044f11cfc45946e7d8585b4b735429ad5d1e4eab78e28dada7963779bf184799eb87b0390646b24ed3233b4e22b5846e8d3cf61f461f8f1a55326c28986b5d03761c31f3d778f296d8f6ed85983bbced38c242be4a9d1619eafa0009f891549cb32d7385798a7f42e014951fe65a336ed089d0067315faaa3e78e2311ed64a83c9bbb56b558244a0baffd96f07a443ee0122134fc2e5af2e5641547cdb0ff08dd1814209a0327e53b1c4cd454e8effb65e3822d4e0deae85c5465d1663ae68879c542b35762406a3f637d7fdb4f889236107481cf77dcad7a0155af00e376a7481547774ec0a862abcb882aced9da1031986c8953a704c4c639a838de4cf1f6967cd69fec05450cb1c3fc719bc6cb91320ba4a6ba5fd0e8d3bb3fe31a913ff15b2dbd19fac8591342bac97e10a07e6ddd4f33cc5d0768d2ad7deeb2b39fba4de0506bcb356b93e8f3401ddf808f0c378cf2524ba94eb140570ec7847f026fedfbb2c43cf734d58c3f9ba17b73b82bf86763a3dfd0b61bfcab0245bfee5f1022231991246d4bb2e62f10615018af79635a2f530841cfecb239b95e629cc37c295d8a835db1e38e698c2bfbd6321a59a90313aec3019911616a684027a57b1747bb518246a1a14c4ef3443dfe5dd4aa5adbc955214e44debd8781548f0133a18d4b5c74443cc027e73417073177435f91376ba052cc605eea466b3808f6cc69756584bc5c6e83d77f69b7aec7efa2ea5fcb2bb80838ea3cef126398482308efb72a9bc216bc25bec88e26ec039d2a1ab68fd0d0628be2a81f8de4721a842e76676e08d2187eb48d5f03590759e6b0093545c491cfc202a8b927270d0e7849646950b9b1665584540c7d0aa6829872b49fbf7f604f782d3212376f82495136a2dcb84b96957ec7cbf85e98f032b2a58da39722250446c6ececc37043107892a1f868ff75cc52fa88c72de90201acd43ee272a3fcd65954cdba2a8137a69da17f985c746613481b903c4664fb8976c1770fb1041b560c7687d658ea8031adb368d1b439007359aaf4d3a143ce4fba8c7fa1a38f266000f80c3bbd0062fbeda52644c269cedc810ff22ad4a7440465a1b41b9704e1df3bab3dd2b171c6dfce9f32568da3294e7087c60d736da725f0b2e9fb9c3b5c603b39bc7216cbcec3459ade4ae35e7b4cabfa4a5e747c50cd6dd0bb53a4c1745955aacb0014392f9f826b42f5b40f4584104266e8190fcb87137ac59dcde3f24f82121763ee415725321eb489fd05097ae04e871825d7f389c3c45f2980fdc137995cbfab7008da68789a1969635e2e621e533a8856aa285a96a8fe066f1e437fe635ff2a6db677305b66da0ccba5becdeab8284389bb6e3f1472c9cfd8654417ac76f6cd5a4bc565ec19b9a05cb18c35b18adce25a130d27ba2eb53af6d6541c14cb9a3d0d27f25791a87ab5535af3af4e8c21a32d8bb549ad167548971973294fb347de7869fcd60b4079ce8438e3973b2f38e81ff2e8259081a9215cad94199e4ebf6a1b08091393899aafe08e004b75015942e4191783047c22fc64a27a4c6485b4f11807325eba3d7c1f780139049058a20962eec7b34d6934744874e82d93956afa69e1017f6375e73b13453d6abf321f7efba5a5efc11e6ad8278b062a5dfefb0e072445c9ee73d99ad697a985b43c7bc998428d9f773f7fc1764cd53aa2a82043565c64b4a678087dc03547f8bebf963489b715641063d68822f22c255f1503c33b821fdd92c04b419c30e764be981abc07894b6f7078e696484e03eabb4ea6040c95cc440bf5341416c33d41dbd3ea2c2db0e4786ed9acc5be45b4f02236d42a613ca33414cf97de1106e227ec7183107dcc08942f6029c3029bf825fb86dd57be63d4b6df622d17904eb91b6c637fb54e514d0f86f082f1d8a9375d2b6763f83805361fe21d84b26c0f99f21d3f82887f8e5f005d1d7b37b9afd132e2ef89db22ed26efddd0361c71712b7021f54498eedb8faece77c4b30fa31bae3bd7378c549e2a6f10ef306219fefc3afafadfe84b8a4dc3a145ac61e23cd03c0d02e223ac35665740cb66c8990f62b22b8f3973d4c8014d0ed3a19104314bd8e1587dd36d8e276aba66542f261f98f569903cb8d7481b115c767c03cd56424ca6b9c9c6f8809a04259dfa6be64969a20587c49b469f1bbf43060cd9b4d744646cef12e046679f698adf70e44ac9d224e561da7907528ee0b0411c22baeba88b16ebce6ddf539e7f1d7ccdfeec07d122d8a2d5de3a664630ac5bc1ba141f06946853ebd1de66e0821665f41515dc2442afca7b692ffabacff809ff26cfbb9ca147802b1cf84146f32b75628b91d001f18110dd7ba041960bf0d973296e3a6957dded4a532808a02920d1a26d7027bc49a2ae846fe5f3f99acfb5b660a549dad2f746e4e1366f86e6d7595f227cf4e9057ac823b39f51b01065c2099f9ce17db4c735df8cd93cca0b381e0dca3aa748e26004919f40a6cb9a0f7cef37768a1b4aff9d75fbaa861b24990b13d329a9b80a857f5b5df0ecd9015f6e1219cdc33299733cd784d706359b0104718ff7f41bf4be0ada10a7181c36c08af2acb4243a53e8f126eff61bf2ae5a432a4cca20cff44a29be76fc27d3decfb3931bcfde6b861506a6c261db96e85f4c575309ae4aaf026674f6ad33e0c5bfe697c04d227617b9f843eb35db5f9b6071a2745e0464686c0ebb22ca845d2ed3b1f03642b459aa2c315a97f8b7b71132bc76ab0e957d9a0ae3e78bdd05e91ab4b73c421898751040d3c363d77a46f7b3f2b41a51bf1e0e341a6c32d98c7401fe60074d1e05da573026844f2c5f8cf745cdb6ed558c3a61cb9a755cdf2809c46a083e5dbbee7192e40a124af94560d93511e3406fe16a3d7a56ad05a96423770b915321230c189b592ae55e0d3f1207d18cdd2a1a779e09f9e3bc5f06309bc4409d1971e144e3138b47b80a435edb96502533ba1bf5beb720d5541c434ec6b921d34c5d31904756b5acae007393c0ddd76d9d04859d2252f7c344d140d0dc95054452706ad9ab23a7ab8d9ac0a560f2a8ae53c082f165f2d3b1cb63eb8cb473b3232402938f6570ba91c3711af10be8d222b403546af239892ad73708e460206472e75545f0b72fc2893cbc493a2df56503ecb2e791db97fe1fc3c00cd4eebbbe57c302b3b2a5b899812915384cd0c6c24d22df1c4bb6950abbec99d3abd6659b97b1b31455bdf4106b394b4020c49eb441f26e1437e25f219d188c965e3be9b85e7be38aca11e45bb6152b27ba2c59f8f5a042762e4b585bc90ae9f2d765e9b6808ba91fc1b956846859cbbe641b913373e61de96be631f6915f904fe4df7b371247c74a07f9403c4b02db1a687d9ce6f64c00f200efe50c05904e23eb17efcd46055374a4e54c3b62c4a0c3ef967192e9341c5ee46f279702602f27a40fc5797e3a4511ce24783310af410ecaab68ce6191a228f390f47fb5f058423c6f1759e9edde54c7b206d6a5f6d9547fa9e6853d7897d16da75feaa40a57597cdc3280e92a52c04de6d07b61c79b4df4a9a583b7ce8c6a4f09684fe1b6aee33e19b4b3e10995ffe3c09e6dcd9b848c54fc839b15e39f3e6158aac09613686083d7079117090d5dfa0f23cbe0d81633274c627eec2ffd3fdbf11a7ebad98e52b573e221ad3245cf9313795f58560e98838f4ddf89fd0564b4b9f95291b34204318a78feda2c17963c9cbe1021e40f01fd47020f859202c606ed2347146dc847697498237fca1805a0de28bd3bc16b14d77d5821d1b01534e78612f8a199a98083603e22b931d06a741394e9545380ef5a950201b59f4fa7e001b8fd36ec456f3db67bef8fbf61ebc481c6932c4eb6f8129757b2306dc6d5cfe98adce8900b59e1e3dd19f6e310043fec10eb8d85c77a5d118456fca6711955b8d4001e4aa9dd382c4d542b94ea777d407a232236055c4de491757526b6d496f7839cfe7153393447b870f6ce7a7754974ec8ed6301c1bbb8e9d8f2153727817e70d8afd7e9386f553a116302c3df8cd035703a328d1e9168b1622ebd0d9d35b7da80687dbc22c6d4a96d1eabce757d8c270a378cfbe6ba3c8050f7c668a46f63d3adc2959adebecf2834132c3932a0e8b0fa1da234e7393fec7dd962a89965067b5dd43aa4e9f9fffa72931e31beedf596ae8a0db2229a9afeea612a1cab3bea7bd69ecf500bdc1e4988ba5d4534d0670fc7a272cb17c3a2306e87ba1a03808ddf12e143d6f394cca09dc346c31ac119a70e330902b46c13afb3e23fa47100f9f093579a1561112454f5b6ed0e63c7d84003291a76840b09bf65e02eb7b2c5a993d1c10c5d98dacf219517e3ec3596db2f73b6433a7cb13f3d6e2eda1018a07728a1785426b419bede7087c7ad0b4b8317c2ebb2f97379c93f478dc28640959e3aad6267061f4b2113363050cae49464def206a75d0171ae96e2d734046cb5b35e6603a2550e4266597a3a884602575df7068baa3b909ac0b77fce6325e877f18d14f67444aa5ace9fcfcf9ca6d6a49aa739cf188beb6c035b459e0d79668063ce7c82433f5aee9ffdd616c3b68cee30cd0feb01657d8bd3d80d86dbfaf9929f1982cdd5ddd13ca676665764b7c0086153b67c4c6bbc91b07bdf21d84d93dc4e81d49d6ae6f677d2268bd9c28d0651ebd61660fc430345458370caf83dc9c8bf9e21dd7a4eb377fbfb360d28f57086fbe9db0c1622dffb9511e7762cf9df4bc90dcd5e4b9a9ba63133e10af7c076ce5cec4d9d8be97f12d0addc757957847edc62a063740ea0628eeed360228f7dfcb7d9e6bd4454ee3402299b1f02b82c1d0dca0db850406d3bb41cfb68ad37249a9edb6c6002423b3dca830ab3ed34fb3fb60109125f1cf00b928654128be1a85a3c90fb827aed14d81afbcc1ddd15d6b3e29eb38ce3dc1d9c1e9cd52850451097c1e5fd99c1b7c5d4716bd270261001776a9e3fd3cdc76399e39bfba269c02b8a8f0931110df6dfd6680a479409c996e6564541ca6a80e6afe0d24d10e9d445c48d006ec075dbcd3ced9ff12b994003bbb3510a468e4a802c89b80ed766d49012fa7fea067dcb33a1451cddb311f51025b42a982f2128e878d3b73be7e0e00173a36c2a6c1b5026b717ec23d6c5ef650e8934695a1c394bd31730141b7f657ff2d3396385afad3c738e1e8c9173b7a511043ecf4367c74e0be4d26c489506ea41be5c5b42fcb8fc1da7b9cd84a2caffb71432e9ee5ca05f42386b07032d974e8f93f255f019a78587d33efefb6cbf188ca1648d215343830fe6f98d2edba9b5ee5d20fb373ac77666da5901761a643ec752a43c60b14d034bb14ca17d48a484db8a34d7e5b57f76c216879f01bcf30f63ffdeec7075a82e94905f802cd1d84df443a4db60438dc161035c02905c8a71c6d49fcf4208bcf4246aaecb366aed344c0121277a9533556090e9eddff0d5a143a897501d1d0574c54054307f9524e95bd0c624b651ebd400a53de743522313773e4fd06a238d217b296e9aad170d","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
