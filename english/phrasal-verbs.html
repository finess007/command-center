<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0e79b87ead215f110ad3444e26c8477f48a0de4a2db70eae65518e58701d469deae91f6fb5f9fc2b3925a1ae43f199b310863f1b204e17fb7ef49a695d5d29bef64b0cf86729a0cdb1082ac15da2e4133f02ea5ac8a7d3ee48c9e3ce0dd0f4b55b94b8e39637ae8ab4e4eed2ab1ee96c1d8bc08ee2b835d9f7cb0cc8cad7503c139f665492aa71c7764eb3154e1fe2136aa2eb6c79d2b61bdd7836187434550c5e8d70280667b07e368c99c3ceef00174af9e8043c25d6930cd2e6920cf98c7628d76def88a6ecbc3e61c006f73816dfa263486085ee5b6abbd7505822e4853021880df607f8af3e7ae0f7d0a61e405da760176e8fe8a284f28d334124ebd7d2d66687d89fad934c7b5ec15451b0f0e590ce121f950511067141c512bd65e49f85e4ebb9d4bc57127fb8f23e8af6fb1f9ff4e8ad36fd0d2161fdc2aecfa522fabe6e5cd130642ae1c1ba996bf4cfc5f52603c46a47a6cbb6e37850b0eff1795ca7fd4fbda295c95dff73f5fec276d37d4ab4f3943e583b677556d5f466cf47e9b49790c83e268045f20774c26788bf282dd2be7d0edf7da2ecbb22c63dc98ae932f86007e5a32e2d19677e492cb435f32c5d8edb2e22be40cacfb8a20128b22260f2899a502d40dae0045e24a91e9070df5bba6914dabe6cb3e65939919c0e8aa8968f301ce5539c26ffc84511971b781cf88f598af5315ac58340b3b8d7670c791a95c20c61348fa17cc84dbaa7fa31405bce1f0085f3555b8bb2350fc154452646a99f24484e7868fc300ecb4f3278d5565214a6946f255e71a26eb2db2fceb74f15c488bec0929bfdfe8fac1a76129c00a93e52b7b39bad029a675a7eff1389e01de936bdefc263e0077ee6b8c4b541a315fd4e94241b7d7589ae9ae90cba938d1d07933081f9d6c90f94c4fd7eadeec1d0b777225ad6b41e7b936d40bebe380b4ab7edc62f8bc2bb9d707d572d7c5767975cbeabc21cfdc456f7577bd8136fb237347ae81d13625d54761b3f14124e65fbbbff0ea4b429623b4fe360dd6b73e6274028c9a36189c8fd8aea362f409301bd1f02d6d17d266bf9ff5dfaba7aa18a9112652b82a70a885bec749a6cadc69ff8eba9465168a087c4e62ab6f967e3c1a07e7a5545026ce4851447a89dfe34311d40b80734299504295ffef841fe963e8cc3fd0c7a14eaa00b771d9e4aa6c56c314cac23d72020a65111e3c351f1a76a8ede6887123e5452167dade40e3c7ab7a51db30e90a9e90702d1f4914a812606c99f937686119450fdcbda26f8c4a3d0fdb08846ce6056b19f70d82e879a92c3b382393dea59e189392314b1b2f67680627eb20cba2cfb4b2bd7ba557267f8790e6b8d8fad9f4a2c537a7f674ab7892c1bb5a2dd5da0b649c791870979fa01ab3297a20f0824f92fc0a5218ddeb954ec73e80f47307e100b28164d9f48c0b1b26dadcda4e40013be477cc4fd2c65e98e45c6dcd8f780cb9440987f023ad3d3b92b47bbc3d2b84366a2beff327c97b7adab98cbd11c121f23ebe4f70c9b3adce07e688ca26b0fb3779ced7f011689a71e5f0dfd9127821580786ec0b5dc70f16970b0f18f3fe9908c8979788f0dc59de6efec942898962c10c3aa2df7323577cf827a30e00baa53cc0b6fe17c3637b020dbf73ba865be821f059d6a626b6b04888c40f71d6204fb1245ec05dd3e7e368b37ca7b77a8483b3361338c01e0100f8c5e4277246ea2f66d8d3ddf885fe18306707ac3753c94e4d37660fb6cd2e0fc19451cbd4caa4e4822f01d15a1c6328b2ae2a3527e61e331c0886d94d05d4f3c3229742c7de52f2a1df7c65147cd952dddae0a14d1d9776a8455cc59934572d75be310e525bd0a3c686521feeb87de62d88e7028d8f3b0e78abf831f800fb62d580f45e1bd6315c244dcb79ac018b30e46d90f0b8c143fa5d714787e1af60d1714239450b80aebfd9fe58407bac76bb94a80c6d6360ec856978dc1a0efb29e48983194d11fe14fa8169f861c8cb074c7f9dbf1fc57a1f36a72214bf3c7bc0b180013ae7e8b8f40591b1659571f662f3f4a016ba169c1322cecde7eb1815db693e5056e840a8395c2715978efabc73e33ef14a7630777a9b6f00d600d58cda6e059be157247eb32317b5a81c63557821995723a10826453e993cac6ff91b2ba7ebcff5551acc3660a33964a965a5c84374c0a5b550852b06a04c4bd4f2f79a61166e330efd1506e367c4014620862ab42422672e8e4d62a11a756ccfd5f368afb1fe1ece8b2c9e3b8f7535e86daf20efb8279287513e753678d4c74e352a9eb458a3798a714f8c931a8d79137597c0f9f18665363554d081cc2e7ff2ca2d26f110527d4a14a2413a618fdfdc4aaeec3b5608f967c58f2561260a372d65d630630132e5e4f97212b228e6a41a581b769a0a802ada19bef816dcc76600daf89528243824b3cf0c977b6cd45bf31c2e12552624d206f379f0659b152c849621dd7b8d48ee4101d16ef7b54396d2f190da2864bf9b03c4e84d541ca951d19f790de910718fb8baab8470a08f0a804039bdd4a5d4c9cfb2c07fc7bbf22b579ce7f450ab3020ac148f13d40c1625b2a8455cd2348f5756635489e471dca7c16e0d93a49d6166778d12231e55ab2a72ed35a771e7566d6683090bd8e90fa9829cfedbffd061d41e05850bace59bf9dd5681f6b8c1725cfa10c116ca091de0ed2b32336da9acc0272346fb47a3db0368cf34f4acf1d39cd864699b4bce8054d0cba8266245f839942641063faad856de305c849aed9bd07dd191b3a04105c56e220a8e69ccfbb808d9f54263a0f7ec11dd2cf7864e47b036600f97a07565f7040909edbbd91022759e57ac9e8dc745bdbca957bb6ba259c2c2e4f753f1d9f670abb590038fa10b3aa54951c7def11dcf9faa5d9e2abcb0b7314812df4578721e199d22d78f75fcf499f73e0390a815509e740cba6c0b22c507ae399051cead7b54f3d868abd4b40cba448cb026a994b169ad48d6642b85d5404c67bd8e3afa17a4c1e74d27e01f05a879b4b216f61e172508248b7034f8cf1771204b03f425da5e12bee81cbe77fb1390d04a184ccdb02cec403815221ce73c8666aa60518dee6d7173bc73f8ba455211b0784fb2ae1c3eb276277f7f8bcd0ee29b57051f65e044b79cab7d2cf03f6a08223a223cbbf9797479cae22cd7e55db130e20c9946944ffc71eb33e6c449ffa729627e62757dd2b26c7fb279be0b75345aca3a931ba10dc78bdecabe9999d307776de699b9a7496ed692591f704970ee451f1d215af3feaecd4f35f1a5181c60ade1ffcfd93ea16920dd7e63b381f7777a2dab468cf000c3668515031c793bea4ada729020f8df6d2147bce0ec03d3311622ca97455b4649979830fb3f11b50f2728f08cb20b904054006a78aa89e134e41cb78ef4ec3c108b93ec8bf716f6faf7aef18e406fd446de06f5b3ec331b5e233fd5957901b16d314ec290f421532f84dec44bcb957c02affb78a65524184b3e31758efc5f0bc7c7d611fdaf45622af789ac823bbb643a57657d39533bc36f66715627374e325eda2520f405fdfe79fa7b046a44f1a845997e4e849e726192dd1fd5388a31ae512cc0e195c17e320509434927991f3e0db384ad90faeae9746ce82d67d67d4a284dab64f34c48a3a191423374e82900746d6589fdc9aae73d247555e550db85a2f421aa6cda42fd31ee500a2ff4b68aae54670a01c7b7fb861a16164f1b04b6f91d3b07b8f484020143429ba42eb21f9e867ea05a257832b619c69e0ebd199f0790e62df896142641b7f875c1c4a44743e6e0e43e12636b4194549496540a87d015d417dd442d7ddbc23c217fb2b81b5515f994a6685f57b87dbd903d05f768ac5880773beb41765edc3fe2ef602e8613bea701ec1825d7f150eee5eed365cb298f2a81c89ec2b11ba3ffdb080b6f5d679a5a3603122ac837a40605dacffe64b735b162c668f21264a0a0d4203cc578b3646fb537d0dceedc937a43a0038ff7a477533cf3a7b1267b3708cdd9dc958d37fd85ca60fb1e5a56736842036bef3c3c42fdd20970977b10562d524fc19ec36576bd269f18168700d841729759bf44500620f8facf2a992ce03c69d5bf95046b68566bb8541befb27c3e9e226a0e0a3ae846c93b0c7411d2c7eb1589868fc400669bc8dbb7b3285866e56c3df6a3af2a8c47aa6133d788c3c122e72b63ad7b61c9d516f76d505484ffb8afaeddb266d9fd19ace27bd78836439a9a0b373b155201cdaf32efa80fb58ea86132d8aa5c39f5caef93cf0bdf9f4bcd8e5acc4ab6a8f4a3c422e6494c51a121d9728b99a242ba53e374303c3d564edac0ae0b91deb8ed35dd0499e14e734875570f7a49e7aaa0df9cc239dc9d83194760c9fbfbe8bcc8df396e8f376ba744bac3614779ffa12cc5e5ce9f55fa35f7fa482098568e0e6b59f2f96e40b7bfd48988cefef2a9f5dfc21ed5bb93c39320895d9350a9624b3b002aef18dba2df5ec7adc29b75d41bf19fc1d2505a40a3f3fd8fe66f4b7151250202ee8a77a324bd290238c3a8132f771fb3ae431954c28b77f1c2f7820e3e88a0a027bfd277e1641c37acd64d8804bf8aca85f4cfb65024b71f5097349c639073b1b2d374954a41ea9c278f69e871f813bb10309edb635db62549e14627b455f481f7dd96a5625d3d8b992755261c3700cc585af0a071c32aa3d126c9e0c9389e7a14ae53a9cb640fe6fb106ccc1512a255555b8af001a380b722cbbaaf7b766414e1432009eaa9c1536838dcb30a0986944f7f9afa907ff8806b5ab21d4558e239c573c52196dd95c92e2d9bb399706698cdf9c5615afdde180c7320e84c7bd556ad3911ea9858a428d07485a0487d7b577ed18afb4b58a63e761ec78d19ef9b14cb07acd3165c8def5d4cf859c0d65adc16dad3766a4d34cc235f79982b1f3584ee50f9ac2f82008aa60053e29d098be1821098026f7c65bd53165bb919f08c3583592a193560efbd73a9cf140c861b671a9f2265dfb5f1329a3da736032e8743331db23c70e56e6f488fa5a9f00de683dab58e08ac832d7bce8b356843947ff14fcf1545e68232983b55411ba7f339c6374a08fcaa28efbcebd94b77d775523abed54a315c6b5b48fa27dfaa36a7c5e4206944daa24165d02f834ccca5fd43231bc855765fcc65ddf74da1350feee2ce1659de9d4fc30f1d7cdaa53732c9fb96c3baf4ece4ee7d28461919323023480e902c05cb034f8e7afdfed603e514d8c9bb7995e1fece65721720e0db90ea0ef07211abe357d84fdf7aaf9c8f1ffd572b415af04a66a545ba0ede14f33480a8b4e6dea526768dba7e4359cf9147171b93281cdd0d05910161c7acdeafa12b80e47bd8621ce263a2d7c760416d424f76944470ab8d3992fabda941f78b285e46477c06b0ec6177b66c82638b50428e0c9883fc374875aae46fb20bc20d33190e8247e6ea56a5bf71d39891320dc5c48229eb067dca2d20b45b37dc3e8922a379c02cda60561abe2bf508fdfdb5cddb49e41c2853e0c693bc1bcf72d9f97338b57a77b098eb664c041fa70c312d830d825c914181e938159131d194d93a75630d6681f278d7be3346e491dfcb39e7bc5da38fba65e7ae3a55335ddfe88cdbe73e42836517e426247c614b661b6b84f069ad5a46b938b3eea0af4f94b1c9ea0d0f80ad295a9416342ae9844e79d96db55e1b2cbe787dc767304a2f3cc5bb6fb45ef30eb4d7c5bb47c08662d529bceaf7c01c8e420193428b0e70b216d8458d035fc3538b3b02da3b6e209875659a11d1ca0a65d7fcf44351f8e326f1d32c19e317b563dc4e24374fbb7e5fe88cf7d3bd090e753ba48580289ac65f407117ef743df1ed85200197eb99096d19ae4714e1c400a0aef60e4705119c35f1ed2c9512d603b8530240ba4e304787307085b62a436756820682a1928f6f4dbffa751987ce3e0ed06629c1b1d009ac17aa9f83e9991c7c1fe84967df8214ab7a4a0ac013c0b2e726c84bbbf9b53c16fb66c0001d8925b674c19a961c98eacec4e8bd02d1a813407fcf7ec8e8510a7cef847b775dc070a985989c51e9a15453f8d152beb6912d765bed65901018da1ec1fc3cdcf13cec4803b906ae5ac3955ddf3d7bb82226ec27e3b5a8f0829e4aa49445eaefa28b29dd1966a9b048d490e79eda9452de22bea4f9f71f1f4024bbfff968a61376f90a610a8e4f7b7322af6b7493732944c3929f1aa8ee9cd7b75fa851715dd21a940f55c63a9433f3adc43fa6b764d54c38d469394e9b8eec12bfd89370cb92300ee780e1a8cefd405fd2015d6854d32791d5785eaa2563b7dda4b86b6f2e7a2d67b09eba5bf427a77b8bdd146493eb58cdd7f3f6f6494699bd45280c46196b2ccb85fe77674caa31975b3b5b301cf4f5f1fa82fc82dc8df8b17fe44fb92ff0fc243d44a923e9f58bd6272104567b8e904fbdca9f9d64c482ab9b475700c563248ad7cebaceab9c3997f2d39cd8faf1d28cdcd7cf030716695d8def6c351dfa12105ea730e6990c5c887f49dbe5b378d9d79c8b216674f86b7ed8dc77e20eeb3f5351cbd61a5f462d1b4abd47907820776588156d061c340f80e24ebda818763de77eff347e8fccd42643c785bbccf003cd94043bac2385ba7f1e71d36640ecc7a13190edd1aadcb2826e1bc6b9cdaff0fc7a83f90bbcfefbdaa2195bab93f59c9ea4f5ae3e9572f055d487bc0df01cdd7545f6be981b5db0c93348e1f32c3eebb589f3a671c0885cac2fe48b2150d4a1a6d0f64429650df0971e3ab3d726a3ef78babb319aa931a4678f0d4f2beafb2f08e00031565ff95cdf3bc7b05834bc81df0350c88185c970ccd910ccc4dd533a3873cfb443cfbbf58224ccc3df21d1c2b5bea5dd3ba95c60a798a6ba3758061b31a6da2ad318f8fc22110e837c69218879d24fff4ca4e9028d5ec600fc91cb7f469b27b0856964a9fd2e274441ed8d2a621fb4d88f4b65af705a1dc59b7bd09d55160ce3a1d2ad41cc135bccf4dba701da6eab6d6c069c472ad611f8f5c2ef0d15ab3fa181fbd3a306e7f4527cc068170c75889362dedffc5abe6a4a7d969b9ce0b17baaf41a8cc6582428071369dc5639fc7e1bbc29a0dc687e8fb06a62f3fec772242bba4a5faf2b6741f74160bb5683c22dcde93bb187c7d86ba822ebd66feb529237ba86237795bddcbd0fe7e21bcad4fd7fdbb0206e0fa4b61f69ad169aa8a0290b3389de4153366c8de911272f65ab06ad1ab15afed0bdc035023d0f50d63a0260ec0e19a21745a4c1a8484c1822d669a7d9df5755d9383b20b0ec5025384409212f7846c6f5b0d25796054f3c1e11bacc798ae2c5e42753eba8257983d5e010c507c903febfb0117491cdfc61bedb9d0de3eb5fc9dfeba7c7a7b758850c17a8af1c877e4186152af02e8b44e22990e5055e9f94542b283ef73c23284c22494ea0b30ce4fc59ff7149ef9cb6879866cd1fa5a1c74f9e4652899f1ebf4d7eb01c840b19ba361d3321720144c3d337797621468398ba59f19778f6f85cbc10f941e521cfca88435543848cc1677f10786a22caa1d37abd1d6a1f9bd402c57b0daaf4e11a2b740044c18f4b7b3651edb5d202d6ba680cde06f138c775d3f5c4c07d6ca6bcfe9db05b94a322f2c51dd0c5e72889310c963fab82257b224ec8ea4c52b74e3dd28881ad80a8439942c852dd1e3d215437652117752afc740fde68308f40d34742e7c79d6acb0f78e5339763f278d50482e387ee202e509e969cca07f44dfae3484251281a18094bce76da83a690cfb472b08644ffa4f5b1a574d150f9ae29173173a057283e1bf7f2c8e88d71c0f4bee97f228eb3d0966a2f1debcd9802bc712f4f78a3754753b74b0e3490d040a58a08790889115b0ebeb3587de4943559d92c0f947389c5f4362a3f4de0b5642fde24843c9b266f42f4608363c3e03a09e62389c5acad8556b0664a15ee34f2f854bf61493e52f775f628cf0625473516b4da7409f4d91debc2c38a789f6db03f7551eb90255b872a54b92ca14a7bd63ead081f3da420eb85d5df50c09212e2338e872b41a99a542a728a818d3b090aa489686b9da20c789ba8eadeaab44d13dac64d5c2baca59dd3a8eb3bb44a5eaac3a49ab861a615673649fd348ab65e85da2da495ff83a497c3b94c71bd58bc4d8e069f68c4f8c7fa22caf2a11371a49a586c619046f82c0beef89c1ced58d8a3a9688818d008a68ad6d125e12a2543fc5d3eddebc1b0632135799c93c6e2fab9e62dd4adcbbbd6578adb24a9cd5a9b213ca472d56fb69c405a935969229b0b67f81c910cb9f3f9a8a01bbc1fa5b41b3614e0d4ee997d9c25c40fbbb0939c26959a520436e4dc072280b2a01b0346f94b76a92f3740b032ce06e5c2320496a142b804b90cdbfb54ca397798930b4e31ed08faea37a6c67d83010af2b27cf53842d03f84c02896d31e407d616e5b2756145a31f5be9f365acdc6ec8924652b90aaa0cf7e2cac49fd860c0865ecc959ec4d65df150ff7a8ce550e3d07ead2804de0c34ff2ec385572fd9eef0eba5432e7158f353ed9f1bac5a67ddda11ca7ee02a5cf381ebea130db7c6e684b1f53e930b26cc80b95e4dd76fce33659f75c430c5c9ea41ee31e602bacb344a43049618024eca9883cc699deddca7afb7d344ea02f437f55576ed381b06414dbd8438db877110adb774bfa62dde33639dbc2b63f2c59a807a81e6e071c5e0508ebe0a2922fbfc1079ae140ae204fd5ef9968f52337fe3560cabfd7842080d7e44da0f4cf1f83fe2272f4708c4a6d10fa5cfd1aacaf6010c5127edcdb9257a07a9b297c60cf599e5f1f95722e6a9c176a3adaef92e314a7f0beb140e9cfa1b25dda39ec049648fe63a103a91729a5e434d3183bb83186a5bf1a0356c3635cfebd352f470ffe76606a3b3b07acc011c2fb80c5359c2bd98e10b6ce0ed0443eac1d181ea254b049f2d2c345d141b09dd7c7abe532a6955bf7f0a981853d9ad85ea82fdf3934dd3a687bbdc105bba2572ff187c61791a62228fdfc0a9a2cf878119452aeb45f6d82b6fdd604d2048d05a3fb7a84f1ef7dd272497c751e0f65d5a31b337c49e7a30221535e2ed3497e0b75e455df6fabeb045f750bb6f31a82f436890498c3641dfbba05cfb7838fb70b55a0a9744a0f955c9e4ede5c1b1f94a0a4fbb0e294f24513883bc268b4cbb2c3dfca169e6bf615594eba03b6322eb613b37e219e26cd7151689242d85e671ff60bfa2823cd1e9213e783155aea7d0febd7f2a7d1cac81eea38e693b26e77d5f88730a346065d44a77764c47c1be16692c977de173c69e37b5f41aaf08f4e1f79833b9fecbe4b3f04b7d176ab14a471f62f8da52fe43bb121bc6b64308ce6804d242ffb1eb68c86a45301cd07d268f670bc9dd239fb701c57dbf734a662442dce66ac40ada5457acd9c635f99797382c74337e4ffea20819b9a4c665d800402a8f7937af5ac0fc8ba4c6e47cce0e982c75c5bd65e58f43b47db4ac4bba9c0a949f24185af8d9ff95120574c867ee88d22aedca88d58c83c4707babb39940c95694f49828603f3cf5f42f28fea354ecff583f195b37fab37b9828a3efcc0349312d3fae3bf77a0bf2222541cacc634fb7c19c3ac0677d846fbaa891c5735b1edf7261ad93a1f470293baed3a09f80fb2c8d466e7be282ffc52df62a9ac7cc0f7b0ded8b24905902935e1c43b2f0c65f1e2e23e7a98f90e425b73197238cfe90dba4c171a0de116a779a55bcdb8f2ccd0b6a8cb1f2f986ed0b607197fa72c61d9e72007d9e225ec2fe3f59cd966a34fe5a52598950f028830ce0d2fea9fc1e54724881c3f90f16cdce0acb89a4c6eab985bb9e1ce70f8d42b1fb68dd87a59aaf56678488bd517f60e1e73f3756f6f659e9335dec2b961b498a987eff987984c91aeafe1a8daf1817bfdbff08ce5d497a8aa5c7c14406d2435bfec78744ea7e7de506dcc6bc8f62043fdf0bd070458d72cb36d4478ccc07e1fa8185ac7e99290731e595e94527b3bafdf75d43480c76059afc0600db8b09ae558c01de9bd4125dd28ac3d742ccb5a13afcb1e7eaa870777a9de94791e8cce28d39a52475d835c99825a5c1940a8ed3a11330499519e564a062c8d432c5708ed36029af57f3e94eda1b765241c32fcba23d2d96718df45969a1883eca0987d605093db809e170d1c0838e1128881703f63e36853fd78fa34fa9c1604c974f4bb51cccd651bbb406942d23e16184a3b49ba0cc716c7e392cdd1e37728703a043380a659353adafbf821bff41b3fdb4faa928bf68c23b54a2570b72d25b33208cf61aa79a182a2a0e51d135f91376d01f47e8b1eedcd40a9213fec606d97bd6ca7458b07a1b23ec04189b85f52e53ab979fe9fba380e8fa14368db2591c1a95d72e13425d9dcff54c6dbf14c14b1b65ae8eb5745b7b55b914331242343a912426adfe9b89c04285a2afb491d70c79afe5a3651f9ea523e7c69d6b1b83f251be95083dc690744879267a94ca8902970a59a92d9cdb997612dd9a7633df8e89dd72e31b20f490bc88a9a812deb144889be4754ab6066f7bd4a766f2b72037839796ca5e1b45dffcb54153b6e8042e203b51b693b5c95b736ffafbffa9c8aee928554906528a36c95dd9dcf85a2580956e9b85c680d41eb83ff5d98dfb424314537d28704e941471ee3a30aaa2765ac26ab74cc79ee09382455705eae168304bd2b1a6f1fd19ed4d1c6a5b64b8d0dc3fc88ee729d7eb919636f927a11aeb43da665c59c9728b4ca5b714a094f34916d891bd506d3b95329ad38fcdffa8f9353acf344d3c8f3376ef8458650cce10493107443c5e2daf41acb3fe4a0cda0f9681c9745b4b048ca616bdc9c8d687ec16e2f6b09b432923ad159c827d6d76e882ac7b8da21bbf63f42aca52f802031d6d60426738f4f03ad1dad84f566f6735d0f62b96f86b460de90923ce1c6dd819924d3a6270dfcd30a5e172351ae1632755f29ca61c5e39f0ced281393e49fbb2488d17445f2e494cbe92e3f88572cddcc512d6fc995520e85acd88caaeaa3b910a2e5e0f5beffe72243f22bb3eaf89731c72eafc084d06b344636eac6250ab21abe953112a516e40e4289301c792b1f13db4d99f8513b91cf1f57e8a19fe1074b99b5e0179598d23ca599ec323198260c403d94ba785e9b543183fb1438a9b3453c5df4a871dd7b915518b71c7998d205c0fe3be08be60e493f83b3be55954d9340e38f0150a2b5031b5932f18c39104fb66189ca012ec97b0c94237d9bccb2cd5724b0e2f1f8caf97788c0a62e24cc2f1d889aed4a90a00723ac0efd8b934bb1503e856b910a16ee95e06b32eeefadb340c35802fd6ac188cabea601907aca631750cf5a9d99afe0aae15ebcd151d8394f0840ce429f6e72689762b6432188adb8b2d2abf228b54b8193ffe4c676da95895685c2933447453f23395b36376660014cef2c15373d277206915de3ea5146f9296cf5439bbf2a0be3dfbffb00e5003aa8f0c224cf9a9f39d397d73610fa85a7422cfb8f8e7e9c0c004a9c05090ea78eee90f21f52b9c8d245fbeb81143d171688203ae5e470237a0e2e75134747ec3acca7c23171690c9ed58baab6cadc63f7c2338d3ac58dd6a7898e74f1950a84e15ebef2f9ae07cdf9a89455f7b6dcd0b8254dd08e6c6f419b8aaf60c72875174136f9db111a61053e24f4ebdb0737bd47431874401349756a18b4d42c590bcbaeb02012a409d63baa0dc88ce5d7edc6e01a9a4b8e94428e0e9e8bc7793efaec4e811d9d151d9bc63df8b214a3e811ea8e8b714a122bfb74d59ef8a94df51bf17089be8b6121330c91f9eea1bcc50332b1c923a6f7bbb97f41dab493738cba3939c7e224396a7b7582df20fd8c1eca895a355fb19428cdeb7428e2330e2b37456096e5696dd06ba6583190bc3e767861ff05a5b1db07957cd1c1a6de3aa5dd365e04daa9f5af6bb25acc10a7eaed8e6f2af013f782decffe23fa8136dd8e7aef6421effa9093a38596f0db1f4d0a3e84be46f28e877de83871ef2e5e5e36fe84e88e256a2e432ec618df6a195a7c277aa24b2237143a68ef43709cb11765d7f40a202e6ef6964eca232dc5c78f0e4325a714e14087169b4e485005975e607bf58d24728608e9857a13c391066a789466398f7e0f969cd9697c34376402bab119396cc16ee1449e6d07bcd472ac8c11af86453b46352b9b2c4ad4471d0dc8c1bace074f70c3eb879233199ad1a5fefd3f84a86ea462d1b816a3598b730cbb96b17bd75556ea18bd83d79fd4414cbb9c18da06143067103dfa69ee8a76bee35d3c1171d7e6113aca33e56ee3af07307e3a110bae38dbe66737af702b664ef21265e0ca7b839806c4db1096e44997a754258b9ffcfadd729709aca7d7274080d9f49ee4f10d40136cce0e0f5b05414c10b8802705f02797f4920b2602efdf462fa87b8a5cf5d8ee6208b691f273076b78fe855e9b9bacd3f729156f06df9b966e3a76dac9c3901e6bc173522753fe815ce60ae76068c9080beb1cecf3e333929c9d1e0e60df1a20a9a2e20c8f462056c5728143b9ea1717bf1ac836419ec0e4c4d7c41ed87159c2f64a465f8c132ba70f31dc4bcba7ca2d525553161d1933601975497f5fec396e1638bf5d67c964acbe15559bbcaeecdafd6ad8a88e0db5fe184dfe24220e9833f06b189ccef28094e5449b9fce81f10dbfae5d20f846b344fac53c09ef126aeb8e681712312491e0f1c3869d61d9ee2795aa4a7d082941483568250416bf53bbf6123bc60fa22936fce6f862339076ab412b9c73122cc813bc25a3b5e4ee61832475969142e4e05a14857ade71c367920fb16c9bd668c0a0e39933eeb04ef1c49f686809e69d414a97b7c05da1cef6c7520cd81de8681456b197092a1cdf37985aba5d9a24ee53649129cdf28c343cbe7aadc03e37e8276ba30ba6615709a93120bb844bacfb5ac91e309209dd188859d697758a684f83d8fe4f3ee7e62416b10fdc93f338ce6ffa70c752044def709d1e9262add4d205492f1ef103a77052b310e344471c977030ecca3ccaca8efdd6a1793c668281417c2871ab90111afbae7031bccf437d6f40d02e2556b04b51bc21c5415d421a465c4857237b76d89b9c0d1bdb1ff91ef2e2150b9732d5df84177b109da3555ee6b738ea92350841876808bfca46ecd5ff33612d2af9aeacbf613f5c275df67606a391e25650c062390f36fd1e4cf7102a4b1f2aeb5c58add7fa4a008658fae1fb903258ec0d2c1e16563f0b5a8c2cb5de78504315081839e29ab94e07f1ddbab6aa20ff4f93ac0ff5e8a15dd7e74bc021343becaba65f6278c93de76dcec6fc9d977a9124f1f2c1f0eed124355ffa24a35e136f51d1b671c64942b6d69cdb71a0fa213293b6fb9d9d1aee786db7d7bb6b60e1b0d67dab3af582b04b1bb503e3214dffbccaa8e0da2fe038df722d9104ca876ba3ae2a920633590773d339863131fce93a141623129bccf13238f2f18c62ae99f3aab1afe8fd8ad5431f0db087a8dd61f00af80bc559faa9f7da3210004f4d75e0301e9940927b362f401df4193bef3a101c54f913bb94fed28b2b4285ee84870af03efb2547d2c6bd7ae1d10eb679d487f2e9636346b4a402c1aee2188c1906c56cc45c881ac84cd8b573e7521983aae5fcecd5756fb37782ac7fef949257ff36234e91b38a4ea60b11c15d506588ea72b1157d3964c8e4a4310176e2bd9a98d58e064f7f2549112fb80a111050770a3399de5a89162dbdef567e9f69fbb49b17e9c38a4305112e6b333be1394968a629116154ddc1b0e0c6e72cfb7663f00c0216d6eca57ceadd9fcb10d8129a0ffaf932ce0aba992be7a24511d0a3c6a3737ecc3e612a4d537e6ee468ab034efd696a7ef43da35eb584d99dd89c7cb6f47262cabb856a2575276b57b5e0f4f46f70a4598c4f22f08b4e16f6bb02460486dbe51ef3a4aa42bb5953c6d5102a319f8545431c8932817c707a4d91f442f3a74c8e2215704580782167b7160d1577e7d280527ee9fc64ac56590330b8ee43eb9c62d0e384abdee797c051953797225a118a118831d7e7bc6e9d94811c0a7231d35930b0fc57f5a369436163790fe58336fab1c0b2cda8e35fc9fb0f06889a27ecc9bdb3ccf0ac5d9b4aa6e1ba5d275cbc1879dd549f4c8b25df45937daab4bddf9d93df1905227e989f77a66117cc40c4850cdac9c9640f3f0a0c4d6b0e3050914bc98a88418c8d224c3272920a44a1017c0dd0082884dbde989586f8f7c545f463c5bc5cbaf2c1e7cb66da1c156d821ed207dbfcd1245abd59dc0a7010b558d8056fde5ef916d144821eb2a978cc58e779b93aeac46d36f4407ba1a8d533d65089d1de9f75f2e4ead17b90a31b8eab53724ee9b677e388e8ea8dcfc61c06ce964b321d5ad3837aa8a9af14a07d5007760d36cd56f2082c1956ddd735cefb344735c32f6b33a2ee47d1026e4b315da3782ee0888ef0f7a3caa55506d0f0a9bd7e8deacf722a54235303d732d3431d901cb7719c33b3f2d019caf83a126b3e597c1f44cbc528da6dfc52716f57ae487232d312dcf194aa5debc027a69ae1ecd410d6df31a183dbf95917197bf34ebe84cb0f57a6354435b045506b07b34698c76d56e47f394543591f86ace576221dc49384b129b958349b08b4171b59360bab6f247b8acc16f8b8cf6fbb7f9fef0e9058aa660f590585b2465db2583839186b1df013df17397e1093465f93b28701664d1939206d3d4402c66b329897fd29674bcdd3435015844634446df43494ad7109cd333d7473fcd4b7844596959bf0d997370cabede068821a71c2c576f9ec49e5abaca9940cd0230913634808ad32404a689214a7bd76b3f1e985b22a8c7d17a80c1da7af7fade38f9431ad2f400426afcd13bdd1a9314540f44b4002390fb7defffc590128a45a813740df9cec5e74cd8a49c7bef82acf8854de6e3d622648c689d8943dfa68ec145df10f64dac73781d07f4343b0ff28734b26d4c051df9ef9ca1beedf6813ad2572e734c5e00c7397c932555475353043c948ab09ccdbdc5727c4717058f19fcb266548e48ab6ecbd4072fb9eba1ff109767626d925f590906332b08c26b6d3a9135317b769a8e2803dbae34f9c9d12060511f2955c734898eee4cfa9a1ee23db3394ce8c5328e73d2e7b0560b826b5d62dbd59a9f039be6086d80f9f9956f6b1a025569b935e5b2d587294d1e36ceeab587d09a70b8fa6ee7846496c6a51ec1e3934c518762fa7fab1670933326aca77a1b5d84fc02d63f7ca0b913d98b11334f37016137ec909e920532c7a1901100b85c024d77fe91cb8400eb2760e804f92e16c66acc3050640c307c15bb0eb09cdef06587b2f765d927aae7b510b5a802a4df90cb965f854f9daf3aa9f74f239698e0f1d7c44f7201d8768907e85d9ca6e934e1aa427468a3dcb327270bb41b7127c6038df3a7737d4cda7b3fbe404922abda9ca97c0e7a4a09cb7ce6b0d64a5e98a7ec240b5496edbfba4d62496036bdfe2adc138bc7d323335a238be7fb1c6f91aa727604c4836384acb1e2fcb7628706ab7276b85207130b4f9a33a9b2bef8e1d214258398335bd832ce437a9d9121be285d5324620cf21b355b6ae23968c9188fdcc6b8e3a9e87cb8d1542827031fa71a4bfbc84c425c69c7517d68756c9c306d5fe27c17db97680231a40cc563004af37c01a34e4d07c42d41ca7a403da2ada1b45fc5e16136b4eaf74301e1427645410b323e371a80e9565ec9611a5870968d312fdbacb6061596a68b02dfd7e061b248742b8154a2ae38351f0c9806e4ac7170ecc30b6b1387c18b98d9583ceb3d3d87d06e156c90abd9fe8eb80284aec33e3936a11fa8b201e170f0428ad8afbd47b241222053665814655ebd1a8ad5860c7d21baeed842d9f62bb9bf0a8371aa10f870ef580dd8d804db5b86b1f2b4008ed372e434cf99f550ee478829c0a79c4040fee703ab3c8703992b2de8cab530c0916b90a1c3ed2211b3624613243dcd6c3225cf9bcf37e1a9f0de16718e15b24cf1fb3f98aafa27b43d14afed38e90840a4683421bf294a9de8104ce27a9da4d493fa13b148cd045ad4dfc2ffddc13d0fe48c7e46edf205f76468d99acad76822c40420f2960beb21496b8bae8d2f53e0ea35b182baf10539489866ac2b7d54c1680f651cd39be8cbb85daf523240657ff0b1aad443254fe10ed568397872356d7bd5f6ee373d1ce2e54c4ed75139d686eab76bf6127043bce5bf5da94c7256037cda3729bf3e08cfd53415c25415881c9de291b2e3ee86170074ba93f52e8032bd7dd296d7f4a8271dfbcfea65f0f920a56dd8e7d9edd8e0b233506c2c571e31ad5ec5acee56641f21dfa1dfc40707175306496cd888e6b83a5734ee88e5bd6c52fd2740002d8bc7a526caf9534782e104ea4033bd95ee3bd2e3001a7d70ae9f9db9bef539a79b3db245c4246f7c0a081c6ec933f2c68f4fe9b168679d224c22e9a2fe2e7bed5f61666089269cf1ea04ba3756259326e603c8a61eb7a4991323678f22e7158ce103758285d553368a844d719a62f5a2d8d36c53066e06cc69a13d73b73aaa890bd816d481defd37c63c33da0dcd04496a8da25ab21e9b1315c5336b9da6b23a7b119fca052f1066e75b583f45e05288ea3788db89a90491cb9725329ea4450bf17b6e3af50a4cbce9bc1eee70bdad9a63b92f44e946d7380bb899c74eb106e7ab3a86a68e17a7eb9db2ccf1d9701b241ad29083b46edb35b09b95365fdbf4905129b7f8bc0c51c629cf026423b81118feddba19c691215d05c2bba382a638f381c491b0877f763cbf580ea949a1148744e089a3d99e396cf4b221ae05b93eaa601d9e9854ab965cdc9ee5ee3e0effa6c1a3b1b82aa3813daa9f37cd4e3625a8e1485c644778c53d463e13fc82e52b7dba16416642d6dbf1b8d1ddf920f788bf1327d110d4895a1a2ef30e4b3525aa404dd11963c34a8099d45e8a2aa2258d27d730fbac03119651345a575bc3a43570f02445cab9d1d432a1a1a5cc4189439f7ea1558c4e86d40bebbc199f7e4e0b62997a260b63c748856007e8b6561e95f8229dd0ff13e66a4df446509293086c4d730b654346bbf4871bb3fdccea0c49c93c896b1f5468c3d2df315ae3ce8e48972d7c2d08106a7a961459757b7e69151a666c331bbb7a62e1cf050a10765b89ed527cda6ea33f9e3028d23d6e13e74062ce194f29f0226fdd303a6b0a4206eaa3cd8f5d42759001e431ea112dbd5fb0aa8fe1f3d2865b4938f3cff2ebaa0556b3e4d1d427867c7dc699dfffe15797b7cc845427a825d79667b78f2896abe872f6dab54eb8ae6b74a600fa982c9311114d4ce40382a6e814c99055733b0d75aff03659807cf1be7243a8a83ff55279a4232d4d94d0e868d6fb03ace2e767b66fbbce7c3af6e515af676667dbe457bb082674e07505c20f44e9259597e3fbf479ed1f4bad24864364bdb2bc593f42f5a4c5abb7294aec45f0524e53d4a888f2ee6a37d7e8cdee5421faea07600b3e593a6149157514cdc832d16ff286a67324e60a75eb6b59da5d6ead85234cf0d8fd577c8974173ff535b49c323eae48124a334d187e9dc93661308e2c193374e8def78440033936cdc9129ec3474d971214e59c1963549d6d8d2f4c525228f30782ed1489a22d7233cfe2833ccc2e83a6755365cfbb441d96e461a36a6493a93ffe25f03b5c56ed7e6a28e253d351ebf719eacb10ddc7073be42f2a0081f2c629f58049e9125086e37572e835cfbc7b6a933c2bfb7c012ffc5cf15e2bd66f92ff51316aadecb7f8f3002fe3aea157671ae47acb1be4132aa65e0278e1dbe07d240e42a155009367ae6b764cb76239b9f5529e694b0330b606c26d3637de6ffcdfda584fcda4bb649b1606dc87fd838360cf50582b24b8fd630166e51e6e176f1d20b81d5f3628e44e21bab1c689bf547a8eba1490a587375fb1b894c4d315f63690178ace63f44b04e58bc060ae5f38355cc46f2f327b7c4e45a5abbc999c4698f829f0733ea62689432b779882b54a3c877ac8b9c60cfe668bcec405c86f0abb8aea774e690dedfe82ab043827ee6e9c3fbc4cf936014882ef9b9c0773a79afba882f621f56517934ea1e65f1074742cf501e9c4e4b26665067d38d09e9f127769108aacbacae1368a68fe744a979a7ccfcde5ba49c2f67dafbff4038b01c7fb4aeb761322da9632e6ea30d59a2c236361d3d1691423f7625feda094c10f168dba3c9a3b586f35b5c62b6c2aa27882f5dbfaddd2acfac09c0813c72664948d12fe17c3c73a966fcf6814edf5bcec92bf46c8b2e7f53ca0e1276ffa5152ebdd8e479f8781a04f6207e5a77f257e4911abdce41e1348c42769236056e76779da6784c6692a78d63f26feac50d1aca555fdfab0dca5a7a38755a11af31690976bdb84d9f845c922096470d66248e931d63196c2417811676588afb8b2890c9ba1468b6a12ad2dbf600d1391ca4fcb49a1c107a488181e4e4fc85ced9fd1c8f8a93f050d1be65414ca7820f1bb8adcd6660216322adf975e33786486742100a4abb3447e467ac914c73162f241d041ba7481732d5377f64342128ca21c1d7abb5a277a747f9ceb05f33c5df21525d68475d641faf05273d458886ef68f894a8e856b6f5d7ff813ce0f0dc2217c67b32d9c7186fdb245901d76c6ec7201a78b1144174e08632b8089ceef9dc520d874362ffbc9df85c6d14c4795354f79822bf68a4dc23483c3cf90b7ceb6acb5d782f77f7e653c33fd92266a57006daa1128df0f8aa4075abfb42479f18dbd1f6374f3d3a7744e77c11dc8bf1e8ec8e2634a7ab2e0ef82ac3b74bdcd9c17af54bde9e659a0202835174cd00ff8d875ad26c46b87e3c062948ae04561e08676ee4a5c2fec00afa5d345a9ef5f382ce4d62c6502fb9329d37e9545adc11aceb2ffc073a9352f22c36b1f5420e6d4bf28b606be4bcb70fb8594c2cdc99f124b8136ff443845cee3097c9a1eac9b8432efa2a2a5e421ad940a99f6bb4fb9fb9dd2451a393bd88a589e6cedf37db0922d9e99c0d58fb7294219a9dcfe390d9dc72d296c2212ccc2aaa5396a289a17eaae2cb84b939b6bc64f753dff314482240e1cbf95d607d492f054fee3c08cc30ab90af2b4f647a7cd9333c0f595923904dc1738ed18f40a5ca4c3f63acc3e857dd91627041e19b9fa5706304d52515674eda5abf4bd82d55719814e6db542b52c26d8fab1de5ea44406f1cf082df90a88743c2efe154f2dd361a305fa0a1cd5200f03a01da870fe4564301c81222abbbeadf9709e0f9d221235e23c49d315a531ec4d435f660f614ccc2de9fcf0da34e29b646b8f3749c8e3a64070c9dd56f432b02cb0a494eeb9aaa7bfe2b339c3d2a95a53525c64848b9f11586380c7ff50e60dd4d0772e1c32e1260c711c1bd5be2f38fb37a45b9b2e202aafa7324a24450cb7439ac54dd03f41c10ed9092b00bad9270c2279764cc7ac48e400f2e5ecd8981f978694b95d111bb91819b3678073caa380eb239572a219204f5995c4768097600fde288b6757a64be0ccaaefb3f8299060c8d1e5a9c0d153e3ca65ca98860e2a634bf41f102e065136658fe5f009f3ef5db771c7363613771fe53069a1df5e2dfd7cb332d2f4711f41d27790ba444f870e8db9134c4be6ac6a6b0b31e8c282b819593f64ffd2be552fc72d82f954985090c32a26ac876c624a82a348a32ef744aae139ca5962f2ec57c79c2e8edbbb05be8b80367d1c26a232a8abf220ac66f1f3ee6a67dfa5dfc7ac28512a1e4c3a341bd092df8403448dfcbb9cc87cc4c4ac963022a979bf7d3679b3df21c70ccd3d33da783209af6fad01b0084824dc877eedc2c7a2acfa06be8095649e111f3920d5153ddca3c159f3df5424db5aac928a38cf79cf4f6c39d2ec710c2344a1ccd6fef5065441e18efd1079d301f240c5c9a9b516b937381a73e3214ee8ae0dd62a791497fbb81a9a9ed9b60415bd56122ad04d0c09d1db065a10aa3650be457712f246aa4c46ab299ba5e72f279f95c115e1b6235c5e2436b800224ed1684e91d4553823cf88b8351fc2f90643fede1349bea7c100438624fd7ce64a5aebb319e32493abffa8e65731e3d81f6c8e9d8047bbd632ef1ecae54465d0902de4b867f44cecf6f67516cb018ffad2a2c842737e65eeaadfaf40bdff9c7794051f24ee59eabc64df850eae3e4b15b37823b34553af1b2bd11bacc35139ae366eb7dd5b77481a01c6a8b1a6ea92fb24ac68b26f10fd932cf2cbe18f6660d8b365","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
