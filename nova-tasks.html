<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Task Tracker</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { 
            text-align: center; 
            margin-bottom: 8px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #888; margin-bottom: 24px; }
        
        .stats-row {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        .stat {
            background: rgba(255,255,255,0.1);
            padding: 16px 32px;
            border-radius: 12px;
            text-align: center;
        }
        .stat-value { font-size: 2rem; font-weight: 700; color: #00d4ff; }
        .stat-label { font-size: 0.85rem; color: #888; }
        
        .kanban {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }
        @media (max-width: 900px) {
            .kanban { grid-template-columns: 1fr; }
        }
        .column {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 16px;
            min-height: 300px;
        }
        .column-header {
            font-weight: 600;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .column-count {
            background: rgba(255,255,255,0.2);
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        .backlog .column-header { color: #f59e0b; }
        .doing .column-header { color: #3b82f6; }
        .done .column-header { color: #22c55e; }
        
        .task-card {
            background: rgba(255,255,255,0.08);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        .task-title { font-size: 0.9rem; margin-bottom: 8px; }
        .task-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #888;
        }
        .priority {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .priority.P1 { background: #ef444430; color: #f87171; }
        .priority.P2 { background: #f59e0b30; color: #fbbf24; }
        .priority.P3 { background: #22c55e30; color: #4ade80; }
        .blocked { color: #ef4444; font-style: italic; }
        
        .overnight-section {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        .overnight-header {
            font-size: 1.25rem;
            margin-bottom: 16px;
            color: #c084fc;
        }
        .overnight-item {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid #a78bfa;
        }
        .overnight-date { font-size: 0.75rem; color: #888; }
        .no-overnight { color: #666; text-align: center; padding: 20px; }
        
        .footer {
            text-align: center;
            color: #555;
            font-size: 0.8rem;
            margin-top: 32px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Nova Task Tracker</h1>
        <p class="subtitle">What I'm working on ‚Ä¢ Built overnight ‚Ä¢ Completed</p>
        
        <div class="stats-row">
            <div class="stat">
                <div class="stat-value" id="backlogCount">0</div>
                <div class="stat-label">Backlog</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="doingCount">0</div>
                <div class="stat-label">In Progress</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="doneCount">0</div>
                <div class="stat-label">Completed</div>
            </div>
        </div>
        
        <div class="overnight-section">
            <div class="overnight-header">üåô Built Overnight</div>
            <div id="overnightList"></div>
        </div>
        
        <div class="kanban">
            <div class="column backlog">
                <div class="column-header">
                    üìã Backlog
                    <span class="column-count" id="backlogBadge">0</span>
                </div>
                <div id="backlogTasks"></div>
            </div>
            <div class="column doing">
                <div class="column-header">
                    üî® In Progress
                    <span class="column-count" id="doingBadge">0</span>
                </div>
                <div id="doingTasks"></div>
            </div>
            <div class="column done">
                <div class="column-header">
                    ‚úÖ Done
                    <span class="column-count" id="doneBadge">0</span>
                </div>
                <div id="doneTasks"></div>
            </div>
        </div>
        
        <div class="footer">
            Nova ‚ú® ‚Ä¢ Last updated: <span id="lastUpdated">‚Äî</span>
        </div>
    </div>
    
    <script>
        async function loadData() {
            try {
                const response = await fetch('nova-tasks.json');
                const data = await response.json();
                
                const backlog = data.backlog || [];
                const doing = data.doing || [];
                const done = data.done || [];
                const overnight = data.overnightBuilds || [];
                
                // Stats
                document.getElementById('backlogCount').textContent = backlog.length;
                document.getElementById('doingCount').textContent = doing.length;
                document.getElementById('doneCount').textContent = done.length;
                document.getElementById('backlogBadge').textContent = backlog.length;
                document.getElementById('doingBadge').textContent = doing.length;
                document.getElementById('doneBadge').textContent = done.length;
                
                // Render tasks
                document.getElementById('backlogTasks').innerHTML = backlog.map(t => `
                    <div class="task-card">
                        <div class="task-title">${t.task}</div>
                        <div class="task-meta">
                            <span class="priority ${t.priority}">${t.priority}</span>
                            <span>${t.added}</span>
                        </div>
                        ${t.blocked ? `<div class="blocked">‚ö†Ô∏è ${t.blocked}</div>` : ''}
                    </div>
                `).join('') || '<div class="task-card" style="color:#666">No tasks in backlog</div>';
                
                document.getElementById('doingTasks').innerHTML = doing.map(t => `
                    <div class="task-card">
                        <div class="task-title">${t.task}</div>
                        <div class="task-meta">
                            <span class="priority ${t.priority}">${t.priority}</span>
                            <span>Started: ${t.started || '‚Äî'}</span>
                        </div>
                    </div>
                `).join('') || '<div class="task-card" style="color:#666">Nothing in progress</div>';
                
                document.getElementById('doneTasks').innerHTML = done.slice(0, 10).map(t => `
                    <div class="task-card">
                        <div class="task-title">${t.task}</div>
                        <div class="task-meta">
                            <span>‚úì</span>
                            <span>${t.completed}</span>
                        </div>
                    </div>
                `).join('') || '<div class="task-card" style="color:#666">Nothing completed yet</div>';
                
                // Overnight builds
                document.getElementById('overnightList').innerHTML = overnight.length > 0 
                    ? overnight.slice(0, 5).map(o => `
                        <div class="overnight-item">
                            <div>${o.description}</div>
                            <div class="overnight-date">${o.date}</div>
                        </div>
                    `).join('')
                    : '<div class="no-overnight">No overnight builds yet. Check back tomorrow morning! üåÖ</div>';
                
                document.getElementById('lastUpdated').textContent = data.lastUpdated 
                    ? new Date(data.lastUpdated).toLocaleString() 
                    : '‚Äî';
                    
            } catch (e) {
                console.error('Failed to load tasks:', e);
            }
        }
        
        loadData();
    </script>
</body>
</html>
