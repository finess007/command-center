<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fd591f18803128d3bd3af89b673fd155443a48ecc07e8dcdfa8204a2da874af51c257eeccb1be2d5bfc1ca1ac5118c2db2bbf148d4fb3d4972310d61bb060a4593b21355435872ae75c8fe87d7c9bc5858279da61ac48315799b5c28f9a6a4fbc27c25cc0b861c6a6f09b2f32a2b984c40c4636eba2b909e45d9825b4443817b1e785ad55045def6b83b1b5049f08c0f94c1b9343015950007b72672a42f3357c41bcba8b0f83dfbe0ef0d3d07fbde0e3f29518ce147b64bcb783bb64a6b34eafff509951d43ce15cbe275a967da0d8bf164557b611a8639ef0ac8f31bb240ec0d15633b6e9f23e563abe9cd1f847a985bf8adb222b4754525738997a07a726f9ce17ad46385ba936c4bef24691afbdeb89f5d0b9f90fd2a9fe66a9f471d5866e6edc5db01fca1b2c5c26ab56518a876b49248e4ff65eb814ca5fe41fe5653221c5dfd60956b33f61ef6b3f3970f94c373bbd84307ed5357831b90de1df7b9a7ef88327dacf8ff42be8dd288dc5cb2c503bf6f30191edbf5c4677e674c18e66312f01f49a5c53dfe0508f08043a4749733ec8bc4c15e516b15d3cc30ce25101041e4a904f5c2dfdfc69b9ed7f548cf932278a5ef4b85ea4fb2d1c0e2b077ec0439da418d94f8e1fe0d09b4b5c84ef83245e987520680de60ac05a278c6d63b55a6767db56f6032793aab3131c6f0ef0d745f570e2f8ba749ab8bd1a6eb22dd8660ade0a60fea9ce6706f20a071dd7ad6648e3c8c05fb07679d18d8b34053e856b7d5140c567f8d3ddd80a7d949a47cb83e63683695200918554015376887a72a0655a8a99507a265d332689ca73e8041d791965ec0e8438ad74fa80bcbdd367f3b09e8a87c0282679fc7b331a4531913be321dd756c02def3d12bbb26a32f9b876f835fe01c8b2e7fb57240e4a64f26ae9226d68e357b03ed5064b91b85926f91de7568295e3aceaea894a1b37c5032695c2b6cc1fa19da1addba39ff8eeb1611147e311106a167e69c99878742d9e451e909538f23e4c2e8bd0b664b2a1003b84db52ff1ae7a50199e13475a7467201a1e569a4f35214fe21a26e924a267471ef1ad7a2fc5d0c6f524af0342ec5dc076788757e6ee4031bfbd153a11065c0347cfe8cb50e57958f43dca98484b631405fe348e457f9941c4f2d4501491f503a8e33afecf0bd4be9b112eb382155d981e28ed95b29ab27db6aac9c78bfc767cfdb6b01b2bc260c6168f69e48c2bd66b60f9468bed560a530c3100ade9cc3d95fdeaabe672ed1e2bd0cc13fbbe249ec3049afc25f990b39b8a6d080a16c9ce3fc421fc65ab9bc96a37474569528d680bf7d84b0120f78827546b1c8b4afbc66011bc31f7afc6350ce3e7536eec808778e1de6ccb7f5182388d3c54dc7348f86b9f5022c24efbe7f5560cad234204e7a4858d9c94ef926580a2c28d2ff7115755ba7d6d620a02eb587f0495bffedffa46a6fb6d74fe5d4b98de0d089a5045054fd0fd0171fbf46ce1383a7fd6bc8dd813da9e5a8eead801e970f95c3db59e70850b7cfd47e232e141f6507c9bb40dcf93b3561d32c50d7216ebcb325f1190be0493433b284b52b5e224f4013c36a8f7b260930d33ea0598b0548bd8cd80715c094f12628887f7e00a27a8af01f93d62fb9fc1bb30e5a62ee82497b8ff0ba938b179e07d0448154ef258b32919976af25751d9a7c28a451e63239aadc4f3df46f68457a9f22de688f0d81af4584d651d0d7c05ba1ccc51e4a912d3a2524b88b31b300160c8e15d4eb711da8e0f04131135b3a7213070e97b085791f7b4b074f45f1774b0f9dff5acaacb43b70276095bfeb42c2cddaa5857cf10561390894ae277b88dd68accda5f400ed4ae0515d124b88db15d534d0c4b20a1d6ec3af227d2b7008d80995047a33dd2104889b29da81f108662ecb98b84effd3899c72a29828ce98120b41bd657e635aa895c2febd59893fdee67552301fc64420468a843b5151a2ccfd4328a3eb11fdcde22ae86239822b8f9de85d6b3571d4b44e87d51023b5c88f90f09964afaa37e1ca94bc22c5880bce6b011981300536f9e5a1a5adda66da27f13571b9f2a8d0e6113362d46f353a7439295be215a8416f3ed2ce4993c7f075120a5b31bfc3d0d0964ab968f888c6ba890176e31f3f6254088b0456d7911e559e8a9692df2e4bad359fde27c97ccabbffa1e7c1fe8930d10d8161f1413bbea7418a55d891e5f11764c8e72c0daf1f40bf346d38f7ec1b4c0793fce2576c6a121af13c82fec893221ea36a11bcde3e79e7f71c8198f957a5f3d248b1470171de85c91f2ee3d2bc57cf2069da6ffb59bff6d7bd1f50d3f553bce224273ddb23f1c5e6965914dcea731c30e264e60290aeb49062c6931b3dfe7353b281df8d65c08ec11167c544cb3925d348b05d3d84fa33275e687837ff56c904daf4c682bcbfd8bd204bdd36c673da8d90eb423af444f603820bd94970ba012557bd899a7944d8331cc7cc6b70e3970206b941b08e9d68763895126eea79c4fc8154156068de0488e2ac8b0e309deb4bc5dadc35f0fe3e950b9f9a1cc4348e5aa9d0c430986250a8e6a8f3e0aae11de96a77bf1303389c7f766de4dfc5c6e889180f0ea866d59f76e8424aaf188eaab9a95eb7215e13b96a48ca86b2d960cae48fda3387ad24922f3f53aa104ec5c1ba363e6ff9ab9bf91412bae950e0f1e7118caba9ffe8953b93d791dadb03916e6847671108b018966b47b5e8f27a7309d25a14031f8b1ac7d27f662496fcbe2904e0dd75f3e2ff5e2d779bc21d8fc0576a065a33ceeab639e6f536267438db44060f8722aa59418a69010b3c1db7d1d18558bc4b9fed364ae597629798fb3ef79e33a7e64da64370e4a3664794d2065726bb97864fb0bd5150a63d9d57a1491dc769e1039145667ccf6db5dcd00cc04594b3f2fbf2210e2a787448631944c6319eaca5f8eb4244b14c44ace62d320d094e52ced7b5873809449809d380a4d266356a99295f568a04f467d70570e7b79f34ef3d818597e167c68372e8419819db4fc8e5cf0cd65ce5a355c74722410f7601f9145dba9d50ccfd081261c3f2aeca33d94cd3ceffc98e906f21d5741a91223cdc9bb2b42c9ddd92abc1c8311f28aef759e56723d288780353c38465a03093c65b2ec712ff68b8662df4365b03e2e05e28e63244d42fded424179f9c0928db303dd45fd792a2999b78d33f899b9e0e91d896f1c57fad57ce3be0e1a47a63425b7dd560fcec860dde8ebdaecadeabbbc0557e35d6c0dc3e544b3ee67672d19a9e054c386f89d63d4a0373194df0f561b3479d8e22453fd87310127fb11520dcc16a30c39fe6afa7df1487cf00146b14a46c391f0ccc959cfe040d2b63b6cd0477ab63cf23d9f56c8d53589682270f639410d362293a9ff880bac3d3d0338750568896611464e669372d8dd2b33d3cdf6f0c19960d751d0d51079adb2a73b1798dfab2c0827e69222c403f09a2e268b020b3f72b38e3457ae3183e81e40ef0b52c00abf499eac0030036805936ba51828404e3f6a30b5f40cbaed4dc8e6be9312440a4f7f04bab2343e1f1e3a7823e4116d29dd9077b6ef13df99ba34ffee0dc6f6f92dd2d47014616e643b24159087be570000a26f1f4e28454575e80f329cf377da76c5fc8dd31e4c4f38a6825ef74253cc35fbcbb1af362b2722181008828ecca7dd38ea976a7b7a3cf03ab18ffee413482157876c9bc63c7147b9e27555a97e27c6f8e202d1ba31849ddc69ef7c7830828a426c50c88a2823bb7743425971cf453e0d5fea4a78c45bb9c3e329be89c88cb011c4225d92974275b42eea3b0173b6d3b9656fc45c76c9ee671d247a69ba32f5b9756c695e8879df4bdabe9041b0185b48dd7450a5a7da6e8fc70ca0c0228e7a74aa74a1487a29bf7a07d305127f7589a50455b751998b9c887dadc3a03852313c995d2056ca667b68e2c5e4124fdea67f34e347f6f7d42054ac1020c72262a39d49e32feb2227899c6e9d1576b8a25b9d8e6746ca26232d500cdcd2ae1dae9236f6ee059806b3386174720706ebfab26daf8b6b73c424900f47690088468303219c78c05db8a8ff70e4f8cec4f1dc8a4d15e6186a94da2f55b8cc560296cdc93187c9e6807502b053565ff5441d06fe40b6f3ea98024c0481b3c597555724660dd9f42496c9467d2578dba1dfbf7347887d23581f7c39406ed5a83a29a5a2211eaa8f9468446cc9ee13d6214fe77a93a9150266ecfca91f205d69927c01dea9d9369cd7450f62d52a16b5899f754adb975f08d3d853d6941d9bdc8b23ea3dae97cd1376d51e98acce4caa8344058bfa8ae973c986414ff4e856eb1b7ea3df88814208d87d695d8f4bbf57b4a0f81030e38c3cc2447988682d47075c3f475d74a9b791d3128d9911808ac8d0a636873c4c082e07c68d9e78e34f719dfd7409e381e6dd5c68008ead2296b744e042a4c5a1132eb95697f22c73ac292c392604acdb42476c7746b113aedaa25eb4f97df494364dc5c3561fa97b13f3668d5002cdbfd5b87288229924d51898b3bcc5658614b1c784c66e677fc0b05dd786afea56a030d366f004a6e23bfb58b8857043f96287bec456bf6f7036b5ae017cfa525bf5430aa5835a7d8153433f394b1d01df006fb63e695d29afb86c49d98fc18081fc04e47bc8cf7df6f3192eab0f3c8f6639648ea370a0d07d2748cc01f5e034c41fbba037f046a402e34b3a6886c3a3a5895fc4d4cda8f06136992411121ba52abc59babb2cbb224f3e735fccf6bf955be4bf631a68069e68a227b9d5e1fb47e28fa45b41aaa9a4375842502716fc509863cd5754e649a419a370d1942180409b05edb06ee34e49ea89047d744de4891da2f126570ae88c359aa14844aa9833aadefca2f51d4e8f9a549faf0a71a528a7e7f9ed68ba84f9e652da2c9035835294fa1c6dab70eaf002a67288b731c1b1553c5df3511abb12c188cbd7d7df16085e7d1c26f4a9ccfed912bbd9401fe5847163fd0504d654d05dd983fcf92121c5923fe92f7d1f65525fb4293fce51870d86d643b30cb4cb2297a81498f9aec19c90d1f4f1554a3ff70cca499cdd207e34f3a3257e69797006718354689f1560912a8298300bde26a313c80411da52d5b81f85978ff7c580ae22c14f873db2ae3bfe5cf783d3958792479338dcdf828018c43f98f9f8c5ecc5f9b395e1ebdcbff0cfc6c4af502d350157006c8afe92a073ba791a0bd75d0243905b13ac1b7d530c2b8af917be31337792ca42e7036ec8b8ccc0851e5e68deff03647893fd52344b5ee3ef10e1ac0500e2af2728e7ca3dad8163f71893b9b914c1a0989b6b73dd41bd8f278a565250d809c35743f2efd44049623c235e18e08126f6d38abd1468e24282ec3e5baba614913398003aa2a4a78f5db37e8d62c67b1fc4102dbb1d4b5efb9c1e64863c489f8a330eae6f6de4754e92503e2e21b47b51fa9241a5c170bfe99caffc16e24eb7ce6c38d3c2d96589b3ee7d6bfcefb55d918933585791bcda3b34d4be3cf506e907d5a65ce506d780d9015fe293db051cde5f7e0a94d7a3d6f33b8b16882144ca96041359540baf1f0ecdc7b6d38bdc165e974d3c13385b060033ce19f79537ce778941e4c1fa7e7f6ae2ef6b3ce2a11ec1390fc650e9e5feeed4eb8796eca559611fc061df1226a605263a5f85155467671bca314b574b8365dd8692276a9324ad4aa82d6dbf41c5013827a202b48f8d0c572e3c94b29ff8361845021abb552ce7855081636881483802b7ac524443b39bc2fdb84c91162f5dd5b17958359f183f945a951398c1ddfcdf695b74d8b3118b3ee4815b35046c3b1bd0a008d65d17d52b0b57439f4ea3fff46b01dd74a3c58ba31ab892f36ba2db754607ccdbb99e37e52ffe0e830ce06a09b189a6d8c2c21969b0cbf8f1fb8b4cfbf1b56b59baafbdd7e5eceb495885d110f109b155512f103b02b951431b816f469dc6e6aca7e1ce18758c2f470eec92a34ca2b3ab7c8de5c6ad44e05b6b43e7b1b749048866197a2bbdbbae9a4e7af6eb2bbbf2cfdc989e1ee04a340ff512c3a4b745772579a72504b87b689a35ec3a128a8cd156231090568ce5308b4106d45151177a7503f79a81243f73f02b32230a12a6614880c0cb676273445ead97b30f6eb7c5046c8eb6b22b98d59f562b6a028696ba79e445348e64375f312c77adef7353b399145d4ab962a031a652c67a30ad27b7d8d7c774717552e8928d09e0176d48ee3535a05ba2b78302bf0463ec6f9ac0c817c059ad6a66d2b2fbab1f387fb4b9841f93ecccc32bc6e9dd76d4ca59f43f77e1f730a7a8ad2fc11fcbae045580a7e383133e6514466789b15a152292be3dc8fcbc6c1678729fbbeddf7c8ff9671d8fb10b71dcbd972deb853b2a63eb2d734cbd5dc095136bd004b7d686759baf5a3452b9c75995b4f3125b539d34703bcc3d6710e75762aca4a61aa0cf26d7b1d38e2d1a8e680681dcd143394e0583d700cd7258674baf3e23216f26ce6d3ec64d8522de1381722ac26bbf41128717db71eafc1816eecd6994fdf21890ed317e1d1ac849add22e5626997ed88469e7724fe25e75ae917c2c46b864832d9feec14d6bf81fe5dbdd32592ae388ee0857fe006dc5cf77d62795928af38e3b8294df8b2e493d2600d0c656a5b07c9443b9ace248959859f31e0fe89d2fcd808adbffdbac736bd87dc7f9b57aba7b5f0db06b19035c910d9e92ee210b7c9c5c5df7fa662b57c6b053358ad29967b2c09cf3823ac86a4a89cad5daf341e9a394d284419c8d2b1a49d193ec6168b044527794d38dc14552bd90aac5f172b23dac65789a1bbe2a2d2a91cafc98143d431ba751fa8a7e4f3c1d279d7e08233c9d4141d31c20374cec7fd1b001504e4c8e4330f67804aaaf1bf84dc5467470bdd132ce8424b6fc97900445dcd197171b2fac0ca042f249a16222016122773113f7d43ea643947f48c61da932a495207397f5a81ca4c8de808d1a55d871f3c7e9e7605a938961ca99561e188bb23241858241b03d38b5d4cdcf3da5b266df1600006bd968eaee0a73057f05eae1325d66314767d97aba027672040c79f5447f38df70b6a87a7f025a46930dc5a9e8af7674d5b08c6f7d8a60de5bf87c3eb97ceac16222ec611675d1b3221af460464d9bca2246aedc07e756e58259db46d7956703fb3492d829176dd673a0dd515f6f890edc0f839c2f5230d025098b79e0a781f7633ddf14c6e8d75235dd5bbb7c1d929ac5bffcc5e2fc1d68912c285b4f4216b5b8d4cf40ecf0a5426922db681acf5a626dde051a2c06342662ce4116a75128603fa0b0f836dd4364fa9a920451d73a0378e71930b1cf29f37b1b461b7e74e5ddbd9d9e921e1f65685b44d61f40d872bc1559f603aa8b6e5e96aa523a3eb0fedb2551960980457279d17d5ca454ed395b75100c8b7e51241b6c0c0bc3da00a47d66b689ab40084fb9453cfc96a1d65db60403548922e34ee034a7e9290ecb5197a4bd25600080a3e9f86f675d521838c7c089ad34cc232b5e39fd72ab0617db504308ef2f427278d114dede3f9fff605e70a098ece6620ced99051f78dbbfc6e394e701e1551f8170e66349c899c22ae8b8a93ba78cb624d1e53cefffd44402e8d2d3eed5ac88b26ac9abacc73ae38313b8b0de6b42e5b0440f95a9a8ccc72fd88d9efd388e4c655de133c86681beaab4ca77c98491ea2ee61dc0f6f45771773e454a17d43e0aacf4033aca572ee3061bcb8726226ab1a719f050e868ed19fbecd548a611b78755de50b59aa86dd5100f623cc677541d804fded6d5e98716f87f8f6738e0bd2407faae5dcfa8915a5750a3e5abc895253d851f2cba455d064dbe973b1a9898befd1d99e91e841644c406681f0796e4f31434994a32be64a5a77cd7310c2fb6e8627724f03ab02f08c21a7e0ad2ed69ed783fd20bd3f5831dc2b8735d61a31f006162489a7c7ce468873a84c85d25a4a8e37d58ffe6426d2e3358bfd3e3f717428c4d781a3a76a80636abdf55152d7f1202a09c825a7452a8c9351ff6de60ff0337edfab891196d4d6f76b78852c2dbdff0f8203e92bf844503f7104909bcaa526d8e67087cf9c919bc82044059d4524f39dd130870432a97248fd171b025d67bfbaf8695cb318f38ac1a8c9a2333cac1135ec76c090383d7157a4bdb174feffd594d2ab420404180440fc5ed848500f0d29ac618decb65c41fa3052d5431e7052e968e127302a8ac2492c3b6012be49c41f183781fc428f825435639cf18f541382c96365f7666fee747f3ff60ef8a4b501137f17a08be8cbe826e900a778eb6975b01f0c63d94dd56a714b5edac06626b38cae3723f353b91fd3fa8c594ae22e5564c0a514c497bcff05f4d96dab3391afaca13d16eec9e15c6b1a924b7b8b299e5066949270ca1a80c010eb8def8e03a1e9622e1f80cc0429468141c2fd4bd757f71bab106c684f2fe4734eeafce017056de3446ed9a36eb5f3318b2f3901573a263a3a8235a5ccef5c79ba705f7875c12643d039909b02984a807eb0e823c89c543ef2d68afbc3f22727d60fe1eb1128d1c684be561886e885252aa459c84af85ab4542ec8a05cc0a7b398375ebbcb66f4141a3b07235d735cf2f1a7a5c8a25b6003a3e3ef64dc45881edb16d162dbd65b5903b880619b2db2a7e67a41b35e1649ef41e2316071945b2aaed7b61c92e6e367f58c1d1481f70599177898392081d4ec7490d4edb40089ccc365198d6b2e6ef474eead3199feb69d5c75003c76e1798e3b3f7c4516a4f3f6a9be878e458dfa352d9fe5a2d79a6ec72d90bd4ad5a1f52374a548f200b8ee03355b6abe886efa87aa65a3fae86970a0d21396716596ee88aa05ca81f8f7cb0ad5d365f453a721ce12b4cfa6e769b0df9e42565d05fa588ae118f640fa36ca3418f68aec9c2d171f748ec954c1baa09acc591018d617d0c0ba61bf5dc16bd7115e82221330714c98c5db6cd56a16483616a7fa3999d0ac78736d924a1eb5dcbd216c5c9d2c6ac05755b37c6225ad8a9fe2f6fc86722a3a51cf96a82abd60768d95e489aabe8cb3ea663acb2042d9ed1e7fadfb53d6d118d598b5bfd3a08c2a4e96eac43b6d77916492caabe9f2535c81d1abbafa26090210263a7c06286ce58bac79dba593a6d7b169ceb2947f687378bf053c3c73286c22e44617430295291fab6eaa3d3fc1268d36bcce1dd5b88caecd53367eb55dc3f0af94cc79c581d38268bbe4cc08ec03796b83f108f770d937f7c6a9bf6fea4d66f2a82c506df3fca81f26e954172cea7b7382af26d19ccaa9b073ca0fa87faa56b1eac1ef6375efb52b4c3e1b9c47074a6e67dd6f70cca76b66781a0eb8431be77f5b646a9506ba748bf6b58a05024e955f0477d27718f32cd51877eaa49ad2928fbb74c2b2874b4b7d51df51796328845e9005d01bffc7514778c24b77f46faf7be378a073ea64dc2103910e65e008d2e77ee0ac06ea9222aa68c659b9c707008775db8ab31015ea710a3d0a984375173d6d5e88674411f8a5e7f1377e833a5f4bf74dcbe230ca0b18fb133b14cf4a3b0057f433d5b08d698756cc3a80f55ffa8feed8f656aa20dbcc542d93c2283263bb3e50ba04c4824d31b6f473996a33d1c5e0bb07d835d60509bfc4fe7a8cfabbf003361f45bb372675d0eb5844d60e8213cfe36253d39d8102a0a267d41afc3322917ce719d2f8b303d4df238b9e0c4c683f3ef660c7f0ca04418fe34fe5d5e2e2a86a7355cdcf6f1bd3eca832b403870cff166d1117491c1aa6ba3ad94db027ba3ceeedf12d8414bc8158d9d3f0d579d08aa57cc8ac9d21f272c4a550e2207d3f4669682ba31947170a0820f1046ad862a63c5d14b0fe48100eaa129d2ae07e2b58bcd6cc6901decd7234f429d1e2aedfd2a39eea83ffbf1b6abc52e682323d077b03bb2f0e61c8a61ab7232d44bad3d013e8ccfa23d0197cb5e75de908155e192e9950d8361452ad594e970a35554258abf7a4f5e7971eaf2e84a0f108fb8aa0d699c0e7aeb1f1d7d216bdf9ed37ef7ff1afbc756e247e071be133fc6c8bded6f6702e30c3406397551146bdd602251a303d109e237591594cea3f2b10a1686ca4d0be0634d7ba73f03c80a64f285ea9e050634b43401b2ae26cd24e92dbc198ff95fc2b7eb55b565a866f028b5834b2119fe5de570ba1f4395ddfa609717f2295608fd93b3963af12eec653eecf33e0d240875e7489124e7c43581de339bc5e25f11a4026d4d276cb0f7cdeb1c6d20c9da8a24b3e3d9520634dd7c6b0ad02808f6338224f20b544ad0cdb174cb6ca577b17f1b38a67198b7d56ae29d40a3607d930e8a5932840e8f054ad415a7caa1997764047199b983f17d12b73225155ab68809cddd8948efa03af42eca7ca37f3fd85f0f0bb640783821f9ae4dc6225eae3be863dbea8caab8774c0e11df9833fc9f07bf80513d2f27f342a42459058de95464be125fe7fbc594916ece25275fcff1fa90993c5bb008bb1ea71f08d3c899c107389855695017d75be30fe4fc7404ec6a2cbdf9c5059db2bc44e27ebbca6e300237b5a91fa0659b754c1c6ab6d6a8f3f82a31704488e6e999517f0e10a593a998af3d5e313c40c335ed20f392c309de3d54fa7598c3a514809417191b594079c4ed236d7079a7950c09f6dce9f7ac3f24a2260b5e5aeeb3ae4c08763dc93cee49e430bb9ba1a0dd17a8901064702aed763f90705899f384e29046a03228fe90daeb851b758f2e49c8ceccd81b832ef1216dc17f1304b8d8143500b67e13713397201e33e304cdd013b6f0cb05f1edff741be6287908f33a459689b5eeecd67585e8f32430681eeaaec14f3dbd278d828dbbb293339e80958afed016d86f2577a1a3ed5add1e5a3eb6d6f5933e044832f09cb0ab98fa075967ae0294ec5d833861f8268f9eeaa5f15e5e7e1380a1422687baa009c6d5fec63da1f0c8e5bfcf583d609238ecd6e86686ac76f2e03afeecddbc62fd9ceec1ceb084af9ccbb550fd743555af1a04553387d32dc9fab4734a8dcdc350aca6f0e5799aef1131e1134e35d27180cc5da0d10ce28793cf1d2de179ef169377d68cc7decbc7baf4c4a3c2c0f1175a72bda285bff63c1fecdacf53b1956f2e665c905f963c4901b1c7b78220eb8558ee4ddc6efa6a08efc718d1a3d35abf3a772748f1de948ff166103458971f7347bb17e111537408f0f3818b4388da88169bd302cca2f2c5e1a9e6fc70083b04cbaafbcb6f410af862304ee192996399d2a2ba2de8401973fa0c0e26cd599904cbb2cd75a5e2830dcd9e459a500b303298867ca88b25ea2c14b2d86c7cac852de4046b0b13f2dfe93a7c9fdd254310f2b963d7a760900d5ee9dff931578984c726da1b55adab9508c432e3b138c245f7c0851f6a657f61ce939896b24472c688e7920725a99c66d9f72aaea72238e2af609d4bafa810db29352d3ab0b341969e63162f0e095307b315f29a1a2f359a5c296415c1c48e489d365757cfab3e4d6b736e201e183f28c5805eda47117d0549908cf0ac990c3e2ae8e115b9ea4e32ba15db3c5cd1b4121a37bebc79029d8ce4a486d52b5d672a86cd828e252c9c598b6d57f7ea3b5c041f4db7ed83855002a0bfdeb1ea7142da518293ffb552aaf65011af13751791c5e7c00c3c9114ae6803a6f60d70c153665ff79f34e4dce0d25d650b5439371322eec0436cea09bd20ae7f1ac00b486c08ecb332261fa0b0905da08f2421c186b853e5707eb4b9c137ec2cbb3074b46c9f821f8d67086074f183cf6f76a3bcc59fbf2cb08ec7d280528508157b9e57c551a00e1b168c5194753c652c00630314de8424eeb9c34290373bc23e72d38b9bb02c4af8268471630a928cf66fcb228e0a509d9f5078315d6621ca8b18a3af7ee2452c59351cc7d931cd2509297b4b8971f425c5c0e63b9d171172eb44dfe22d7a18bf4ac6623481136f03c5a0e22d09bc39b394d01710c1bf978454093dc15b2e8810166b5d45a6ffe8b6d5901f9e23cf59d07557d1f6331d1a7a6ebb5f8dbb2cf5caa16c410a042d5158acf3737f4a0ef63ba2a9be689248b2a8d81adc7b9fd3d1f19c4403e5fd111c8f0fdaa9d2698642cc13a07884dfbcd34bab92494732babdf6a660ff66c180e36a14df75776e7b22d85ed462333bbb0687212fdca71eba8c80f2a822fbb6dba1e4ad8a579024a45eb84c7316223874c508eb791cfb169bc7009753a88fe311994f36964e729d4995c14fdfd9f06bc7d7ab380e87284da28db477d6d174e30ac621cc185f378c40c3bdaa405aa6fc7a2df422450cfb46cfb433cae959b0e83910a58096494bda90aa91fd4099bc60cd07605c4051bbc8f0ec1f2507dbe1a6d205cc2d1cb24152bec9541a815a1a2775f4c846c87a8b5bc9daadb880be021c659d49814849b5a6d8bc41b981df59eb00c34786f36e86fa269a025ec7dbf38d6c1fde5bf148d48d1c89eba12789178a7784da400f19816f95ff4892002338c2719c4cbf834d672548bc8783bf4e3a59eb213cc63fb856dc2f55302698164a0d32df6275bbc8093bc7525012c738a0f2b0b9a9c62e0430c885c244c34db989e65fac5b387300fe32d6a42e130b9ec21dd6794008e1d380eb481b64a0cd34fbbc7525d3dadc26ebe7f1bcab0384519fe3d31d9d273fd0b2deca5fd5a740b0d7a2d04f45ccb596970ace283585050f61e1fe7b7a7f2e7f8ca38883119c862b799df867e00e11f36d0d69559b4de5992bf19a4fb30cad9b79c0e07c6131b9c9e8b880e95d063ce3901f208d64560cdb268db9307b85bc991112483e4acd33b9b7be42a58d7dac7c3794fabc63b5cdf333d212cf4ac7b27d8798c3f589cfc17b0e2996cc1067927e1ca54eb4631c6f88bf802e2adb0c793b761b57e4aeb1ee7d423eed24938372cbc1838942e3b9d647e56659a43519005776951486dcd7675cc0e1fdc051cffa568bae37ce56a72d9738db628b8482dc5058f32964875c4c2b8d5123467441022f6c05ca95db5079dd0c9ca0a5bc52fc47a2384772da70f61503a68d17728dd839a4767b0c69c40758e89067b29b2dc0cc1133405ba5d3d199aaad952b553c79302d3fe622f98b580c087e3b1df318d9b4a1e1062c2500b5e6b21d57caa13ed38d3a95b8bbc6a023ed5801c383e467a727383e941f4c89be39ec8bc608e615040174d9e4408252bc3dbad28be2a360c56e97df1634df962d0ccc3014182625724abccf98f9e1d483b2f75393e14d914aea79c9a78c01a05fe95eb61bea4c8950e77bd989791e00eba01eed5b6bcb54505a4b7c02df03e0592fbdcac4e16acf3376add9acd3f23369723e602961bdbd124673e6ad99e346ddb8a0217b25bbfaa6ef5a5a775a8587741f8b69e2df14445ef21aed9a378a08a8160e702a7f17ad8c69b746494f7946fbadc19c3425894b8822d1e399fcc4e541eb725a17ab6e9f36077566a8e76a2db305a34e7fed52a20bd5b9bdb5b7b4df4f058491f7e35e165ab23e9100e88b6c3fa4ca8f1181fcf6f20534beb657d70707fbaa8619230f42655b8703826433ce4c8885cc636483309005f6d80d5c4ee51f1a32f12f49f535e664ec0bc3d518d7d0dda18be233bb9cc9cb416f6126c65e9710696d383dd334ddb453fb93859c7bddc3f2a8985f8fd142e495ee288f2435ab2cf7aa60d628c73f4725b68147c3abecb42110ce64f10f6fd669cf26be465ae623d1d35b2a828f7cb112c043b22b65b31d1cfc1cc0696d7e41afa8dbfb8fe9ad081b58de8ada88fa4dd76a0c6eef60707ba33c74783bb1b116331ad550da585ba77e680e720f22be43330579c7c67ce0c5e2b26c7a65ef4bd3ca5690bdd04c0becf7ef937c52c7864c0334a1939d3798b4d22c4c219e8e24318011a426bc270b89711b39fff7d88ac091a05576009081f3a3e13ec4831149f834b6967f5374f13ccff5b8a24d86f38cb0ff04a94e6f24bc0b288c44eceea9acd788b00c12537d53ac514153ce09524f48f2b730fcf584bda7171c1c1cb752196586d4fd0c7d8d41b5cd2c9cc7ddad4a06864a4ee5838fe760785c7152ed244a3f2b61abc73a1f49d6a92cd560d98d82d43823a4e0dd5b8adc372687072dfc8275aadc1844a59be2d4af6b6b26bdbe48724bb22663c04f158b89e87edd2987315588cc19b9f7d2b727abaa6ee13f6c9983445f51b614877f322d50dcf2e5029049ef45cb363af384663b584d8e6e1bd376d8e0351d1f3023235e90df1ec1a8778be9d4fb5e4c3f042afff28a2d05f62457cad6e0862916da14698041a4062f725388a3348906733b6485e4207e0d133c9402add1435bf699c49bf303c9ea577d900fbb825b0f3ce53713ddbfee17b4feebc567e7e3326ea6d83c15e911e354709ec8e706bccb0873de9cbe8d5553ecce746019310b86e4b9c22e64a72d385ff171d5641203b0c44324e2168999e79c7475926e8a0875d06459e199f2d4860b36f62ff2320bbc3d00368c952741c7c7c4bf4100e1babe9967d788ecc5cd95033073047d380be9f28b2cb85edb5341779f2e7b413d96c54cbc513979187f7d3e3ea3bf55bf333414042e57a7047b7f45d0164af918fa4812211abffba7f4c71490bfc890b2c8cccc60ce545a9166e8d62b8040a5b56a0c69e8725c15f24fc27a8a8e1fabc0b019ec930cdc2457a138ab77ff765844aac32b226be5e4ba2e1410cf9983864af3562b32794ebba51fcfc52a7db344097c8f39ed1654fb1d3a27d6e500dd5c66886a88328fcca046144fab356ef02c2728ba49d263164e5c1f34193148cf9240c218f045cc23c0cee588ddfef2d0bef14663a6f3b6740f55991d1d894f6659985ce3a548acebcdb2c25fcbcf72506af5453bd95985777ac8f036cee5c3fbf94f692e7f21efeb3a43133b424fe649658b8a885a0c6168f9fdbd678aac5a6507d41ba8899bdd30710415160e79f076147929052350e1a5329f01e31a1b13e0db110a22498c9446eeee0949f92946e5d596ea9c9c87fd4a57e1a3a49d576f4eea69477f0e598db30b9f5250169f2901ef60bae209ad80d37551a9f2ce24707b890cd70c46de0e388d96488ee8068c24c89c55ff8a2c679c1710c4545591f66331067e95f7fb2dcec78bcfba1668d18d96087fa8c6a4c839dc1d877885ab54d66666d52db3b26be55d0e1c5a184d61564c52750c2620b83acde43d5d2b335d3d3754ec6274b7f8af085af16764e4d6118b96e41c9b298398b3b1e34fff0ff3d374f2d1301a558a1c3ad8d59fe54d452e2ff83154bd0fa0d2d505ccb147f1ddc4af5d504cfd215834634620716bc312b1028ff6ab43d240740bb97c117bb5657d604e88b0cb336fb0ad1beeb05e0e86b77baaaa81d99f40fd0dc60314e60b0f92098739eed7320aa7520bf025eff104de581c54625896855d89852344d474e5e7ca282dd7c80a99bbb68c43cc6fa49f51002eb86889a5bccf1c819bcc395861c42a6a4c8efd26e5449d6111c1bc95c071c993fd38a3ca5abd6753182233149cd47a38950b0d8b2397a00fa6720645de6c2e5353c1d88df5c06f60c6ddba728b2d9c293ea32b8540ce829347a5e4b3181b41d87e1c429c130678ed52d2e1404aa26327221c63fe06f7bdbbeeb22b83d1248566e372dbaf93e7f45be4dae02321bd8dbce44ecb2a4c95b4ad6ec958e90ef6707a7af0c0d9163b7192d42ac36ca45d2a68a8f6fb1d708494ff5f3c3904477f27f032793f980b304edf51728966cc1e551d2cb3f9b04d524bc586db2af57fb32a60e85424727545480374e2c5a033444bd095e4a821a496185499e38f2799414a44d137c6e1edd44b70555166d0ebcf89980810c53f4c65df935b07db7f8490f87a0f22d46a464b22fe2fda348fc30e37fb09d5e5869df4ac0f4ca6c778f4eb0386fb7989550976adfbdce84931a50df2fb28ba886e8587063742e8ef714a762c1a7282ca2ee5deae0fe3d1f8702ec1872cd6f25fdb9e8301d0fe0f8660e54c2a917898889d2bc03d3a8d7ec5df98a9da4c188dff40caca24954e854ae10d2a6403a183bd8a6df066ac2ce6ec7d33bf8e4d4588f45ed9f64f984c15e99a0397d817a81c134e0aaa9b6c7b2313d36c3b16c4a8b448cc36176f4937c6b8237cee6038c9d281384de76605857aa706c501d99a539b25b3491a60259b765b0da2e9daab644c070393354626768903e6d188de11d3bca6550e1830135985c3faa1d1a806a5c63d622d278bfd9bd2e77a867435f6b867f220b751f9084b7924eb3a3b5450ac49f0613c85a61ee2b5adff622d2ba09a3b6735dd001cc305ff708de255184f679bfa26460d45ad507dab97ddd7cc0ea835e6390be780c08bc6af06e585c9b19f4172907dde8beb014bb04dfe0a0bd55698839b01761ba54c80950afc37b0fb6a541a137e368c8c43aadf77c48f44a90eb020d65b1c3a8311f0a350293e40e737687818c0c05f277160960099acaceb6fb0c38c8bf256389cb28d85a90c2d5689b967e9bc16c0b0f4d8ea2955efa7bede9b31f99c7905ad6ca4dddb20db1a0eb92af987fd77b6d730e230d8edc3d4a55fe68909138c48314b8a35498eb52259e1ba2893633b94a67e243dee927bf10833693ccbe5c5fd68c2ae7a050c229eca11e99d11a0c06c17780e5302f4299c0e51f1975820ec295bfb5eb6f7c01bc9aa82073a4ee6b86bca29270afec255986c76959b54833c3d861777ed425ff9c17089e340cfee7d4a80fdb9e3a1405c0a2992385d9813bb7c13f905128c53acfa1c960cb62db34e0ca9288311411c6111584707519dcc3061f38a9fbe8f823e0eac743225c6fbcd14be922604746c958cf271c5c5e2db5a9c501671f5f823fb4daa845d9dd33b2ab90c46969ed7dde6ff38f72331803c3f76682ed32cf2535d7897c3382932af1bdc4a7a8df56f4409c3a46eb1d3bf0b2081f866a2cc8f0a98f484dacba4d126a5dbc11212c96de2270a4d0c579d1faaba672982a1419d8770f03b8064a51b94f503dd6b0c5bafc4ef33efe24a5bd6408986433399a9522929b229ab26e2826be348c75773cb33b2911b1d6b00da348fd811ff1a744c94fa6abb8bd086f794565e8ae949bdf1d348706e1c55c0274322861c0981536d7390f8436e814faf4676307285d00f5028e922721f8a29f72e896d15a6b17f530f2fb778ee6bb583e74b0dfa36c3d536ab2c059d3f55c0b92880300209599a04e882d8ec828457471ea198da6dccf0a99e844da5586109544b006c50661c5743f6d4d2281d43a81d8def7109fea9a995e5cbc5130907269847486fd2605f8e853825bd6171705e3dfd0a1a9ea0a81c3bedb62e19cde5e59bafc63c3b9ddcb5644303298e38f3a572ecd7fbaf9fef2ea587d827a97eae522d6d992a41930a25bfb51b70b034b70aa22f7c0189af06ee279c10d8eb6226644c4069568a1da5b7e9e763dee2e4c98b59f2e721f7c8c74b8203d35f6c9065aa652c1c2fc09d2c16b7a389d7c91cba1403e8a95d1ded1d386a1d6fecdb90ad4e8b274ada74b613cb9b2ef824eb0faf3d26601fcfd71bb5a4f71727330e95ffc0da2c67ce74061b8daf230f17b1b091080aa2c61006faacd097cf9c722afcf7348c6ae1c0414c792b73fb34aa694ef8995d09c54a4dd3ddeca066d32f0d95cbe0c825fa60ae377b7ce7f3ed95bc6c0a4eff2e13be1b97dc6920776db3c1af2e04ec503709bb1a918fe7a35b0fd907fb115c65ecfae05ca9b9cedb4c574f9bc34dd96de6b7f75ee8cc62cf91f0ef7b2399773126790cc54dfeb7b7354c36dd7526706bb985f9d23e3d01493fe8545503633692237dcaa18106581c1d0f33a27a14d6dd06f5d03a5d0016336873b122a50fbb43e76e94f82e0fcf7ef886f9067b86d0d6f7b987bbf37e3c59a61e27f10fde1493714a955bcbaa5ddc209dfc312d6f61e65a04a483020ef8193c883327589789ec9716ff5618005063719f694e6debce0e51266b81a50e96d995bcf7468750f5cb9a9c082bf54adba25db09124c76f62b8d93e6d2c1c9bc8e58c0b43fdfc82d32844da2a36180b10dbfdbef750a32193f1f3745ab8de2c3140855ad178703424b2b45c969022c4b596f5a953d09b9c8e03c002a7491f0c02df3515d1640e3c2e66cace212c329a741248ca390df6029301263634e4871de58868f9048e9c158ded9ca392920e683370fde585322c1ca2915990fbf243817c783da07294b7a609059a9c3995bbed9ffabe16d01df62e60853564a19e7fa3dc238e257ff02a7a6909580f54bce9ad12ca2f6c77afd651cd5c1ed9b4f7defe9fc7a68db3960268cde43b8613c80e54e08a42e4866c3b2e53a3312f0d6f02a4fff94459ff631a318e5f9bad99efc334f37905a2ef747043d62e6fe0fb0d900d546fc14621e7e1d0a6c4df527ec73137c93c04870cbf6fd00829886a35f311930435f3ab8eeba9e895df0e350185db0f3ba6becbda9ea2ecf83b57297a6f6192cb80980190ee5fff9429929f9af0dbf6dfae4a243f54d465435aec42eaf2ee92932b05eccea78d13156393d49c0376d2fb6eacbf7982fd54413475bf4cbc83a7aef9aeff64b419b5541a97f2850481027347335b550b379009397de889e11f18a2a40bb370bc668c4278b8a106ef4c81a85ca68cf913e8f1978fb99edfb9aac1555352b484584523a1ce516d6357de7ea263bdf7d56d09d0bd8b1d9bddb1bf5bdde0c90b1dc07dbf350a07d8bed4a257bb152cfe2cfb3e9d96b38e0a888f7fc9e3128cc1398faad71bbf25a810b1702a7ff24d9dcd034a44da34b1c1a81a1207da440b040c1e991183b81a0f9e580523537fcdb00410579013529ec2cb15bcdff715a12faf9aabfc61152bf9479ef6f7b49a56c1370d95071df08a4dfb0ea2f7e9f85bed27fb6ad48609958b07485456c2b9d1a20df3b117822dc5636825ab8bf0e43a5f06b10dab8f3955005be25429a7119bc1364deda7aa8590b4498031b881200349c42f85680b5e1f4eaa620b378416a25dc22138185649a9e4e1fdccb0e82d20431067bad3898cbc4532cd52d35ef8ec18521ab2f34e18759977d313e66a7b4ee41c65dcb68320ad90ac6d24614f449cc22e3e1ef0bc3eb54d3f53c19537fe00185b3a812cfbcc8e94c3415f4b3ae679b84e84e051c28f2ee53f42ce0382df0263f74a4a382b062dfd0c92ca3a15bfe09b3b389ee8f54aa40295daada4ae97fdee560eb4ab48f9dc5a7fdd1691b30d17b435767dd5f29b4cff83fc51e5c3d75de1cebaf21e059f668486393d4be4ae392c542806a850ccf7e847f627a373a829f612445af0d56e7fbe3256a90b76377387f7281728b8e4462c63d85ff558ef0a57b4ff94f034837a152ba54078fa579b2f799f4d49ddde861d5ca80ae3fcc723cb8e5c1b704e591ca745417d0f128e052971de764ea1aa4f2a38eb574ea5b527f1119c49038a4b2dffde9a6e58eb49f69a2f5bca41c732f6ec6d869b44b6b8c4477012195d121980155e755aa3e6fc8ad809b8d0f05817e5670e8bcfa1c3c91a96bd857c058205a4f1d9978e18f48d7d87bf61032a81e61d17a2e2a3e0c5713f532c786a6ddef11e03a49a1637aeb2f19dfc872c29a8bb6df9abbcdd4224e0408e936c97e67258ddf554c559a59e57e06dae5411f4fa328e562dc7db1c8b5f47d5c288d4b12ee53cb9067e205bc20ed70082e4e0cc9148da4b4644044ecf15f786b2cfba6ba1ea2a01b0bfe1181eb8bfea3495b964c56116ec08593c576e2c19582be7642c627926d6e775be4839dbaa3bce3e173ee2e86dd33cb8cbe2b5215ce2e4df24ad9e47604e2a3730d303557d4932cf02eb850fb6ef2945d8ea19290b81b214df2c55290afcec236ee942c6986d535e429e47499215869e69225331b32ad6ae82d4ff9a34fa09a26bef27056f31fd81b5a15bd9ef2b59e333e3318f3cd5cbd7cb0058a0598569d397868df771069c7b3bce88c1910f26097d9cc32c4517767a28c5f9827b569461506ba6857c31ec7c0e2de6a4b7bf97c3b312c0abb","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
