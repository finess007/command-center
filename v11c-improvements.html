<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c40b905356bf6612322f312bf82607fb8beb68d6e6dda55e245b23fb6e10c6bdce0ed90f9f6b4249232de1aa4728a03dc96c4222f8d5278d6eef87ed116877751738510a198de8a2aec1b1fbc189da326c41275e62c39bceccef4084745a6e47fa1dfa93bf3ae0a33bc4c3653138b2a7679ddab98b45cb016fe12f8f6c3a31eeadf7fd73905d879b6332b6644fc4a038ff2cd81e547f3ad4913d9bc76d2299b615d8fd0f910f316d84e0aef4bb67581f9f70946b366789fc49f5d09e38ddf9cfb7eed2c6c97577279efafa8adade6a3c5a07171e30460f2a63bb9dcde51ae45f65f4b2d96581cafb2eb8aaeeb1ac94c8210e582f0f25bd0858204d5b8dae0190df1fb49cd277ef263826295e917dd4a1c11200add993e5f95c4b28ec78d531f622630d14faba39eea9ae0bc3cde83594a66c598d2cecead2a27b950cbf30cb42ae31bb8cf94be50fcc8a9cc65528d8f7c174b6cfd8d1383a6f41aa9a07992712ef897bfd7ebaf7de6eb2b4f6c6489ac5e1374034e75e70909ed4c98ae209bca792e167507bccaf4ea56abe62d37deaabe1d52ed2e73f80d9e902b65456a466e1b98bc4af75d9cb095ceaf3aa339037f6ba92678a142e90ca49fcfa289776a010191536cdd9d7a3022f17efa547e44976e6896d3d644ffab695c27d3f28799141225f2110b79d4e44d4e2ae4338d12706c0c5d2ffe0602c31e8ab90d4f2d7d078fba53baf54d9644379d6b0e7332cb2035b05c8f01f26fdff94772720ea69c6270db8699f0f1ed2c2857d5f49c06a56adea6991d99e0f1010ebf39b08ce1ae885496283cac8b40ea33b46d9a7fb2ecd604f238e2245651f3827095e89f3216693da63d5efe1900ab98e81418c86f4ebf0b256c6c067f49daccb42b214ad26b3ad5c87e9295727d643ce2afbc6ae1ca92ae6479ff5e51e33847acd1811963732b7d59d4d961bbfec77f6bc9f3f9cc40f0dac5e407e4dd512c2d0a7a180a5965c1d91852916d8dc116de6b7d5602cdf0663edb801b979c60ebfb1d6fe69c50ec5becde64b80d4692dbea696380a8f015431de4341eb40af2e697534d5a8cb4761d3e9d723dfec7db34373ec31fe6b061c09e8458df20b9ee5110af2e4694ec55aaf9d4ea7f104a6bae53605e4116490cc93fd234519b2c93828f4174dee1dfe28c852eafa08193e4f1e928f4bf54961520f28e4bc6da07973f773bfe012f483d4ae65633ff79f24288d6f8c237e3f17e8cf9c4228c52605d44871c6a82cf0b643540fc7841c7629086850bc15e02bd6d88829c542c7cd2afcb69c65c49b9e555d9fd0ae45f57a435ad600aa7e93fb98bd806d06094d1a6061c8a78ef6cc3c09feb75c9a73df765e346365ad31bde9d62a1b75402cbd656fa02401a1a0af82079d074d9f4d7df8a0eb1cb9938bc0bf08e74ea45abaf358b21cc2a25abd1c2f6b820d73a37138b106a8cc61d22f0e6f4edd359d09feb0f5963bd02b12b036d526d13baf7010e03ff261023be2fda2db7d74238b1ecdee76fa3fb60051fb01d9347711114a8c7286595db8c59f305a4b7844ad4a556bc993712473d44a24147badf25f976341bb3b9a8fa2258453dfffbbc894b899c5422fc3ff383409bea7667363543877bac29060712432ce2cce8ad4e63a094ca7e4cea1b932b51b70e2e866cc77135624cb564764be24ca908882ad852a6548fe363a684df241aef8a9b4b1fef8bfc257eb59b3c7acdef0b8d1c04ba7224c36793a1cd0f370fdc121077bb29decc75b28aa735caf4a91a3f52bb6815e22bcb9f50fef7e75f80125c53652408b80c7f15bc0b2d32ea14bd3909135bcd7fe16bf199e9ae0327400f476ca4f7cbd1f1da702272d2e79d8deafb6b1fdb05cc06faaf1462edc7f564ff9d6117a3eadaa76a36e1eb835aa8a1792d727589b6721d942914d05502ad21ae54e0d69ae3ac9e2a61ce50221ad92c9e82fea901b08e4fb99059e94143043392c38f041055a8f2a5ac0234442be99d597fd21b9110924b4ad77ed81033bb73ba83325eae71a862fd750a1e38c14157bd2a8e0278b29387e85283e5954abe373968e3d1cbe014f21804b5f62a8fb8895edb2f8ec60ded75b625e86b4a27541d99618cf4c8087703c7ae517442a485a4ebdda50d6c3b6e27d11db881a6e62cf41631edf4264da7cfc1c99797e1ea6b2d286a628aebc9301de48941c47eb49cc499c21c847226a0ba494894de6ef05f17e4c45c8b008142f3ce5957acf6a8f60b818c408ae12ee10e90517a94efc73877493f307385da62b4e099c3172035b05df4868fbb9921c30afd39e5cf22afe929614e9192c43d307a07b5549e83ac6c481eb077bfcca355639fbe0842b06d69909ff34528d694e687e97d7d05c76b68c507f3c1cd94186f577aa160db940729db4bbec68b55d9c3feeb50d03b6bf4ee9aa502b030d1db3c7042af9e6c954a30a4726332b228e8a2d2a1fca75dfe16a74f8d0b6d455327a4bc4877e83c1f3e1685d0762695c153eb7a45253f43511be45fcd44199e6e2b426c4cdb64da4d4de6acb48b230ec93e0d1ece7dc89cf8e85d233ad239f6efcbd353cc965d48e89295be34ca11c0c3c17c4dd3e6dc5022e1c6b132e4f5e8296b2a7139cb614df260ee12aae7cac909a8f7c06e9bd632c2325245622c59e6d1f324a5038d2d930e2fc369cdf13f7b9c50bc07cbfc71042d706c7c09b5fc98b27fcbbe286e8e84a77e9c65ae7acf20ad7eae7c68837788c520946c0f7890cefee0a165ff5f88d017cd200b1e410e36c76f73cdc3b1ddec71054c56f72905aeed68c5f979c29425da1803f7c5fde6e475e35ff938acbc8b823328c994ae1c8c536e5dd3aa0c2655ffd49a77547bf547cca7c5b8132b408b298798baeeb0ca2008eca8cefd0961c6b2db09f3f960edcc89d8024f79a9d48c2fac35c04bdfe46929347f7fd5ad4f3795fec4741e7bc0cdfa246a525a15499c65d5fdc22907796243d70feba769b48695819f43432203b8b65c3ae71f73bd904f6e43e8871a27abef69fc58b9078598db73438b96e3dea0d95dd64812e008f993bcca483cec902efa94d063da331682039fd59c79763e80a3a7de3a89f7e3db85b7436f058aae241ae2890db2ead8900b29665465138f819901efd31219ef09eef1212d9f7a80fb937aacb0656f4cca03c7e872ec6c3c378b059063360c59701285bfc1bd824a1cbe841dc0fad730e7b601cb65d3e0bdb7b4b1c2bba94d578520adf7a3a7d2611a0618d7592b42801c19cb4d8bbddd52a499f3c8eccca526e8e6ee6a026dcd97debf097e861a6c593ff8a5fd544ce9dfb99076bf7e890b4208a413e7800f4701c1e268784673df0c180f5be7a338fa579c2a5491cfe464cf99bd33288cdff5dde50ca75a623ff9451e9a6e3332b4832e9792352cc8908e0f280ee654a1af6a07eb18c30314d991c904b440d56bd14b7e4d9686bcf36453d80fa7df8d3d4ec81c4fadfd35446cf254318c98003e219e0cd862cdd758902b31ce1d613fe528dffb94b5fc79b0164d1a956f48ce79b8177ae809c2fb25ad67b3e3bb9216932bafff00cc54e5a6ada27e312cdf7ebd53f6b6ed3b6a0171a560fa561f493d674ce6ff3848e3928d4c91e37502fe2bae45a4387df53f6f2c1aba5eb3d5a691e3abec50bad179521a1fec4581f316dd1e3b6ea4bd3b9b8a1761f43dba33d9d2d2434c457b60f7c97fb5be8402502104536fc0d25192442736823a08a9b8f77c11a228b208400f1fca36b80633c1ae2658056d1832c15503d3b0948da2d181532736a29b95f8312a80d5119608833a546d00adaf5048bde385d1ba863d64cacac76dc05caf02a8ff87afaad6cce9d121b1c1a3dbf66e79877ff12d39f67cd81679afb06812df2be38e6e7844e12d3174b39d7155ff374944edb355136ee33ad0ed2daee974e32364643585fafbfb68733acfdee315f4ad0ea2234714957b4382c656ae746a5729cc88c06f1b3e6089a0ea21ce3e385f49dbbe0d8c745427cd34751031bf65c805c0da4d46eeb6b3e397cfeb9839d4c9d56e1b6b6b79667275bb4f8de047a434a6e841ab6ebed2d148e3883594372f1ed4c154c164d6f6b0181bb29cb73e8f58ee9db17e5170ae0dbb12d28af67fc11d0bc8e4793bf6bfd9553d5ba6b7d1cfd518337f5031f70a287d766079129aca785472e4a8d14df433999d81c52a44b531ad5e1cae47e4971673aea32a21c5c03a3bcd2f49c5dbc7b139546cda9a13017f0e737b533c9d212afb233f28c08eeaa148ae22dba107144b83599d0890995da4303aeeb1b57a1bdce562c5d0c4d6a79bb4b55eb3922cebd7a0c4bce0ff02f73aa1496c0a47e79f59e53592cad393c968d081033fe93cbf7df56f75ad522b490120ec51298df2be78c8849c11d377488be8df07d578fa5ef0f4405a10bc6affaab13c5c957c1e345b331d4877975922a3b977d4024d4a196a7ef81dec5b17139ebc2b10d826f2c5e2c468327711c2c14a5469bc554e2482c2bff91364c09ee70a4514694392a3a30c17c45bad6f2c8e936b1cc34cbdf755a548a0d340d4753bc48d03364b0c6299ffb66d063ceaafe97698812e6e43ee2c06c9bd96cc8032f00ca184491703a15c06b3134ca3ba18182bb1ccad54680212025debe33e3ee5475347139e4cabf8ac2c3051ba97dc5e12a6186d820f24d346b57605e75120614686db6cc668e08fff85eb812653ee34c87c851b5dffd66550fcac76a4fc295ca9c524617645079bfb8175d0f1d6eb62c63cde5a7dd20aa7e1b4caa002613e90d1e186aa61152f6a12d44df02b6f4c6ed8af5f28aef25686548c64d0703a9ee8912233f151af93d99bc0199b0cae88b44f854d58972c6599f3c9c3dabf87f23b68377341e19c78365a5b47bd2a81574c2f19bd8fb94cc0d0afe5d79eddd55d5a3935f87f5e919b359ce08af73bae2b6e71e31ea93f2fba34a752fb0cec7f78e6da6a70a556f1150518bb5431637d9419ca44a2323f909d79a4bb6b7593f75b17969a138bee7a87dac2f3e39b426deb88f3aad9a6063dc87c36612e9b6d8f4ce31516904e769ac45bab7c2b49931451d8585c71bf62b0052d38fa91d021b2bdbac30e8fd90b7807c4178587d31cbf7e620f07d490b66666c79058ac2750c9add8e99bf1ff93593ce86f14ccae6eaa4c26196c36af25dbdc701ce0ba86929dda5a5b3d1e93ff9db5c123e27afa42401cdb7263777e8bf1b40e65da82e1ca0211c6e9e08683e9fcf7a8baf30df2f96be827279868f026fa28eea48a6b74785b9a06d318a09abca70f900f126855faf71a6a4cfad4ff53143d5da03c1b1abcfdcd6cfb9a646f8f33f9482c2c5f361659bc168500e5980fe819e8a918ba7fe179d58d1d4a8f6c4d6a5d1e2c210f1d9899c45d390ca91ec73dbe9c7e8056bf9f6fd7780f32befe71ce440922a8ba035adda15c8b5971198ff3cb6bda0bf3691af668dc0c9bc863912996787207db2faea7e20937f552aae469d0c79c7afe52a1d3ebf753c7fce2b35752650697b65d863e968c0c3a05c0ad45222b110adb2d18d4f5d52a150c84e851d98af8fbc52cb283e07ffbca1ffb74d4206f73450ad15c4ba2c85790df07c8599cf73af4cca81e874d5982e82c02181cbfce6e30da913392c7396d3d5c0d30852b530fa7da51596ab78097a5773cba7968e9e5aa9813612ef0dab70b0c0ced36d85460f6b099ec4540e56bcf171b1db557a0187c60b3e0d0ffaef5d044b52a08885bc73cdcd67c8832b070b01d55cce3fbf2afebe46ce3b5d3156e3d83e7deb74c2c5347aa2f0a263f3322a89f38e9a02fe480a079d4c95e8fc812fadcf963e5e57b5ac5252b915ee2655cb0c5b7f27a6c9adc1bf7a371c900d65342691ba0d2eda80a29f39bfdd220bc92fff9db5c73a589573bd4d400bf688858b971baf61015053028b8d402a480b78f6105d95489d183b832282db67655ab5433101cefaf04cec2e4d10a1cfacef127949d51afecf806b8086e8669bec771619a627e73e4d938fcebe79a3232a0028366acc39fafbf69c84e648cb177ef76f3da9b4f7e29a4e14e16d99bc796809b7362c38a746943e6cce15d38fd22eda62eaaff488954a6c42ef8c6f1b621c2164882c2e9ce88d120709aaeb217a110c03ab07ef501dfb74f6dc4e50e9c7e1b262f8b85586d290c40b07bfc251854305a9e11f37edcd67245a17eb809e073f89e89dc24903588c4ca0c083bd4c8f2caec8723ab3c5a3e0522ac0dadfe6da932ac5626cac34da3baf91f41a292bdb6b6b894caa6aab19d9509aff496a0f6a45c510f67160f7b69c4073660ca43dc337b357e1915ad81e539575c5309b9e3fcb9e3b8f3c4b996f597b502797ca159d890bd9dd5bfca8e39a48d4e67be9e0afe07f4343cda391cf4b61f08f62c123d1d86b6aaffb0a8252cd0e64355563ad16c6e6a2d19099f534897c952e636ccd284a1662e4912c28791a1f24d7be9d85c9fcbfe4ba881f46dce8ffdfbac1203ba5c6c9b17a97405d9c6a45442c9c5c7707e2193ed31edd2ee6f013be7518a9df1ddace87b3280a3f43a37ba2593803f04f66bfb00da891f4f9c42276a905d8765d71568e12216688efb6e759da2809b151a889eddcc595bfdd2bd1a0755ac2179a9f3f116206d1299051dcef9402623823e303c67ec201bb97f9c18e917ad4843abb83f71d80a9d855c818a80eca72ce0732a2523fa671a1af4ea5cc3d797bd6e161a5ebda104539c0685dca7984b7bfdf2526d7b252600a6f098b3c05cdb1806a911df522194fc367f7e0cc12d3887edac6b74bc0da9e1a1dca04bf3b2e92f78e39732fb0003ee16164fad73e131c567aa145f3d898e62532fc61aa1dc5bab237c26f8c98cba334a269883f5a3ee59778fb98242e3d75b766b1fdc5de41b523dfef673fba68643adb41b65d2e2caf288ec78d6c655c20b4166a4e60a571ed20aabe09d9b2c1b97d20a5e2f2bbdbef8039ba0bae19ac7d657f56fcbd94f4fc34d3208d24f651d2336734fdc23ae5f5faaf59c006cee6f58d924cd23986854e2bf14d7dada5aed0c5265df5bdfb51dc6db73003d8c0f324f15b47e7120e7f603c11641f1726cfa46d33dec94df88e9bc7bd7ee852f2a4cda6bf3a8768899bd61e5cdedaa4b707dfe5a3dfdc9864e86262203fa80e3ee7d31b75d936758898bc52af16430316f4cb0d5ba8505ce4752939d237be39e45a8562d583604417200a2ff6318000839989278b3ccfcd078c7db08c239bb5427f38c6bebbbd569272ed1b111c2bd5f3e4ef0ec66cfd279f52bf8c7a9f8ba164409becfb16e3e902272c74286c0c42fab5e74518ce13e7d988c390abf9fa19bd4ecbbc16a803794571c254e510ad791a2b5c1ed3bb63b8bf2bd3688e149edcc0fae266ad646cbd4605807b2284d6cf6da79b54cc8b67ecca1120fc2bcb6e22b759a567772f890159c6622320b868aef5c1349dc291c5f53e196f4fad736eda6eb91246242883239c5da537dace2a1a7cc25e4897c39cf075bf8b1f5ee670a7ae12ad92e21a5cc8e2636cfcb58e860b5602298a52426c297506468edd58b88228db29085faaf3d611045813812c1dd78791f9f6338e0c147aa292504e44f4c5cbe1c40e2e60659693b28ad6b089216fd738d4f3f6e13a72cb78da237a7623f9a76406553c3bbba2aad12ed4559675df103ad166994c2e82639219c1d1af44844ce4d3342e88be31dcb79e75baea3780c718a37c01cb001fd0cc43aff7699c3be7f4af754908e7ea8034f4d8b8016edac43c91d4f624721c5c58298bcd78b431dd8e6816d84782823dc7873abede6b640e48c38b2c2290a9ab9c583d48560a5d8e9d45b201b8ac77265bd4046fbbfac98b7283ab30054375d85bd998f57219aafd31e423b56ee9366c305bd289ffab9e1b20819e54124db2133046c2f9615e529dea4ef681ea614939c64f5eaaa8d1bf139021f6ecff2b10d3965deb8992136dab128ad3ebe59133c12ffdcbe5c45d2bc8c8906849905ed6e366908061da6ee3d3f8f8b3a79378dfab9b72f08d479f397e380254c29ca095263ec4857c085f3b0ee866f10b7ff6c4fa403b472d098804d3f84638b46bc4c79099d323655f57b12b0d5d055f915c97ec3d79e62f3554cd4ecac8a8c646e5a630c32d1d0c5bbd36d468619b0cc854bbcf9619dbd068d73ceef52cfe56ae3bab72de3f4400af8cdd0ca7ff065fe8dc8a79624a08d0ef5d50d9849bebb303517c480948295b72398bddb4d9d62bdb8dc3a98a5d4c31209e50b47eb879d62d0b2654b782e38a5c1ff3adc7afeba0c45b9d0ad740695fe8dacc4a62ee53d3ff3238ba26e588a8260eafae900ed4d2ab8c84e026c6a6b12f99033ce706dda657a195d075b0f83ebbd90aaad29040f90491dd74fc467d802ddb02322f8516ffec9a8ad8e7ee51c714b9996bce2afd7316dbb8bfed9e27d0ed6c0a4ec0e1c030a59aaf4c86750eeea2828404043e519d356a5cfbbfb4d484b8d9cf0035e23efabb17665f583029f2eb30b6f9adeb53e2cb5951cb5ba2384bb5d51ef8f26742798e8e306e2618031c435b7a5a00b6c6c6985c71296959093f41a232d70b87bc87846e42c59e199e6cc84b3f9db14f582895972109e11d6a6af76b0bbbbc5002680b1c7fab18142a53998b6f0e7f37de0e50af34283dec6760d0ed5c83e73bb16a6b30521de116ebbc388471b3c75b0f919305a86ad94c6f0418d1bf48339e28c61d35131f09be0e7c04a3dbd9bef2a8c92da20d3b2e7b9fc807418d4b9c45cc11d9ce115e8f6317298ed013958ae97280795939b7c88cccc8453555d12780543a4a984e880881a243f06de718ff78171e2579142cf7d9d1babb3ca33354f5f0937cc4a37b1f130895a038e64b39169bc624d7116db4a11eaba33b82c038f23e9a71da096cf32ba1843dadd2fad962caba51593cb419c37989b8d27902e82a61a76b82526f2602dc339a8cc9593efd13a6c1c1c2cf6e9d08483869ef354ec3606f5fb1a36f09f4f1945f8561506fbfcd2708e954d718081eb59aa70f3d1d7d208cc6a28d6d321798c48e7917d34cee8bdaa379e4a833ea8f6dcf7dbce2d79ae6152913ca042234d0f3bae942d7001d2e917a4ee143c5d52c776c58f1931aca67f9a4ce8c1ca369dcfd9911ea12f65a9ff137b0daf683f27e1535d5f696eadfc10c59ca09b6d9406d00cc38f3f4b0fcee4bb0544125991509165cb48c620bc1d597df10879bfdc39705c9891f9dbe89938d47aaf61e62150e2e136d7c0fa07b2d94453bc6a4e6ac4ea61cc2b47babb054cea30fad6b026b1cdf5b09824c134e95e98bcfe734841aa260676f0148dbe24f4b7477ce7740ea493e312dfa59ef96c5e1ed517b44d24b0e2f36e59782817218a4c0693d87678f65390e105a98cc93c61714638a049e5460099edbe179e38176a8a1bf2a681ebc7515769af9c45fbced7b09b860649797b1f9727cffd082e63feec36e9d8255016bc33ad0923fe7b629aae8982aeca5e2d694891b866e62e170e5360123b3608fc8acfbda51bd81d169cdfa097eadd1faed2d643864dfde6e612ba45a08bd8a775d6fd088aa3dfbe595391cd084e0c9b20d1a2b90d353508b907c49888abfa73dd83d7e914b75894fdda670be94636006b092e52ac99b649eae674b30995cca9838bf3c84fae13bf3004f6d2b2c4f91842f9e6e854293f1b357a864b9466664188868551bc1d8ade756be4746a212c973fda36f8c5db3d1867a4f0c9459aaefa799846b60fd97853474cea3f57c5414eabd6c73d428ffaedb7738005e2ad09fb960a2415a908bff3d599c234b4e9bdee40a6015ae9ffca9e1825e94a2ef748c4c70f0413d5cf1be4a18f5e63e5f191fbedae7989b1e13db15fcc01bb3a927cfbdffbc77e42443235728aa26cb6df71a7b3d7db62dd49eb9a70ce2c79010cc9320d2d89aa37ad01e14d365088a1ce3cd5a6d0d01c30375d3f5b2125688e2d4ee40862a91f728f596025d01bf5cdefcdc6b4656d1ddacc6d4d5136b5368c3a1954e76d0bae563b3a5b9cdce2454b7c4f9f8e5f83e576fe31e9255fea539b3732a07c7da1debee735fe411017796c9299002b5cbc7e9038c10e48eb99a9422b4dae280fe3be37e7749a1dd28f66b0e20ba857a9bf3142452cc44048b76048d983cc062e53c6542e52d657b5109f81967402559a9f635a8751efa77a289a50335441401ebd56023fee1d531ffed42d6cb609d10351d719d357d8777c221310ddfbe4ff8f8ddda267f576833cd8e86a764a1b396adc06240d5a0903d60254536851ebf17b5e4cd9c8195c5cb9d43d2e3b13a57d690dcdaad458731264c32fa8ad0e3a7e721d17a85e6e1e04db284871218ea6fc9c6e19ad4fd30e12cd383efecb81b2be6a290477a825fc9d27cc77561ce930b3e33cbc8c2a7fe8625cdd4fb4fb5261f11e530b3b2e331233bfb83e067275948c840f1f5da32f60ca3ce0de74c915dd701104ad189d739907e1e53e6613774f2f78b749d071a68dbc1a4ebf873725eb41944d3130afbb573a1efadee7c00b2b448b53c5cb5528750d8eeb03a8695f291fe9669b1a48dbb384c438d52812a1f502f2022bbc47f49dc38c1440a95b8a5a457b1ecbc539f2ca41bbf28fe4bb72f67e5c927981bdb0c5c04909c7c5d3f8053e8edff9e90b65c6ccbe200c2a6b2f868b16b998c54939bdefb5b3e1ce2e7141b5d4089ed44501910ff7b0cc4416f85214095240a657de8a896ba2fb0e8c53719a578b30e708ac454aabe204279761173051d5d66239aaa9c460f68ccc62181077bcac0fe91e75e246dc92460158f18ed2c2d994eeccbb1cbaee81b36cb4a8adcbdb27a7dd02197298fb93298d6b030c9bfd66597227dfc9a92eb1149f3788f04b9bd74cc6307720519f1f5c3312904cb79f53d5e4c24f7b2371f0c6427a06b2bf19ca67d5bbe561a21f1aadaa260137677da2c6a3ede243c3775856b4487902afe7b5af917373407320cc8a39261a3021a34a71ccef58fe6636a11395c472a46d6f3a014ea5446e929dfaaccc56a043bd2fbb2273da1cc43d6e846a159a6dc369c5561ae244090eb7c31a4e6c0950c03e5ae9759469d9926a687ffecd2e5988b69d9827038da9028b2f7e6017fc9fd0a3ded51fe0f99030095ba45f892aff4f7010459fc28dc1792bde2ea2fdfacfbc3b7b92bf62fa67c826f78246bc7602fb7a8e75dfff053a2dcb54e8ecb7c5ec350f2a23d3e337d2348bed89abc2bfce44625aaecb9394cfb6839b178e61c4cfc89005e4ccd4b5cc440191cbc2dcfb741574f4af86036995c631bfd13cda05b867037d96ff559a8c426f4cf8e43ab6b396dc1b9393f68cb9822c33ce61b25a686a524257fa12e1bea34a346ee1b5834b3a360253605f168914ae52637de8f741923445ace184d38ae36b65ca75366ad1b668706f262956022025c5b8a35c449401dde81fd270d075d8f0bf667e204ed2986f7184aefb54e60abc94b22ef96ebfc5fb32df764feaa4b4cae0fc2157973cddcc1d358a30200951b5cb0825a99b5d26bd236343a811929c86dbdec2060c4061b392a76096174413553e191db939e72ac66c9698336abfe8f353513d0af089b55fbad3e80e9596ead21c5a30f8bae13ded36824461801efa2f91660eca5b8459abed279565ac1a90a85aeea7dcaa31cf6fd191640de4802c269c0ece772137a3fc3a9b80d13c33618de1c25c88d8449ba8977de502082b9dc8a647892a4bade580e4b196c1d8e702118534a45b1998ef504c903ac1d562223912cf52fe47de8c27c75f13816040c64ce540e1b58c1708c7c9ee935f22892d0d742a0d71feaf3985254814f0465735bd1c2ff9e1249b597c51c31a8566eb2940ad4f9b024c17316265e3117e3087b183f0d3bf3f7b19ea4e110457a6a456f8eaa92dcf803c06261a5fba82256eb6647a12ee42ebb0e7f93adde3e271c6f6d85c735dd7dda9b7bcccd53401b9bf67623f4301b27a7fab6a4592ae63074e8ac2eb17037975bb5d6f6fc5df9ed8e54114b6a53d01866b05cff9d6e185678081db369f02abbecaf1b75a0bad8d1064cf38d82b5fcb6daa7d259b2f8229cfe27b6a354b5bd9520cd5d711a6ea97973899437dea382925e972a125cda3669b73d6fdfb32b747961f13a5b28319b996df3cac383dba552ed5255f0f6fa3445bd4c278c0cfee7fbfd6d23cf54429c9971fba28456855e8c2c99f616d595ccc659607c95eeb7ae3b407800811e46554988925ead87c8823a749f687f1b51b5e549869dd5f2042b92575b046efe159ea8327a23c09d55aedb000ebd00862e868dd2830be19d9a7ea5e43819de8c926d5d0c908c0f2354ff62f5dd06356baff6b75ca1edf54d6163779706f0b49806b1c35b2ca71131729c9690e35dad196a6d3929ff879c375eafbe4f4a027afa4c3e61e7317bca3b9e11616704158863f903fd3862dbc7e619a06201c06a11ca0dcf1f4e39a4687fab711b24f33ed1d1c21c989ed4a4c97cea612461ec60a3db1b7cc3b95e7008e7230f36980c27fe4365e9a835bf4d9571f7aa9b28552e0d0afdc5937e6b1fa6c1a908a88121b6e25b76a2cddeb0252426d68e880436373ba3cb6cea48383fab75d785db7ef0f19e0e65f05d1c52335943afea93f980a42ba333601d4db75da9db4c2118423805d13b057e57e34f6e01d592fa36b6876e67b930275019bd00beb09bd3445ec4041ebbea8d9338aef52becd14e3830e771c4523ef674ae458de4d2acaa684a3eff0632da859909a346001279259c52b38a0d7a183da67879511c90da014b21131e83fee0ff1bccdfb2c22557f5de392d40f84612d687de7bfd7ba0eb0aaf0d7a8efd22f9e91e5d1caa9803ac35ed3b5bc7dcbc1c1d323c44dc7a60c65930973bab390c54cd7c94efe1cc2a8f09966d260586b303e7d443853ad08b4cc884df83692f17f50cb1d1c4bf13beb65d06202c7dc30e18856636143b30e528f56b1362bd84bee48af5f5a6b1a4e891590f96670315d4d350f64f358b3de5ecf96260eb1fca53914a623417bcbfbb1342c84c99efbb1bc7a75c9dab58f872c11e950773df313dccb44b4c65b3ed455fd4e4c07d74606e3d8bc72bc745e6a097744e96e386e721361d14ef6b3db178de9f5992708f61d1a086dc34bf786ccb32e78f67087db068840def802c851b9790d7d1f83f07d15dc0d9aaeac7f3fd0040d3a86ca17b2c63e6b761a666a6d515810aadccece9c1291956ad2e0d858ed12eb4ac05408284c69a415974233f869e90cf6202ffcd0358d75403277dece2a5242a78ea779ac38c0350ce772cefef133fb11787c390b1b276ea5b270a57ad2a5ce958f6f267d6244e8b94f58c9f4f17b0a52adc7b60eedf2cf5a751f66df3f29aceb18c3f626cfdcc58e7ad0a9fae21c5c917f3d69e41f91b100ba10fdd4c6a54a9766ee0a5c0f3e0daf97680acb17ab4635b9d6c5066c39002173a6670019909ca46ecd4cee2c148aff27f23c14e8ee6c194681b1810a1da4314269e833e927d4cfec13faa56cad08d6eadd109547bb4320b4b987914611ace0bdfc25df20889ed1b03e6d6a01c96b05c87cb1afbba7dbb7a477a9ceb08d827e1eb40a74b2785582f26c7ee2d3c98cfaafe4c18a8ddd2c44421556a7d89e8ac9fe595e3760b54894cb7d06e7595f6bde4e21b46d3e5f377098e499069b29bfa959adad0c82a7864aa450c6b42cb004a455a222a0a673d83c62f5d4c407cbe86917f8d937a4ea84392b3e90a0cbf199ba98a5588c058df6960c887f08f95d1622d7665959a54f66f21a5c0cbcb2cd5fed5f25dc037803520d5fb2b7f00a466143542ac478bf2d428d98e6b74f555b01eede7d9e22b8bf74e6452ef22f823bd507cc05d4939f724f84bdaf28151cfbdcacc0a61e4421bf9db1a0717dcfc007396fc940508034e50610b1b9922aab8083f4677564e76c6e726eeab484f0c99c577b176aeb9f6e60fdc1f23bb529f4f60ccb87eae341979be9aa82b137343cbc5e0c777d47d6fddf14180fb128c96be406cac672481e725be73c0b7f702a9257a89a3575434b50fc20823f9f05af2a49567064966e3385691e7470a1b8f0362ecb1d42f8ef74039de0e295e94c6bbc558ed1a8778bf0394cb7eedb70e633153e74f5e4b25b210ded81dd0b1164066ef3c344d0565cfe26426851f361427c31d40b2d74a49295815472a6911403fe627ed60c9665af6f4092b686f04dbe1c62a3c1eb5fa6ea3953e80cf6112cc0d0d1d97b1234a43f6479b48260a6510ce9c83d409c9dad08ac66ca0f0535ae9dba239ab1de8c5821bd66776cd934920403a19e5ed7149362286373b0be849e5b68625247a50312c23ae135b95aa10d3c80a71ad24682b10ee58511f0fb360bf356d4bb6d3241a5de7d9b6a26be82c753b95f900ea379b8e51c1d595db52a97d34f3ba7e4d5e750b67948a60bc8a78d466ace88c4652df0879348e7081efd5efcf09ff21f4c1d7deb171dc6c8d98f6f5883182b45ac9a05d3c073bbd8671047cb0e9f1b0ff8a6ab06fefd11d1c2a204c89ea60b6b2b49b572f55ec9a79b4be463eeec87d979e7b7e5e26cd656651f5c79d3af8ae7c9c7c9afa6e23c34c907ef36a67b4c22a5d714019d2293a0be72ec790c53e2b5da8cf8daa503daa2d05543a4bd160b1c52c12985024237dd41d73f8589b4a5d6bb5f4c42fd1f307e7f6e65bee0e6045e7ac99c495d566d053c022fae8d8cb92c9f78a90dc716b8c652553889de0aa634f9215f570b2c1c19530a717cfe7c8d12e54e88d683955d7c9bf1cb72b294a3fc692784058ff1b447cecfe331dd1da8d71c4919b3e5cf07087f816cc9449a880fdc88888c3697870f445db94f0b3c691971f62f8a39c72930071623db6380400d74ce573d258e72daebc05549302244f1dd1e2c2a7622d10d53912bf027b3a0b982803b2dde7b78c7fe42bc3e3c96d0a15b608958ea19cae924616d301e1cf2561c1f54f3763e06d605dbf8a51b202629a55e41f349229a94f9069b71750ca9a9b22d6e5043046b270d5e66f341ddfc6df0d9d7c925334e3a25cfbc86d4087f14a141e54de3e2fedaac5597a10de669c56e63fd0207de4bb444b0930aa4986638a85792f762ee795395a08a74171f362c57c11a0b5ffec743a30ba41f8e21921f09f3c359d1dbf4ee663f3c7e0303577dadfaf7b62f36435d88ff52d47dbb01214609a27b51d352ad241972b38cf6ee5fb23710d3621160e283fb301f1a87f5f8c8206a961f20195da85e9c9a31ad867e718979d581ba02e12f36bbeaf67b14e52644a47b0e67c96782d878804d0939bc033f37b42297498f5be090f21d7d3b1ac75e2ec0a003a39dc1355e85228e11d36e9244c2c56bc98d9dce7aec1b7c7a9e2407932cce1cf1422e7c650265b92e793295ab9bcf6013abf69379b65e16349a999d70f0629576324179d6aacb6d877a099f62487b1b769ac48bea10012509a052234ef9eabee806f61892f790608bbb82d4e9d37bd30325e2c25d6b234f70c607a6d93d66623c402ae85b36f9363df13d43a319a18dffd7314264846ab8d88bb28e5dfb35aaa4b656fca124ea0a981734f825618ceb35be9cd54158aa0e1089739b89e5016028345c7d5db9f954b3ddda797f5572f2dca30cc121df999cbbef06eff40c190c32ba0b3d4506149b8ccc7dad9e09bb3f3437f9725daa3df2122b002bc8a34e8efaed0136393bc382ad8e701608ba2baf490456d7bdf8e534c3ed36ab74930b4b3f3cba64f924a409e131f453556898272b3cc629fb959bde7d3a3bf183b5583b1f88ef016f5d8d10ec50dcce1bb2308da3e2138291b5ddab171584bcb4fb6cd4fdabd81f10dd0906ffb66328aba68983e49be41e924681eb84bcdaf06a74d305bc335ae767478ed0a44624e76af32e5f8fd4e9214367c60ac505c0c2525d28cb89f4084356b34c625fd28379ccf22b706ce51d287633caafe5ff170a05268952355a28270487ebedc5ed8668bea876510d64c79823a34026ccfe9cf5dd54107d293cc1605aef2ee78fbfb0ed1604a408faebaf202dd03e97d12e1914ef2e45f30f6e35afd2e439206ddaaf03303314341f71dafaad45592961e25ca4f31779b7fc117641cca8485f189fd340831e0c72d9439cf1a8ae2d5e1ab60b301bd81700967c50f4e59a56d5b8177c5884f7151f082ff5a1af05d3ed2be547da23b46fce0429fc5c1d6bec0b71110e03a6e8484cee15bf002e7322c3d5e1f2c1cd95f1ee7b8bba80efa97f1e7e86b56860e837f23fda29149923631b7ba13d1fe3b79c81de1f425288fe3fc4985999ef9c6c03d77428598105bf9136a386d332e48b056cd34cd980bb8bda96db9678a4aac3401935db0298e444d4af01bdeeb582eadf548577fd4c2e3087a326e4b275506d8646988c59e2c4bf4c01ee93b67ef6c18bd5925d8aee7176ce257febe8c57810fba45f0dc3b8af8f82f25947981022e409df4ecf5cc2971abcdfd770d10629a2574e59a655150e4acccff239b83d352699322b6602f49dd7674aa14247e3d78ae1367ee9cb826455807f89526ec29752d4985ada4f286f29a901de540552affd83b747196f9729eb8b1af4242035cd314af779110e5fd47338df51541421cf8a7d784cc1031f339c034e7e8589cba67308a9770c6de0af9fcb05c429e20879452da1fe11f4954c05733f47c7f1aa3ea815148bbe5f30c57186e161cb6389f8e837f181a99bbb8bcd44a29e835efdfbbc87210874ad680431deb92eb86ac2b95f0aaf37520de7913f29e4a6cd1b10cc39aa2596f8a2c5bc3d650bc9c7919180a243bad5786633656fb375b31b629453245f4993afea7c649d56b46c1757b49d96cd865144347ce2bbb4024dc8b7ef09eebed8533e12ff88b10f0780cdcaac0dcedc39d8012c6359b8aad3caa1ae7000970386d5dd19f9694ef305821f879315e435f175ea96164938aba6338ec9361b5b3cf295dffb5d3f4a812b52cbc7bdfa863e07390470f56d48e4ea83b6d488ddcc440c5e5a385c533361940df35aea4e0f3eb123d492d3c3e5b3b40f5ef6de1e522268b7671eb4bed8ec78ad9515c984fe794b46941605b6dc7e34207fe66f821b1a1568ccb247f091503cbf91c512563aae05103104e9db4eb8c7f1c61c780499cb3dd413f089ea19e01e31dc4010c9676386ac28285d18daa35d9b26c522845f46c813800b34c7d451bd97f97b8111966ddba95ee964c2f68ee7e96ae2501fbde454c431cf1a88e6c9e89629487e936f86416a593fefd80a425cb30401b65a49d4a2370c8fe4501c8ddec94c9a9baa10387e88b8876fc746e8673adbb7bcca37c5831dbc1b67d6113b563b3ebb04ea1126010d1403b3eaa208404dc11e34feefc70c4e5d178c5a4e388381c87344419f0840b8706fd0f76418159b3f82c2de156f3accdc474296beb584f8e2842f5aba616137815431869789ec68a422fbd683a9a3f8c1fc76b476f256fa3214a633664ed20d771a8832272fee4492af1d76d8ba3c6cf8e5c631d601f4ac3519e959d073a6626926fc7321553e2e890bb317ed9ce27057db34bcd46bd2a8ad97dbf34e37c055df51b7247f6e45fdbe3849e7434b7a296b07cefd7b8681b17e2480369138d96b2bb7e99e73bcabfd7c10b0447ab3958988546c88b4d657fbe94b44d3629a002e6e16314502acaa3956b583fe2cf4d0419a3aff2a5a9819d6dba6a9ec6d5db416adfa9ed110bc50bab9d6560df9a6eae086b617429c2fa783c1f2ec4287dbc81e8478ee19d1ebce8c93c416a45e247c66912ba2c8e8a5f380cbb05d44a86a741ab8a30f09f2ffbc8a77ae0d34c0f51616e36f511a7d7bf5607762e1335443e80d7efe0ba38c31813f2f7e85e8ca6b5c6b5eb93821b029416f289f23873428eccf10e4c47a788c6d5594d7b9b5719f163b55299428c8cb411cfaeb09c8ecd6ff0a3fbf56814d78a6f92eeca5bc59bec8616b12c70a587ad37a2e7464d235d589adc2d2ab20d9985cf7fd4d1908929f903efc28badd5b85ecedcfbe6c9bd0278cb157c4d05aca7ff270443c93a595b9b5aca0ad7b5779fa8e929e497f3e7538cf037b9ae2043966f5f4331c80313aa621c686503eaaf34e2073af0533366ae09c525cb65089df2eb88a9acfe18c939e4a9132132ce39ee7978c22108613db7131436fe43ee1137a3081c776a9a67b0086026f87bbd5f3ff98f2118dc34e6a7fab864da98975760ff726b0f9d7c53e00a9ff351d50690d75bd8c4584617dd75fa53d65914cedb62e5b78c0817628ddd593878a7ebe98f6e9bf99d1d3c24f3a1e4e8d3818d8c02578981ae2eb6d7c58dceee34b6d29649178b04544e8205d8d146a556259dbb171444a78636e2da283947cddb2dcf34c9850be41386502a3a191e6b023a1f1276d8f0e1bfdc3b5bf29896e6c4c5d584f7e7b5d955d4b940f03ceac802e1a6adbe3ad48c8d85396e4bd7b6c5894cf483d0d81b178c51bc4f826918aa4f9b4d45fcacbfb0c89a094e2517b1c49a9d0a223f91d0fed415140be790e577d8492861e52ff475af6e0874fd74a702a1725b076e10c49a560d6f4d735d2cea3e33287ece3a725ee7e1ffe4e1a7cad7d95ca09e2a4d1fedbed26c11a4c57bf12b800d468228b985d5328ffd6177ce5bed659f1c61dff5beb397a4a2e4424fd32fb1eb517d44e8e17812e8081b514d66597529619105c3d8d5d02200000f1753c1d762f1dd5dc972f1a2bed85bb33a06a9be6a2fc6dea48695c6cb287b2efd75eff209c92debf2205ba52e22e37a69d5699245d453f33977ba13991ed2f8a56a7a9150826ccbd78bd02d99062d61fefa136af9ee2a4c47a25ad7a4c5e0a85ec613e1ef189156e86ee0b0d583fcd08eb2dd08c50d212e6c21e711b622432f3c4bb320182dd4e26421297f93ea532f5976145d3bd83eff4e6bbbbacc9296540fd8ae11c5e753d146898af4a0519e93a941d09b0b77de5c1cd70f24fb18a3464c25fd6e9c3a4c8e29f01c9428f7fac8f7471d1123fa90f75ceead59123db0f6ad13fe4181f1f1ce419eaa51ffb18dab3618af6d5a7ae7feba4e00260f74ac8b71383441fafe28efd861f9b300e03157e4fa97db24ee081c142b820b27b4084972d21260ab1f1a8728abeeee4e3351fdb47f91bb6cb3835f0da8c34792a498c8cc1cea2831c4f5d5712ef1483fe1da991c18576b4f9343cbe989b681bc63da3f1ffdabfaf6fc00be2a0e857370633abfef80de751367cdf08c4909f567109545a19afc9eaca6780d553a7ff5b050ee2846a460fd2aefbb2f08dead87c904fae79e9c9efe18ac1b62779bcb6c8542c4de9872358720f3a43f6dcf7b36324353a03b0562d95890dd8f9106f929a91efaea707f1a94781a6715669063beaf4845ef8505d52d8d3b08d496c208e426deac9cc1ed4819a863f198c2642335e6896251065906f4551a0c75620a28f4c7fa7b2d3509bd0a15a45f1fe66ee5e257ec611d58a0abfc2118581aaa7ec67597bbda0621c74234a9a3efcfd8f4609f47b16216b2d1dcff77af81f01588dbda7dddf2dc0f91a5a313d8156f27b5ee3f71d45a9d4a7e18ecf4b31d0ddd3cd25a385c5fb022b9c6a97febc071a680eedcf22d989e51024ec16c291f64d04cc47f99cfccc9e4e7c1b4870356636423608cac5409b0c0526440a229f7b2769ee118af2659da335eab519f31ffb9155f097f4c44d15a0a90de4a43f9c63a008d36fa65025051742e26c9db5eb0425ac2d59537c59066e2f870b943b6d9e41ed6a6ca13b6f55746383d2254efb19ad6344ed1cbdcd7bf5ad99c08856870747c9417886417638d266ce091404161b490fb8e5ef3fe1e95ac520491aa81072ac1edf1ed8767964a72f9ffb698f70bd9591163c6f3eb4a665bea97a93ce341435d4ce4465ac964df514ced45f740eef63daee8830964917e82a418e9e77ef06f86feac105a49427c9abe7e29f2148eb4ad192fa704ac0f41cddc7c655cf593337cd217d1a822e061d60f90250c6389044c42b3a6d3c0cae51150a222eaed421c666f5f5f807d415a2d8069d4a4aa9bca87e15f496fc6a67c50e1c8590a8563472ee91c07ee8ab44dedfe7d2880f7ad8edeef2c8a74bfa56fca6e55ab515c7c3bcb75711d7473eeab07f6bc424a5cb2016d8e2aece8ffbac868e2177dbc298d40706487f985b9c4f0eee91538cccd9a72e43dbe4b8539dd549997","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
