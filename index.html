<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"8a7b36d1f05d84fa5a4a9b0f132de8752d563e45fd319971d85131551a12cb37721976a68ade1b56e861b9b6ac99ff1add541404df6c23f75cea84c18760c60f62de0368abb3c37e7e19848ee9116c5a7df66c12bc1a4d28db43d788a443cd40e6061b5f75a8f70a94ba0d696819ae962ac69cf5708eebedf951cf38fee05b42a92163292ad70d67ac0e7eeb6a068cc7e7137877c62bf2ed06d70faf5b7085bc5aa4698bfd2375cc873324d2078c453ce34b2b2f84a317f04826d1df40d87d6a2a9e899281ca3cba83990487796e963ead9e8fd4a8f81f75bd431324f85ede7a3baef43baa0bf421a768bad110af229175ddb4bbc2b3120f7b5aeed39963c48b4d05f6f8e080abb6bc38dbfee029762befe8b596e33569d25dcb7d19108b57cc452cca131cff0526954d76ec041d3282b6213efaee8cfee09966e09c448a14febdb09b594f241a6fb1f4b47edf5401928ceecd2e7467c5a907fe6b1be3585962f6c3d62bf9a5b7c4e7a36fd1e07fd088a8c816153673b1800694f9aca53a5698a2fceaf5467fd0685be22d736d89183ee933b055648885f9bc17a8ac7472b48d532a15ef27992a318fed29bab417701ea465472fd80c4fdc84d6c95ca37ef967218a311dc7aada92f8a3ee7eff9f7fa3c4604ac5034ff4e80b3b224f8fa0145c21d83c9e7bf266de139c3965f10dffe15d5a8bc46bc1206f0be8df8bd6a0fb90ebe7a85dec090d806136b5a60baa2f147f18becc00a5573d27c811687e28bd343577e6bdacfbd2962c55402eeddf4d4062ebcbd8cb9e89ea218aaca9a9b0bc62cf928a33a4adf1e527c9819f93de8b59b8243b679705071dffd99761cdd52bec90eb5f239e540c64f3ee50fd56e1e62397ab38f514f52d7ac8f13e0e4f31f4cfd550cdcbb89759af85e22ea5684dc947819fe9f11b7d20f0da71bec8b523adefa7639e8d56139f8f4ca3ff43e7a6dd366cd4b511307040faefaf11e64e0c3624dbf24838d799c291b5fc41ed180d1b70195c6a8c89b33d2af31814d5b51ad33f4fff90cf1da3eb0330841af91582422642d77e1c636b6de8f64abd547faaeecfb5d3be166eabe6cd663b43b4d31a8ba5f7a2852d92681eb74116e72ea69402ce93e2af8e94ea4b3465463539651eae7fc12be2ea6fe07dcf406b654f62f27f1c3decbae57d6c6212b120554946f6de017b10d85af754235c67e0642028a16edc98b1c1fa26e0f414edf5631d5f651b480f8fe187074570fef594555e317fb39017efbab9d6d973d3758c013118a655a8453f32e5370e4d6035f765394d1d9e4df9bf31914faf17387e283e5c1e5806504e3b41a540fe20295178dff4c70fc48272bd88ac57fe667982d16305f3a26439eb6ed31102d4e5033f8f9b6232cec60e5d7f3dc648cef385a7624fe9666649d2782d01bf7e1c508fc87e312d07f4a41f19f3c962e9f1cce2fc5c761fd277ea00a80fb87a4fc166bdcfdcb7068349f6823c61cff8cd2ca94896925750a5e5ada788ace95ab02d29c5a9112e1b766135acb0335cf5f632147f4e29bb1cc4208f07591df38497b4f2d7a2ed886f65d9fb839dc209052164fa494b788b911bbe048037963ccd9e5ef7d2cf6449a3f479f9531db0a1ce6aa34fc33c34a521bb552604a996fde16ef4ae4a994293618e447c705d467beb60d2237327355c97f8704539cc3cb361f048df46ba0d30f30bcea54a9815805270a29765b19ff4d5b882d9dcc55ec611efebdc321d3e2426268ae56fb69e59aebdfb484d7e71b9debd207cead418169bccb679a0a95ee59bb8bfb85e711f121a6ca7ebe70af8875d65e9e8157e6756855aaa3b6789379c4f9cb7c3674efee7d6359c3c0088c85efb79607c302edfc7521d1a97cd89507c82aaf8bb86edcea7be663a080181f4f6d7a0f779c6d404b66c3200cd7fd9475dbcc879a6d3803ac09af7ee395571cc4ff61b3447c273d817155d8dfb0030d72dd150ae1f77b296cf2d31b0d2895b2915c9a6b700909f97dc2651fe83c92f68eb1a264eb1fc50b59549cdab847de55c57c4a4da8b4548f56fb215c468c988f5475fd88a090947cbbe9c520d6661cad8026f9208922447faba2100e80d7b2c431e8d127613ef5b78af2db378e83cbcc9e85eb7bfb898a299a2262669328e72a43bb5f22eee4825b479db397ac3eb31b43d0511d77bee8542e87fd26e7ed54ab2342b24c1482d599c0c150496fad112ec0905a8b49ce0efb03df8f93f1733088977eb4c0bb9cd233773b72ac9403cc28a4055583b7893385d19ff0aa0c9e57dd29937182deaa1926a49763285870f8271f2e40ad66eb323c269c051e1cc91fd651e5cfdc4e95e8b1006a223a7ff3bdbe7a6c7bcbceb7c2526c3d52ce73af7ae18579cae96af4519610767248def833a63557f789c1b458998809a3c5a79048de59be5957252e0e9e46cc070c6bff913f54fff0e54f60794a4cb80d3c3b6ed646b774194ba435084bc96ac122416427d14012e2cdcf48a7d4286937c3b3896dcf53dfe24a289a1e6a45a17bc0817cb286ec28a3ed69a9f757020f57dfad6a4cbc0e1a7e605aba517a5bdbad55b26c10d95efa7ea50870a6eac907f843d9d1fbe3535acbc524c0c30e0563e88fc014ec7ec5034566522af3c8e36ff3fd46669dc96e5d4c263c8888e7af86c4434fe9c4850c25f3db172a97e0c0038674091e97ee9d045a9b49855dff1f3cb28d3bea9edd9598ae8a0fbdccff6efdd69be857453557f250daf7e8723bd09677f2949896fe95dd1d7edd932a67fb96cddbb002bca37b8d5f72807aba6a5eef8efd17e1e1c0b43b6c0335171660eea09036ed2ac78b0101654b38667f91d26cd1318b0e32124fe63c998401ee9b4cc14f663a1e1a38fc7df85326d57c99f70bae1ab135a4fa9d01627a0e8079c3268066d3bc46e3e8fd313557c20d2bb5d9acfc4a46bb064732d1ddb59fee22255d8fb11136b6fd59af8da5f2b8ddcb292877891235d9d3e866426028d16649b8de364aef208e085d756c61d76a467c94eb57b9470e548354aabeffdb6bc3f906a6dbce7e42ccc54ea9dba326ba33ffcfbd07ad2f90e2fa9edd30bb64fc7c49d32c9f99435992e835986231fbb63fa6adc21e8e1eda5ae418cdbdbc1e38c4d53494d93a5023c7c8f2c6739150a60c83d1270250c0dd1e19c6a5403393d29a1bb25e36ee5fd2c9a633b6e30065dd699410863aa87af0d286cb0ff74d11e4011c899b59667f868df1becb4c2a22410e090666f4f09a496a2fce98b421e47371207a28e7586acadc0db206374509a16092fb0c671c12a1c91acf93f8e8190739980c4a1aec5e0938902823cc4b8cdf37aed067855e975c4baa36ec9ac5da753be6deaed417693c178c157d4afe0267829c8dd2f860c0927c9386b0c2aad408999c0863637594b8a5d57de6adc2c75b1e6232df5ccf6d8f46f3ca219e34aafe08e0236e6ca6bf46a325165bfab137e83b45e149ff3c9f642f9886edfcb5bc7abe66b03fddd64cb7c5a37987885209a27f8873fce235999b0fac5eedbb54dca88261eada504642c3fe0a1a2fb7a5ac75d29d681716ee7bb65f090498bfbabca6a95aa4f55cd1533ecd47d2cea9a265f9a7cd6b7b1a570a3a4f2b5cdd4ce03537ec56fb73a0528d9fa97776648b2f5eed282a0596b17e9ffd120d26279b13d2e2cdddd6e73ccb9f61440f6af865982e06683e8d547eba994c94fc7a00bf7b76a40fe5046ae0d88f3129944d2f74752d1365c8c41433a4a90fa3696d5b67c381cf58cbff3b6c7ac73b806702aee493abc83787e0114cb3050eccc8e14c477ad076c91f21068af56f72269b68a15f0218a551aea4660d095c75ecc96b9ea6d9d5a6e7f202359d29f9dcb98d2d9dfd6302579c90a1a63d598559333008829d21d501b76485823f9160def213c2a51088c128271ad649529f19c6956702193900f5ec5556fe69239c44704460ec3a8ee02b401a043639bfc4266594b22e4cd0d39df81d59cd435162efec782586517b265287761ab79e9820b3eedfe72ec6e95077e19d2556442ac260899106ffbd54af61d3dfbe6f1bb16782690244879369fbd1fb7908462f38bde5cfebe2e184612aec5691ca157bf5f5f6594db37b92180ea2ce6b57a4635872428cfa4f2618f36467be6825193bb5931331662049a8e09e0697a8018b0919db8becf3b28846340fce14ae59d7ef7625c55c9c7e3020e1d46ae2e1c07ea5c1f8e6e23de27cdc27678b147c4519609a9c40f1d2064678ae8cc766c6f5eb834d4dc39781fd2ea981b94f09738f8efcef488963ef451b8e5e6112f7724c5e17ea7d01dd8afbb7b5347b189f0d94a01d3c63e136955684f5af1eb74f7cc303099a89953be11f7aa9a2651e4617c1e2a4885fa4cc6088e4328a847c85053b432f9880bdfd856c97791fdbd83202655e5723d1eca13174ccacdedcd7aa3107dbdd364bf273cec8b669b685f87821e3e308e7083568333b35c305e6f8b5d0169703a35812e97fe6a59a4ba4468ac2b3a445dde51476126ba3b1bde55be8868ce5c26922ea96249a75b4128e7c4563bbee79ad80af7105c22eea1fe1a9b662fdb27eb33938e03fdc125b571c662319d1565c6d9c8036aad7d3ef0c1f1657b6c60f435adba38a91aa13d3e09032ff67116b8eac61df5d1b9c24f3ca2ceeb9156ef51a355c6d52244a8db29b088ff0d745e726170e6a181d2d9e070a06c559543e6d5b2d0833487c2f5582655c461c98163dd4894aaea6bf3f0485c2ac3d9d025aa88962070d5d58bd2f296ced7d639c00cd4e63ad79ce0c35fd8e55585ec7e927f2606446c6ef19128daa87265559e4864558b86ea94081597bf3ec8a4105999721b8ac6f5aef5034846d18eb49b8d800c21129ed6e984a65b7df2cba8def323f68c6835abc4236c4d7acb22c31873db5452b6dc49309f65abbb393b3940ca910381c2c4aa18e88bc257b174f7171d5d0d0b6a572882e2347bf5fa4f5db0d195200b138a626432abf3bcc7d657c67099519f96e3cd512e96cda714896fb5c73eff40ac8dabd9a98d6431010aea7d0f4aef35bb3528a6c20f6687e29707e7d197b23d5cff88850df9b2843185a9bb2a26ac3ecf583c86c8d64453c40db049b096f70a6f3bdd04c6bf6c040afe4011ec56b410324737396c0e2be00378c390e78ad08ce560acf0cd7f88c1d8919e29352d7804866094c714df72fea74062ab818ef464a09f224d613d60a4e038ed12ac9d1c5d9a513bc8271300feed9fc07e4f726d99235c756a74db31f9db54996442f9ada1e136bb9acdc17a1d9b7873cc4c9bbd68e6a7fd3c4db465a5706640dd44d81c6969182018b54441a8c296722d62a623ed7221cc977447bcfa664235a6b4faa6cd06a8d3217a9da628bf757f94de78b5eaa6e17a5b4391431a6a79f15a6c405b5ea981ade1d41e54e372e52388bbac43e370d1cf55050347f7ca5ea4f6af180cd8ddf67322a04b8dd917a1befc1066ce13831d1655fb358175e010abd4d808709592932cf239d18f58db01a8674f33dece4958ccc05fb6d0f327550cc632f5fec3e9de88daf94e171ced6d18674cb30005235e5230172cb66ca576f119f63f381ed224c749b56f4f0133cd0877901dde44ca5dcc22625b2c1d28432f410d3debd6004356e3657d61aaa8692a9c2c1589216cea68363ec56546f09f590680693c4d3c4fc6acf631ec6bd73945173f9590193bbe8605218c0498ccf3018517846d2ec65c28f0ba73a24b57469cea96cd41b2a5b4b913051be5f5abaec004aa32a3fe77cbb19b6e3d4a59ab2d64bfe79c4628bf3f393a6807f70a135817b673ea3831b2d4b4703c4b3b9affddd01d80c0af4e77b04459047cb5e8bcccbc58014d942a4678168514da37cc3cc92f62a041cc44d3c901cb46f2e8995b62654139d30ee35a4071444af6db2e52e1f13f351eb69b2195a3c546fa7ae4e62470662370a0cf498237cbe0ad6750a57169a28ac580051f316b1232d63a0a2ad09850715ebdc4ea5006d79d2acd85c62d4549f652672b00345892a787d9521eb0527f2ffadc3c675d4c7a77a9cb222d6665499176e961b66cc3efd4719f161384fa361d8ddfcda44e621a8e3e9853c4e9e0f017be72973955b25681746756d69bda726848414c941b3435045259d037c27c6e0047ce809d10c5a418243e89496fc5ad358a231b5738ef1dac02c39994589ff5f5d2c60d4e345a9920b99a6089b1402278d7f69104356f100f0894c0ea4cd51f21886822883567666f72643cd0416ef8c82a4ff76317936a15f5dfb4ba2bf9b15d5f3a8a9401118e6d3cd767ed478938dcf9d4b1dd0c2bd45650eebb67696bd6416b68355d14befd16a75813366b71aaed01be4ec4b307eca08a04cf82b6c2d60add56ba5e3fafb93760a747c90d166f2974b369523e65a40c0a8a6d40d46b7aa0f39942fc99040f02fd97b8cd57cc640376c8817dba11bbffa905ff843558af0d76d89055be3912bc7ea0f014206c1c79e51ff17384fd95c1f20768e36dcef2be8606afab5965d131b65bab32bcb63e8304b290a1fa2d362021b53f13cd978d2256b149d625c27380f651af70a7b526a55d60cd41c12669618bf090185b387006adef2bc9c2549d6172a3cdcbd415a4406de3b0cfb4f567474784a955dc3c74fdcc1d69d591dc5a3250332853d7e581b3352cc03e4709664163d73a734c21631ff906c409b6906428aef3a889fe1475bd14bfacc8f352faa6b522d06ca0d0fdb11d662b55828c74ad0fff06fef3a3a4ecda753f4b61acd8a74913c329f4f4ac381189b8570b558feedba19aaaf8450378748b4a0deed30058bc5b80efeeaee2a3b0799276d18694b3d6e33a7b4f000d921a7f77a8a0583069cce83f80c240605e29917b5af0b75657641574351fd9c4af3960ebb26713731b96e01ed43ddfb9563d1f9512ec20254ccffc2e03ce13a28069b3c53b13af191d32d1036f35d0dd8c8a8033e0007e953230afd95365bec9ba1500a54af809e37da674a302515865c9a145d234d13c8e10ade6f0d52a35691dc443bda03d61c861ee3be931a17d78805d47cb72600cf59f385ce36f11455cf43c993c8c5a96130fa17a975522d7f2a1e534c3c40e1712ba8a065a8aa3e0b507c3e742b077d1595d8cd3b24997f1ba49d98b5e664aa0b9f045168c25d2daec9c2ac80d68409f49c19825facde4a995321c44b51652a8e6366572d8a35af9be40b00a6208eef78ea49ac73465bf64384d192aa0d33c0069e4941491595dd63f59682875ad9d1eeded3916b498a9f918471c2267d062216ada0b41fa2f088f8f5fe524f59979ee07e741282538ad197bbff53aacab37721db33b455f0182171c5e5dc713f1c0b9a53840d0d54ba40eb3b0378986a4d18c6b6b653140092a0041f30555d803679a66500e8ad54645a4e03c1798adf23d6f5ebcfee14e47439f92c1027c4b2cab30680b103355219b184a487552a485becbfe60c74c7004645e39b4d4e42dc9771e277714d0e614ef1abed06c450499e5317a0a365a3fa0dd90692606355965c6896dd75633293bbfe482f1a13bfabcd20274201a5f1d8dba07eaa718a55fc8eb0f25ac4ae7c1e04d738d7559831771fcf7a1dd0103da0a3b6e4b5464763943c3fbc85902b45d7bd4b0ee9f9bb84d41cf2fcef06bbc9d0cbb236a80a03f21ea51a54afb5c80a379906c155a234785ea19e0b28629fda648a78ef41092fae4bf9e0faff1fc5a9c9e7e1b14e7a2fb0ec3643494af7439d67e6b078325cdd59eab4c1dd4583ab92deea9fbfea31f8d02ad9f2ac99af16d561d4ac20f16cfe48358289d58a0c00cf7f7f43b3a97d6fbdb84b86db210be5d7ce28678261e515004ea156c3cf1530f45d66e5ce42af31fce88062a79cac514eb5c6d86d4722cb9dadeff8df447742b9b610368e8a944fbe8f90450586ab8bd3f830f0a42f5aa4c454f3af10ecd90ff7027e1830210dcb8a6898e2c36fdc3cd803cb5c2b7b2c528aa094da0a75e22adf2dfcdc68ac52987def89f68ba5a6a3184f376259e38c05d722524af9ba3d7670230518feafc7e79c63e8563a7b91188d690a3ff32ae9efe0132c003fba85bae75a5c86ad02d1dc146e8d9803b920d8deae7b25dbf1934338259f6988c42b499cadaf42bff13e8ae4a1ea5646681bbb921750de2a6d06248925ab111f97713a9c286a3f01cd47e6e72018fb78e4b69f5d798be22652a655309b9af263f5399a1fe585309e8e707c34a5fb250aaeb3f5cae1841b6af05d5052e2986490221e98f9019bc6f6955e8c3a9c582aa77c3398e975cf5e4d608a3a751036a103d9b4e3eb4432d8a4e619ae9260ba6446aa8873113b15301452284a21b90fd8b3cea6cc9800a05a067d879ae99370eace5aece7ed07069aa403e25c06466a253b29d87d51e44918867ea33edd8428732d7d0a3e091b969091cb36cb6e1766c233358fc906e9efe8182a193c8b2bf0c7a0d60778197d3faf010b652ca97e1764ac6866908b054c04bee296f05f175e4d4f05386e93f8348056a979454a0eb60596e97004309a9cd0e9b8edf36c3357efba0d523f49c3804d4bc8cbf5a392ef50473ce192192934e6cef6719ba73a98a31e93e94e3324901066228035c8418920ace3a3022696867f038b9f0777783f19a127fc75f8ba660983bbd29286e22b2fc3906b45380f442bf3772c71b46a3a884d58ea1ab8536fbc3260092287fcfa958e49e975401b7ff4fc8ca114e8b50c4926bc6d01657cc53af5baf49b8b3417cc515f1f7ec40aa4e1c63f767d963bdba434cf83c916ea0a08e640b717f1f9fc36dfc8b0f33368d591a195a5675aebacc093b17bbbe7d0a5f3c9adbd61b9714ae49aab036921489ce448e21ef303c18186e3c7972c154cbd3f5fdebcf3baa3cc15ee3efd976e8a96e2fa29c595b80b3d5a9d698b53733c5973c92434d99d8cb3f17e7a96e8c175d6a5aff9a69e295a9550d4abfeb184d6012999c031095ca27a176642282579cab572e9de53c23ec2a476f102344f369f5693a2ad212fa192a158c97f0d4dafa45599ce0738086359a490ec92fa26757e085e2daeb70423b9eb84acf9498a837de47a99ea6de9ae9f9df1e2a73b0c041fb15b12ee9c0b579db5bbde46467a52e1c7806c15adba844ea64e60c51404485c80b80a9e94628866715ac552a18d7f470338b98c9fe1a58656f173b83fc29c3e723f1273f138ab6aa53ff1e72709a6d5b45b192c72b40b32cd1b578fabe339348b2d4f1eafc9583551806aba1e667f11b7cde4dfcf5ce6869288d0072c32e983ace44b1b2e92ac588c6aa0ecfda205c391ba73c0be35cb715f85f48efe671912f99802ab645e8f2b3265e2f319d10a691976c4a5c963008c9bba06054e63c36d9cc6c4f99f770c3713555eb4247908b986524d39e70399f5973536cc8e41fa89c4ccf9596b2de761392d3e32eaedc2b0d1f0944cd9df1b27940948579eabc957128a78ec7c036dbf1ad8da1e43a88b048212c66b39f6a33564c89dae3f325917f7a682871cf6563bddfcbce302416f38de4703b53bdfafdd7330e51ed21f81bce73523447dc39e568106a307820b79c5f27722bd1ff2bfbef4f1bc11fb4400613027cf7905e98f0bcffc276633b132bf0ea7734ccbf84e5a80c8ab6ffa4679f501181849f2b47dbcecd27f8c7740f518c76a7410dfd4c05761340ba808d60e8519597c99e693ee625f2d9b6aa297a2e10f160280757f98fd72aa4021989f6b1bbd133c4389a8cbf7ff55b39a24b13927dfa6434c7e92fb365f59948b9cabde4bda5bba3d94a0973d98ecb6f716164dce224c9c760819ef5d9984b758ea4d630e964221eba2b879d3781df91b43c09560baa77c145a73ae693ed58a862d2dd9aaac7a9f5817a3a5c7077464f49ce657bfe8d2f47f8934f0eed367cc6759baba957bfa3ef80d5c90de0988f9a45a13f9ff6f1c2d5f4ab1edce0c4eba6d521d01fd73741b511ae969432ee79e054a2d12c0c5b071227e6005238985132161d6a2cf1137890311b1366c1e004f8e62cc4e1c6d03fbe2fbc7041affacd1be733d0e6697a94e5b7d336ff36bf783c6edc0b614e0fdf00b3d060e82256e091ce4e291574607d926e1c67828820755db1681963a74ca4fc726f869ab7530894891cd04b89c2dbb66a4c5ed7b5d5af078281d7d442216be84269e2c9b518b3af670f497d233b194dbaf1953be71ea160f67162b2774e0475880f124991f487a6792d43f82dba20b893ed025f3cfa2a94a1389510c099421d4195fa0fa9860da28f6f528bdbf3cf1cc58868495eb727ecb4c39c9bcf98372bea918ccf3291d703d4685635a48948c51f50b24d12bce1df8a45f8d34d6cb7aa58fd878d7b1e712e469e40183c54dfa670e4a2e8749f83432a6f9aee82f35193234107e04e8fb16dccab310cf89d61971ad94f4404328235aa2524b32553bba06dfbe32b53648c6b0ce2334023dec819a53bc8c815cafcc5c2ac4a501a9c56ca38abcd181b22e18b380b52b8beb8b9a67ba736dc71cc1f5267ff337a76e717f16ac2c90562c9fb4b53216049eb32063d94577ec8f172f7e972d5f7d62c1800d6333abc0b7a19cebd4cd194c29c4fbde2ffef63ccec61f06383d928f9cdfee85e6c51dab180c1efba92548e2296462f107d5e818b0f3b6c182b61b5679372d38573c4efd97ec201d08959d007f52501c91c13c861d7979d57f5fbec92b8d318543cdd34cb06dd0a189679887c56619999cd7a71facb9eb3338ac1b49cfedd93239b1a2a5f5098c0546c8b049471cb7c8f39369932baf1d8aaa02b781383d97252088e4e250f9154bc78e2f3fd11f6515b5cb0e0d17cf326ac23d243a57e1e953d63d08014f7dd0bca49b5e5d2ffcb7de016f532baa712d4adafe5f8e117ca1fbc39a35c7e990fabb229a247ba8e6c50b0445c98a6671ffb03c5d1872af19be5aecc41b78f1c6ec79d033204a2f0865697c4ac40220cc789db9e712c9d4a4c8a58cf4db8351b551510961daf58ed6440f2c614c0eecfb7a995964a814d6d7ebefeec9fc97a198e07b1d51d26c24b5c1b29785758da072f28e8de30f2c89324d2c1c2abc5ee8feee59ebd04f958c54f93fc9d32c4ea4f11b0b71d8a96edb31aedd2b03a7aba87f42c9aeb8edd678e3e500cf47c982737dca1f40404883fd600cdb674857c2372a1825564f73bf5a9280a10fdfbbeb853c02a73aea5aaad5804a9721548de4a5d117c01f01b2b8583f5326cff48bcd85b4cd0abc7b1127d7137b20ee46caca1e7eb648ff3474dc29a981930f23564881953fb198cbccec67df0c4fe093407174036fa9e26b5be109172c015e8351c59c9aa8a3cf6eb63dda000756a7f9d56b6ef64f4f3a05e3443ae79f4f8ac7d25099e79818f9c37154481d930d75080ab1bcb18507d1fc6c8201335069f33eccbafe4e52bf146969717a335cc19524f1581e090d5c3976354f4fff29c5d3dae277c73c843129688af03aa013449cdacdd6a27dd53e74e7bec14fb30be6ea27a2b55dba47f405b54715b1cf5c7441a6a776162f5fbb2e3a3be82eb5eae91a5237795e7d135b49ddfb558dd22a37cfa972a544e9b94777f09470c0f0c1d359a356a8b4a4abf909d9997a4fd3fda5c044f5eeaee24ce17841cd914eec80fb4424134243b0eba763cbf8f8d483cd12b8ec2369a6b9760467e8e5618f080d01feb0d7f1508d8a91d712aa8f556f9a2ef93397dc67e977e85d6690f4b37fbb7bbdc5fe543eb1c55c05a2cf0c688ded9ded016a8ea1fed07bceedc731476b263f1c75e3c06e1515a999f50a8d636be96f35f9b3c489f539d469e7a309bf9ba789962c7795f422656564a03566149b321ab1004f2f6f93a220566fce495f46e404b912ed223e65bb8cb8b2bb08e12e0b50407794e2f48ee1bdf5d676935e5c6c991f139b66da584dd10f23f9616ba6c4f11d8b50f61fdbe167864a1cdb1cc8827e54ef91d88b13b2583da3384d96e13b8f95a9c70ef9eda5f217ae4579d734fa31a9b39b1389639a2dc03de8d218acf18eec931123ffd5118e7ba50693c335a0d98abc6126904bfd63ef9ae7d1a61fcad3b25621e14a361c155e2f20cbccff5b0921f1a41f8ba497558cf4abe7fbc45193fa4d423b21f5d8cc14ee7ad8847ed74214f6c957aecee8a908dc19b2001101609a8572ae537d119cc0b6f0ac04b43c686d946d9f7bd0cca7bceb382f8ca7a0f253198dd2d749ca6e36344e401397b5b1bab0cc5d13a64eb76dbbe92dcacedf7c1e80efe60d03d7a320ead91643f0211696b16c723514d4cb5eab7e3af747043fa530b957da0f80b132be3ae1db8bd9f0ced26d5a5881f2fd48677cacca7a37ae1519b3b11e9af8542397a1f756a39f2ecdadda224f987b28b77bfaab37b9f035588aaa1420b7131ba1af45edc62bfac29b96f4e3714c5efc44ba1ca6f4b7abc62d45583639305a9aee0dd32cf056b8088e929db62bb48c0e71f67abc542da984ab1c276fa1b38a07affce21fa05591f70c1a2e002e2ae8221b59239ce682d025b4ecaec4494fdacc4e545ac595904c91f31a464996b258766a54b0ef860c72efb426cc277a30492c38e0cefe7324618e2bda1a0b440ad5d734b4c88b06974cebbee237a2f1cc6de4f14664af078cb8dc949e3169aa10293792df5cb5c6d0b54fa38a535e7d8bd736b6b4bd988df738c4e5c3cf19bf70a480f2a5e3ccf82a0a3e22275893a34ec483db0f019cea4313a107752e981bfd5839a8ed6a700d147218da7fa9beef27fb11ff7ea7e75b0227bf391548d29b783c449c64ccaaf190fb59e2a751517963ac26001d49c86d06532504b290668373e9141b912ccc42f08e0dd06320a794345a0b2f4edece5a5bf8c0be7ef5b8242f24ae478525cf90fe60baa50f8f9aa34f8ea55f121f13db8dc4e8c3c089a5f4eaacf935349f3fda1f6213e5644472347db6fa93971f8c6e7145282efd2c61a954862f05f5aa217c18318ddad3035deca2492eb504ecfcf7bdda5f62bfd1313b296952c73be9e0b5f75b35b1c2ae73cfc346546205e39d33915bac76917aa99d1621886fbf4953a1a8e7a3f7bcb0545f8941b30a22103bc367a7ed6817248932d4cef2bf20ffdb526da35d3b4c7ce225da4287465af8167dd1587d6d89b7914fa5a94d88bfc9cff8c2b50323bc9e3bb3ad9ee16259467cca8c2bf02b01072b75cb8df94dfb80232c18303e7204156982fe7b15a3c845ee1d9606c90fced25a72720f03104899a82c8b5c033814663d1630c2ba9cb7017cfcbf4bb1192b025e2336ff6cc8cadae295626462bdef1e6716973e4087079b6767459871ad4e3d500a0cc81388a63e4c5e3b9c8547b9dfd189edc6c0b3a4e103c97bc639493200fe8bf51b261cf736bbbf3bc761e30b9c0014b9b7523e00fb830b53826775257f912ef6b2adf28e2912fac6a39cc3e52029a1cc7a94cde69b980e39ecb0d4e21083222011e19c5d5f00e70ea193849fab8a80040dbd55b1b95344465992c78ec33c507a1fafc619de0fbd7d3998ea5993f7a45f82f317c6a4d4c0596c8766829fed95624554d856a0f76126534f38f2fcc53f4f6fc7a98bdabe3567723b72bfcae874c28a58bff78c680b3dc262323ff45a7eaa8053ab97634af4e3f9e6e8a135ce0b8c63c595ba8981fc9de5ded0066dd1b9f11f33b19d750672463bf576b0775f99c1ff031c9f220140a0ae22814021c579a11b82344f82ff2cab9826317230a857115d4fec7dc32b45658a1bde456ff5bf3c4065b3d49f8dfd986d79778cd1928cda04930dbe6cc596a4949070c4ce959de2f8154652ac464954e828f677c9bada5917eeaf51ac658c449a4e8f4e7cf6a48952d74d4f90c9084ff05e60871a47e02d3ab2485aa08fecdd597a00e6682f0b6dad23e4185bf58d2c48df01a4dd84b4c831795743854efd64d3d77bfa79e58abe2f78927afef99fef14b1c16db4f225e5174c63db939605ecd9c41d36442b3697a915298aacee93e51f659194a579f8eca9618947e2bbd7847620a3c28703a0bbe0a8081ef890699ff8836d145c9c9b46181afd0743dcc2f9fb0608d2b99c1a1002803433069f56e5aef916d4ce23cca7835bd6fea36bb7255c339d92848a4a1445d5fb4cadc34116339c2ea12292fbdf95d2cb49685bf95d5deb0af8174fb6a229f57e5e984b5906cb6188d671b1f323f79471ef36e595db14482c11c098ee72553f8e66f4ed2b56d7eab50852add9e33962a423ef89e34401d70805f14136f0fd092261971034adb35e64483c756e7fb36ff6d3af7fd390cae997b0f7752bd4e8e9104eace3821192fef4d25917fd68b8bcd7c6c7dd52892cac443b3cf87428ddd955c002932db510418bfea33dc7adf5c62b62c3f9844d994bf3e1d5b22e089c8f8e6385a8605b1bb4cef875be8c6bd7859c31912a3b54df332327523fda3c560b65e5a712ef2f1a3ba3e65022140e814e24d5fa60a8549e76b9f976f9b39f70e0d989f631c6eef8ebd7c9c1959614fa6f366f79c9489c56f69263898582d8ba4614fe7c54ee116b0cc8859ff6f268cb7056be784989c79061983b3310976c1430a3bda126e13d1252725827a3b431a5d35207a7c8d38e6d81f855bee858bfee6bb0d9cb27add5fcaf026c86dc96d5fb715020e23517263a82a33e079d746abcc92b544477bc1054a184029e683950b43e781db9a2b8c47f7dcbe1ae6f26995fd758b67fee56dca707271d8dfc8015bc9559b20c25bba33896cdaf10bffcefa207e05cd729355be322bfeeb3f6d4a3067cbb64a07bd505306151e20270dbbe61263c9a39cb0f6198e249a130939efb6a2f420108b0c438b48626dcb0029d622e3142f2969b04e5bc36dd7f9dafaa3ef5740bb775da27afa8b828ef98465f0b079aa8d1f5c64d35681f385fe80550ad30138821c426c5489cc2bfb76452a5e4ebccdbec31a4bdc4d89e1919924c05d15cfdda72515e574cbc0ebd2aec795bfb2648b76cf5e02a6bed4588e1c3e9984087996209898dcb52651ac4fee9a4b83a9ac937987d5990593b4118232610e50cb0fe45ff7906a44158bf3f562354fb2ac6899b3c4c926d8a043e5d41993a0f512f08b8b298a8d7e297cdb6736a150af138e57b7712ed5efa1532d38244fb35bb48f8ef74d51ad4e0c065606534273cc1d0637c177b67edc089aefa9c522d4d556883a72dd7c21d6ce8a9c02759fda8bf3274c3662460d1d23d3f60757e704497d3e78657318d2a4b26e71b0bb4833c8f119540861fa8d6144d5d9efb57a5e577924d2d0022de664c9517e6c4bb2b775c5b42f4780c9dee37051128374e9c8fe2cfde86938c1c54ebd3aeb756c77176d6cffa7277bfa72f480487e0a7c68fcb356a6ad85ee31b0fdf626904dfd40aba52d5d4307299758da903a92e66f96f9269145fa58613c6b5ceb60b016337dae8db23035ef642db2fb837895ba58001eebdb5c7ae03dbd7459a254316bcbf38d28fb006d276379a5afc235d1dd0a6c7282854b4bdce4ab975b5b4587c845751878475550bcd0080b7ea540ca729c82d842ece431ec8b782c3d647c182cf631f18a88257a6d102b392f69324968c500e835d47f03ba68ad33d99499e397ce7fa5d38057c32919b3df265af1bae4727c1c59d3b7461f758fd3dbab546d97be30a2a203d46b44dc463e0924b24c7cecde2f95b83658e305ff17b81383f89e7a2aa07c95a37b540f124a42f5e3b4c4e37e22c6837ae9787c195bdaa6ebc7836171c97454a01415fe0111a48e399f692869d51945fbd66480e40a76a40b5edeb6dbaf6e2aa4b09ac5707d4c57d21b09bdf2e939607e1f5d7f1f7037fd40ab3cb6d7d71d2fb400ba7efeba9a28c6b654f06c13c0128d5857315c66becc03731408d901d36e1b5e7abc811f1b4d8432e5a499dc92a92ffa9c08366115eeb015952f8373b7189bab31df051e41e4718d2fca245857aaa8e99b67696449c56b60d564e1861369509cba51d32524397eaa98ed5b84c806a0d52580b919d0d202435b5b3c997cb955eaab5d9da6d0930fe5df2425caa70190b6aab791bd3d92e54d5c3720b266463b0f3ff17ec1cc0c634008fec21f7c5b67bd6fafbafddb407b49bc8ee093a5a95fa7c23eea4ce6252326ca979f025cd5b2d1c4d4679f3b917ca5f16f41bfb616b4dceda7fcc20d1aa63a459267f828464151e86d5d284b9befdcb55f800a28e8f8cf8e524139613b6cbaac8579aab37723e6134eb7e502c928a79d5d0229e332bccfe54b17bfb72bcce1143262d71fc864edf9283bf0b2218a2536939c0604a863333e3fd54023b4de020a9b287e82c1bc047d8cd1bd711138579cd1a6a219c2db33006bb510f159dbb8484b7ac584049c6acf4f2b3d078f8117b98d56bc9e9694bdfe7815e0f93936d3c4a500cc2d09856cbc829a660bba2000b7dd30cfa142bfa71bf1a88609a7e7f7123e5cc89fabbe5db916580f698443288e5ad0c6dba3cee275efacae3eff91c20b1a1a99c0ae8f9bcb0f399b4073d59f8ef8cf8df9ededa579c3c98a561f41421a91449a4025c4ae39d1bef6c1f23b7ff8783cdc1e1ac4260b376ce3e349c248be30a3094763016283ae4b14f67d9f32e064d659434ad5e1bc317ee4b1af0514d599b58a2c5acee3f0ae9609240e4152f61cb78ab0dd029e6d56937451d35db9f661cf2f586ee0bcafd67f389ad53fde06219da75a6f9d2b97868f4188c16fa1255aa07f57afbfda08c3adbe7b292ec46f5f14ccffb61e3f4c5eb87a5816d00a7b6a53c39ffc5299bfba76a58297b1cd4d7d9bd8198b11fb0d0edad986db7650d0cd24cc2fadbf35c8d161b922c54bfc9436148839c17c950c8939b93e59319174ae9daa744f4365bb497a3a491936cc8c9f9e08df8beb35d9acb7e07b0a3724b5af511666c501c79925278ade81bbf63f4f15c9232c0a99ca667a156db3cee68b6453a8627864606c13145946dc0812e9eab18f857f19e961cb37b7a716c0358bf8c2c063fbce28dc48a6d81c56c6224b8b2071bacccff7773d7a52b38dacb858b81b9ea1cfd382f5a8073b8a7a28eefeed64c35972b7674352700dff6ef517e55023b87ed01150cee464dffae27d5a9965559cc8bdaafd66fd81f42432a13048d08aea525167a913e65b3eb643be4e2380c037defef3fee69346808f5778c4e4248dd7fa2ab2e07b819b80d709e392d6ad772ea8db1db53993efbbf13f2aa7f609d30cc2e4b622f7b67765eaddb7d60a5a67c20f54a5229b552dcdfd1ecca8ea8a918624fc971873d14811980eebed3bf72163ec2062a9ab5edcbb6de043229ef0bc717565a6b3ba4007fcff0227395031683a1706d4e17602fdcecca089a8ae07bd0a65a367fd8c7495af78532050fca42bc3093a48891c2edceac0bd78a6cefc21dca2220d03a8e8921c7f4043fa38704ab040342860d2dc17879c496a2e24fec09c8b237bc7275bb141b2febef9f84bf04f68ad09936e6f9f81bd0729cbd9575ee215a0f0d82352927a6aa4932b6f85eacb6ccac3e778e3ab785b830ca2743bd5c088e3dcb73245ff8f71c8a3cdfc47ae80563e6797dd5c3a807c00e85e196359c098efa4522bc20d39fa7a28b317d1887349472f2182c260f56219ace6ad279b5cafc3303c455dbf540a9dd153466b9ca85c899b86c83212336503da5b11d774718a25ead79aa66190182dc855bfb7bffbfde775724711d4c38fb97d62e41efb6bcd1f16b5b918f5db114d255e62d7280263b7c299f9f103e1ed33608243ebde18ed02b7e52769516369779b65053320aeb6f4114548d0ae26c58f7b528dcd8350b7a8dd2f3b4a4747d1e53a7688250104c65b947157a95b8ae82a10a841f13837e343c8ee0edc22d45a4fe0891842825c2a3485c1748ba2df377fdfa6903d40eb6130b13f15b72cda0d66c4912512384bb3ea48a85a5360310704d0b980e4a85cbce4439b43902ec3eb485d1dc542aa235f4c74e61fead274b3be1c690b3b27555230e4e366f217b5bf3400267d2689ef9f137ee35b3b633f5a7bf8abc91cb11b53e039eb87e9caa00355b7f67a805a706ec77bc201962f4332d464c8331d6b088701371a560aef15a73471608eaef3dc62a5278d2b9bb5dc745db8b5cac56ff2879ef7db832f983f6c13b6c2a44f69af4a510bfbccbe2ddb236b9159475da82a3425a6f950bec4c2db84330345d45a0b668d553db1f81163118872781f9397c71bbecf2190fa49194964131081de038b91ebe28fb8229322bfe1384160f8c16a2b5bd01164a65606801c17d8b596006fd22e287ec330c879d93fede3b79359c142b4016d39235cbee9798cf97a068832be5d2204e61e2eccf8b3914823081665eb3227a961ca6f63f7909d37cc949767f923710278558d79e739b663d231b1d2d258b82831505452672e6fe5e28a063e1f5613410d7ae9e695106f0492a690ec6561f1f7da5508650d6b3530a7368346454ed93e0d7686b81dbd67185d91db26b41a0d32c056c4fe52027257b26f0fd67cb91c60c03c554c01acfe93b2edeebda5e324c5ec7647cd132a0d9f5f5a449861da1c07f91c9274f90fef51b54bdbacb58a46d11187e7ab9158c148c1e577e3d02400ecb97b26cc236b9f6929a7368ec900c4eb1ca456b8e5c4d529662adc95ffb27eca34869228766a3c8a0f995cb7af490de9c8c0790daec79b35ced000602c8ed7f7a7f44b957051a105c0be8b3467d8fd167c460786ea1bf4a6050a2d3b8a2dfe368ea03ee65c71d962d3224931bc84cfcea1a595070810e118a2a4621f5d9ae53c2f091f0cce1f697354a8156192c6ac2878579be7a2d3e36bb38481c098c3232fb78fde239993a4cce925db4eea206609207488697072897eb8c42dfe77fd1c934b668a4508a0f03badff8567c9993041780dc84cddcaa51a36980bf2ddc693d23e312afb5fbe936d0b9cbcdf186c737250b77804dcd834ccc6ab007d8f7ece64800f8aeca29b22b257be91f53842aa9d7297729558ba2efbce930fb83c2f691d91387c17cfea37565fc15e4ebd80fcd4ebf257816755bef9620ba95bedfa008ac0cdb172926e601ecb5ba809adce80921aaa6db256cc09a81c789845d4863fa2e3f87cce5bf05bca7f28b2d36a984d627b9474664ccae1631dc915e2ce5f741bf43965de728f1329b341775c1a950190a7598b128f20933c3cb74835d181e6ebc35ac802d2fc32b187ddc8824dc6f2af09fc9fa43171c3706151e64b07d9723cf4e4403bc69696b652daf9ab167a25bee52d6d4e402e535a32596f22771108207ba5761264d2f0534614c1534869d97d79dccbcf7c39db2b44700d1b9e345525e318909665c40a67983bf11b0f57bb57c5997c5132146c3a8efc0f465137be971ab839e9fe1a56646a43e87c7f46a6f5320ce7960d363b4a8343c5eee7278a155209bc5b126efd74dfb56505a4ec83501d3e16d4722d5db4c035459bb5f361b49ef5810238b52c14f0fda367eed883c7213ca8d546e449abf570235617af0e57201e9ac8853146924c06d75330f265fefb5c7fc12221d17f4c4c7a4d641492f3cce6f4b0a6a1b24acfa6c17bbe22f9cc8d0d8083f8788a67fceff6f62e4d0cfad844d01d8277421e624e273de8dd639ec734ef07f4992df84ecff769fc3af69bf2b29697b59c7d06c7f1bd008da14343f14818ee73dea01f3cfde476473c5319bc9a7edc073e475c49a1","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
