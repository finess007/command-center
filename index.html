<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"05cad28404ffe388275bdf55a8546231c19577c8161b1da398adf430b170b9c1911dcb2aecf2ca7c5d4b1cfb1897320dd25e33e5fa26e70825f6dfe967eef56849dafeb05bc87d1b1b40d5f495a7765389369b13f68d6d5d417d826eca3c8c05093460d3eb68cf1217fe4f30f425e7c6e53b2c73f031d1e00d95a9988faac4976b81fccd5417131d72c260ae533d744d932d90f61d91fd1e50b50aa9ab015eace9ccf404e049bdfdcd05bc9f34dbe9d83f18d55642ad6dfcce76a5b257dc30ac65dd459548e032d0301084e033ffd9d7b643987672f3728c08b48f05d989a770b74b9595445ab142cce4afc018672bded1487167ec61a54f1f670cf2968d7383608da8add2a109d583c904087863e019a57b6956eee570ecbcdbc4862f5d6e0d917f33483ef2e50bbc523c84ac1ef46b672af7ffb404a8823bb33a75631459ea5752dd003d20534e1b23c4a299dc34e8973911375ad8a5cfdde80da332f5fd1c8301870d3f44ebc6ef857f585579fbc34d03ecbe4205de140db48e605df5089068cec9c116075af6c942cbc82c7af8f0a79d9f679740531c8239a386d434be0869c5f1f5598f37ced7838e40943d19091d661c59c25825eefd2724d73b3e8b04d285c3101b8d397b1916870ab17fbeab71906ab70c53832a01dfd8f33e4bf36d8aa958e9833fe967a9731dbb6535b62853a91fd7a099a3fbee249081c6c949340dcca2684f15601a62726b721a0abfb6db9a8064b90751b9f93c108ce2e58dea1fde51906a5ac42411a5c964c89f48d2d7479b4a1cc8eecfa5f342e7b26b78bedd3d517dc0d6d9add1b851975a519f8d48e74b9b894906a8a5fab10e8b8f3420452028dc7bda86ae0e912e7e6ad0df73453b1638853a07670d5b57fa2f61f35e97cdc3b7ea8a53df93a777ef1d61eb21507d8829aef55a404510f89c21856a9bb9e724242759626988b75067653a3928fdcc9219935f18e4e7fe99a18ee3080cdf4f246a8827efa30af503d7b7478e3587e5e64afefcf1425d1968254a3bbf24ebe190a0c00d6e7ee22ee3027bb7c7880a669269982d3c7b85f8fb1a8197fb35273c04875af95216ffe2f9b632de7eb88f505014ebf6e0f18a90cf54cc84b6b0b07bdaacc730db3586586b21e00687d41e55cb4caad148ce3c726fd364c3ecc96daaa0e04fd27f7749b98b6eb565eff2eaa9f90702520d7f29de6021cb55d0f80200a933f6e125704e2ce9652857e79a00c18f59df4a2b461645de16d98c43e18add7636b6981402c480b4653728a01f3e63002d33863fe87180b26318f0e0df2666557f8e378a052c65943c0dfa5005dc880f2eb2d57eb9770b74c8274456ca39341c45373248303a1ca2a16d6601d8a636252e0a8be3ffcb3dfd735106c677cdb92dcae338bfd25812d4caefefac50eabafb1e856b11513870b991ab7f993840b0947065ebeeb287805e45dc061062a7d022aca2caedbb0298be8d119955987c5d4f115213f93a68d99c23ccb624319bec925f94021e1941cfa6d51d1ecd9e899f375187e688b19b5abaf397864973a566ddeec0e70a18b93989f628a31535ea5641c3a046214a222d11065dfde42b92dc879fb11139414350787be7440cdfd9322b3960cc92c793cde1ec923da3012669158a928ea45893945967d9e09b81e3097826af4cbb7de3e6f7515d100adedb2a2ad8f36b45f1aed089e5b8569a9ad0d5d54f06f7b7b909721808a15c329629c176784b4a09c4c244a99bf6aaf922396557c3e1653ec070e4109896f2de3210429330eae1b4648738d27b64a9dcc8f1b7e7c61b98d2e2a7df313f68b593cda14b53eadb9c62e2ed5f74b913a8007929f2faa967c0f13b900bc1fe1792008dfbbaca7bcb382950af1d1358d07239e399e9a4b747815f3c33b37b8de4a9aa16c5aa5767a9558eb4c94edbc785ee50c667081c187891588209650a5d71a41a9129128bfdc84e8f6bcd6ef8d3267127787fb66b26f3ca3d453a86d771f56c98e6f42fc76c52a45cb2da00d63aa98b2c41e891573edf799dd7299d9ba4dfbab7461335074e1ed75a7bf113780620159a544ff11becdf7b213dd37564a3a469f77811af38e8c7d0c94bfbc4b02bff81e6ff7db6373583c02f9f25df3ffebb0647e4680bda4610c6f464f7f665449b362924414946685c2bd46da027ac83b1ecf4899bd1ca425a162f33bce4c765135b9a98a56619a9d5d075edf3e71c2facfe932c33e01627e686806b8293674608959dd40424d3bd0424e94faa802e6bc751b9b660e4f7525b7509df7e8690ea7753fb649db8eeb4707d21f335e139a5ca44ed8c2915556b6c878d4d5fecd752708deae1209d524be270e2cde5e9eb5e42c842c23f627b109019405065b69a29286f258ba58d5159484d3c66fc0becff478d02b07a25946fdd6374c0de3380f3a79a394b15ac8821d878c0283d9f94d8b1a056351c6d08a26e107f8bec6ae5ab6d4148a85f850d2bb190d14d284e7de299fb2b20b0cabbdff14be4ddef5e400662195720e105b24fbfded9a187efc3389deec4da4acc4d53bf0c44b175804c316eadb3f9d2ecc2fa0fa5838ded74db55cdc8bd853946065ee86f0a2cad73cee1fa67838d918e0b35a769ab3cef82e21d3e80697bab56024688a2a0d1d16befa7e6da6add8d2c51474c6b4db9411e9ff01d02024c3624bfbdd95ed6b056697b689208b344e1f11f6d46b98541e2b25247f9beb688e7764ac46be4da6edca023f8f30605ab6ee7dc8332b5dbcead1c4692d74579cf7998ccc9f319e8d83ef2c00832b9e9386eac69c8dd6812bb2040debbd57696f5906b717d56357bfff33be178c60c439b1874eb40e87c6ea04d172131f28aae87eff2f0d0d21c848091166ef39978117c30e4b023be0308f34ed362ee9158910cc8cc60ac08cb8954b4b8630f1e0b53c8829559c82e1eec2171edde7a9cf01dce2c743f05db6e828108a51a4ba1d1539a8fcd6b2cb7d05d28eda75c56a342f9edc6bbac4fbdeeb7dc9f281e30bd8e85e700bf7638066b482f0a6344c9bb05db4a27c5d5459791450233cde22b01174066e4ad018aec12b23153d4a9dc57bb34eb6a2e3335cad9b47be5b703e44a18c02760a3ef21df72c5b000cb2b8531bd77ba592cb90c95bd965151def4fb63c68df07d680b19bb3b6fca2b8344efb289c7d04dfac5dc4b273d8168b54bab46d4d93c1d552dbaef136dd9dd6d294b9f7897fdd8cbebd749ed9f04cd33f175ec33835dde68164facb811ce676c8c9bf95cf341be8f576278ab907f3c837570f3ad288ff76a3ed8750ef63de7cdd3aea078c687f579c16b79b41f6dbb051ede3c484d3fd5be944317ca419b91ae7f04464e6109af3ca419995e3435a69621d6459adea744663c14bc7c0b4aa180504cb8a8688e786d3ee8f8fcee42723541caf093a3be0b20215653fc58f2e546bfe91b0b32d6770f78db203964456eed3c2d96f2533e30a77ae9fa0503e69e91806b38ef1a03aea280d8f8a5b223e479df53677aba38874c69a419bf3af93e5fcc208298aff2744b8c25c6ed3925a7fb5fdef590b76f5eafa57b2faab99ddf60a6c41fe10e319371638db4b73ce7c51a231637b1c1988f44d62211b5bea6a200ba1ad3e14b2c006ff251d0fae3745fd98b894aad5ddc3fd7e7c27e7d6fec43341f32f99e5b6d3caa6df25a4b959560b303a3a6914da78b74eccfdeda396612335eb78653860fec5c46a6b59bbfd41077254c8e0cf6aaf065244047bf043407fdff4ebc5e4d9aca5d9605f6c3f63633f91733e4365768f82d783a7c16e71b85525946fb1d39d8899fad00476019e5beac7f6b86d176dc1d95abf1a2749e08b7fea567c975d3d51bba78a3ff67ea84986008283502d4ae0af8d2729711150165c7a29efdafa6e78ab8cc213a591e50cc3345252d7ab2e25bf9e9736c4fc366c5d732271e7fb879d0d3f9409368731810a9d034102d3389791033839a5f04d9c47f1cf5265562db53472448bd4004454f8458ac793d7b37ee56e684b2ed02213e30bea646974be0b4cc5fc6a8aeab2d392f430ba94f3901e4babb96811dd27c72dd1393ae6a1c81f53ab90325ec81fe4819442ddd4ec777eeb8170c5f1e238b176ff2c5242f21d5548d845ddd436d070ce5d1fed2a2cc72e43196222e8e7af1c561642cb1d6e713a38c52236f570a7eb0c5ba9ca49e64ad84732c1fce9084e44291a9b3f25b98269296c1622c15e580e7fbe21dfeb1c9845523895cc4eb47dbcbdfdb202988449a85f89daf3fc22c276b527b4d3bf8211240b9d71a6d7475ce8e457bf00e82b360e3e2e32e6b905a5d81d52ae7a0f6115e09cb5fc2d3b25adaec6fc8678e35b435d95f7c7668fd6f020b1bece17f15039ea3b4feb7e6361ac785c0148eabfa2fd3e9355296cbf0e0e1f0ef6606b1be29392e5fb17f625f94856736f95d5fdc6b874de08202fee9e68d33f97064da07472d216f0904b20020dfd5806e9ed41ab6cbd38b9a791f2e2654d4322f19973f2e8739ccb47b90da70d67eade3e2c79f73c1c1c122b85d381e03e33ff83964ba86055572bf3626d781887783cdc2d8824d73548dd7cbae26fa0b20199b85200a0f0f92611af9cabdbeeb98dfe74750d1f0a206d0e1382f0da574c06070b8dd55449b7591d59acb03ebc088ffad9de1d918fff9f7b1591a4838faefb437a03caf2976e4ff59f0614b18c74a181dd86d796027f21bac75cc5069e03ba4e0580893a1203beabcdba15a98547e96763aa57652980711531564b45d6e0303ac8bfc3e0d9cc3de13b59261a8fbf39470d905ab3ed5f26631988d6a13b09ef4f24200e4178d0fa5f985d27705c1570543104ebed4db238cab002b1a5556400aea82bd14ae8e4499a864cc715f29a5b38073b659a8631d730aad58c4043cfb7fe5693650c192df3e5b9ba8b8f276ff3c8661184345b9f9b8e59e51430c2a765781807b027a8e91e8d3b0be92b111da9f34a50f8bb8d55baad8a7763c1eb199c554268299f28df62ce19bda8e159d87d21b559bb2ef8142e48eb18669a68d1d51abfc9075555b55ebca8ea03cef4aa7f39437a390b770dea841a9ce2777b464b13ee0b231d0d12cbe44335fa73acee29b86aaed0af80c9d6837628c449bda69d9292171f12f6a434c678b8d30ef7aecb5a49b346748fe82bfaf63fbaeaee5aae77007d08bad33b478ce348c3a352b912b823c5acd46e4b69429fbe50a44a3267ec41165c488846778eff309ffd1526c490f728c9d4e485630496cfe369dcf67e0813762f30635ce889ce571288b3d8fdd12a01212b224eb44e99aea1da2c12f7a8d056805d22a97b6b99960d107f1870dc3d7d9484017f1fd43985d6ce169b5017814235d82b48578392dbfd44ab58180cc05cf9b3adbf17f76e4f63bc2feee42253d91bd92264d7a4e1ade38edda230e50276563851ba40e6ce9db7da8a5bfda21c51ecc806aaf00be6742bbddc60734ead710f319af8880dbada4de2688e167882da10540c088be5f82a5d9901ad26f6f92faaca901db245266f67190ff89f2a7fbd4387cc47c4059dc3cde1c4264975ebb20ef4ae20553dd5eff2f14c264410bf40832e003f7ad68236666c2beac5f591b2d1401538733aa51e13f0ac825cceb0319ad0ab29f4700414604a2744424e2664843644f9d08aeb4283fd6dc4682289677207057ba78854c98c8803af68e9586f4b8daf7c088accff69bd3119270251d60f2761da0026dc22420cba44a2fb5212035322b67e719f2120c9c5b61607e27bbea4c44f5c870a559f732455337821068afe2dc00d7f5f896638fcdef28a78973f0180b905414ed28c92e048fbbcacfb6fe138d101b45d89b8ab47a6fe3dbec9e87b02a3a82eb542e70f3b78229d1e49a72701c2552340ed72993e7e3d81ad14675c34016894208b573e4458f9651a4d5b75e4da9eee4e9b6d67b31674c62676713e7bab0d64f6e3b04bf15ade607edbf3da9d54adb94cf00bfd57c9a76e0fa297516ab7246c734d7ec75ada61b4fe31916415ead8b12122cacd5ce3122c1f95f373ea041c744a643200dc6a52dcc00bc00b884fe30dca32db9730888c27b1a661a66b2d3f861960c548870b3db93c426ddd8e176d20b4f63ad48853ae8b63bf39bba8f936f7a5fadbff8f89c7fb56e3abb2a99275827571962f1c073b0db123c53a66884b73d97c26061b0224d8f53b8bef9cb96e6404807c100ccceb3c894da649e0e3cfc669744d31f40d003c0af915c77bdd15f1e71ebd0bb7de5158fc4961418aae8d885ab3b09db2459c4eb8a2df7519ee0583c2368860b29319cd792053b67e4440cd43c816bbec53b3aa56a883910b59d8271dd9850b34ba870c2593d8254272e5b6234ec0098cae0dcde049e11d1e36e712ab3bf26dbd7d6a2d82e33d788e44c8b72156db11ad6afc43d51475b56a089669cd31405e7f1e0c89b62154933b9ccd44f5260d4610a3f34fed8a3fe96353d8ee925243a8fad4044478e3f7cca883876822a6a5fda7379cd7dcb60fc30b8e6d763b5f085f03bd4eeb2e30e9b5f400d2ed685a76e8fc77eeb31c1aa58e17179b716040c4a6c7fd2f6dd09d7f3e5b988e3bbf9efb6e22f5a6df097a8a9553fd018cbaa479398f3df8801caba8f7c3c2f3dfe0617be47618438f4c48a6ddc119e7840bd1b216b952e3b4943830e41b7e5abc09a7afc716a443387530d249bf6cb92cb7c57c3e271fa5c5f5d6bd63b7064b2aadf422dae027bca29d61d1fb724952f01d7482a1c728242dc8984281cfdb12a5a4fe7a773bea43b00fadc25227602e729973226c8f10ef1213d4f7bf3fb0c9800ca0556fcfa44bb50f13126c3be7aa82f049df7f35c5816bd95f00e1936c58eae39a403d54758aa987c1db015a5062554d4c4ecf47b9648b93c1485ae8b1287ac0032d62472679e90b82cc9768c5cb75ce11871b163d9d3da7dfe14f7717faf10e3780a4d87790baea7f6cf00cd591fdafac69f2b7e3379fb826de0a377ae66b4c2b074c00e6426b9e7b02f982198175e3b838416b755da74c9409e2d85c920c753f53eb0895a1a8381dd9c97568bdb8ac7b827754c1876bd268dfe7af2fe2b858a9be7b2d5c04c9eb238958f11415a045ed6f8f22c0d48e7f0195b994edfd5c47452cdb5df0a05dd74c774c29822f8538534bdf200bcc4b48f2628efca7970ba1724c589c46780e25676e1d9b25fd307c3db34edda6f234897ecde5201442c77a3413a98a7d97ce8932e69afe92983d1bcbf914ac6adfe60752540c83f7ae4726842e2b5527c5a52525bd59f57686db1964d5dd5a839b8a7a2594b5bfc236a8b147ad9aa9384bf66edd232eb60b01aa6ee1f42074ebacade734d97369ed29e74cb36c21a92307f89018256b428c23f056e98070deb5ada39bd340a7b046709009d06b415acba16bde8065ca89c77a837c600f62fc1b1b94796cb8f9fbbe3faf2f6bfe6b57427040d7ccb5bf39fa0e9610f949956a54199c9548d0c3117ad600c4a2a174faa1b0b6d4c3549f87f86954905c271cdfa953e078a65282e39ad4ac8be3dfdf57e1b5759e43ae4504bd9c776893a62144be00bac9c772553be71b8a6b9cb8fb04d98d5a4af3360ebbc821dfb63a50393df6e62d5369dc8ce8f4c33f074a08ed001e26da867bd5f0c3b201b722f97db4d987b2c6fbd0b63878ad1b29f257654d86df17a370f047a4e002dad2b68dea2c9c83bbceb2de7f2fecc48130d9d415bcbc493e2f7ad28ce2f4072f5583bd2537946978f1a5a569d727e41381fec32a69d0ac10c8405fb34017fe4c8324a843d33f29f1dcae3b704a09b4b757830a525165e51485d12761f85ef0f15e62ba4094e63fbf2a5983944f9e2966898e1188ed79f6d9549bf6dd1e0df5988ca5c3d9af12bb708829b7c90cc4eb2861af6e775e7ce4f52c7825cd130c720adde3d6086db5d48c0ab92d3d0b1ff0fbe22a6b4bf726609587cc671c8a86eeee1108c7f4d1a107c0481366dbe775b6f851070c23ecaa972c0bd535b81bb6c7a29b0f77fd4c832b50fba07240dfe7924e532bf91ce7601dad3ff6ec6305e786fc111728978fe1668f57867ab7acd0366e91c1135ceb6951504797005208aff578434148015152c2bb4092505ff7ae46cb669faa60ca862637fdb124f10e5a7f57e4588fe4864ecc44128756f22ececba76a9110dbd458428a7061cb2ef61d9c8550bba56e62ba47380e8368d347d16be75c38880b5cc36438271a31292cf645f31a9a6bf9ba10f7e5c2b49070ad36d7d3a336b80d2bc72cdada728586bf15069fa6258da01bedb39155c9c14efe6ad4c05b25efb293a1e2de5246a98f852d0bcf484b34ac1d954986685a32833586fc394cf0a5b0fd9750b9ca2486804313ddf4d68bd6ba125de1ef1d12b5318c9e553a08209b41ddba020de398b69cbaf802f0744b52749bbe1a262157f8550949d05c2f002ccae22f771748279fe2ccaacd7a545a98f68999a506b5561caba280b1cb6d794640cf2363f18c808537e2e341ddd3dbcc44037b7eba444fdfe39358a621e4cf327d74b657baf86a2eb9683e94d7e3c1fd79ecee7e335f2a6f8fa41afb01c780ad71525665ab3eacd16d391e0f36836b9e56cae63aaf4a0a019c1b61df2e3c7eb7bc42ca82d2cb8527fcef008bc72e5a3646a159263581ad38522be4b012724a7201253afe0b4f57dcc03dd825c181aa6b66711936f1b1a9d7ed1f14a9af324d413036c46603676c82a5e8d65ecc72fca546490d839d3ff1b7688903fdc4244b17e529e236906d9e7bc6ce1dc48b60c7e2d3a02c37984a260093ee1724d77c13125ac60f2f21213463210320fc86cf3e4c7a6de449717d4c362d2e5cd6c5a3f8f541fef92d0e0d1f9e0d775a672f0f91caa0eb5f456104755226fb036a66632f6f76feb46cdff0f1f733e5869f74768df522d51f157287ca46f4ac2b68e7b2794ba6264be8a1d48b4cfa14f4b129e882678791b0f036cb59566faf2babbff2485f127461d7c7b7c9e3e521923cef96d8365b055e0ac54912fb8f9d17ef9953988b29f0b504cc1bbf6b23c0cfd22b177a31234526a5b17e811473553fa362a33ae7ce06e1570016e86bd061c1ceaa862b5b83c8c6d3ed5f2b4764c98de0fb2d87eb41a8c3ef4d3b29519f9da7785974159fe2e4cb4cb1a2f943d6412beb0ed0cf5c66d976db3188be7205ab0724e45d05d384547e5997d02aad6640af7c8b04cc393fec24d6604ebacfc96162f9a2a840a435c5a2305f5f0e7a3d2b0325f48184481baa9e30fa2daa04c349f4313a7226a0fec341315fe1657f10328fefe7815c16b481c9d4beabd100b9525674ecb05b4ec87785192ab0e804b6c2b04794905dab09886008a076ea1701f4673ed30a629e7d109241a18a8e50ee6437e4d75ee5e4d5b6bfbeb22c92959268c7d7126dd81d4450101de98cec2188ebfa66234ca684ac9b501cdce488d31375726910c03529db6f68e6582203647a372b4f6a057c31068a08c1210f1676204de95b09884b24c04218b5adbf53c9cddcf68bd7f64cf0ac947b167783f3f5880760a026320d5ce0203f0f2269528228d0a15e2109bdf475febb573c6ce217153a77dd26b32d26b391d20423d661e29b33907e7c45918fadbd2976cd8a0364c9af628b4777b79c0db310d6ccb350f6a2a4f61f537cab4276dda6b75327a3b56ea692e3fd890456d943552b5bf08ccd5a4bef369e40a7bd3fdd9d6258dd06abf6b03ac3d53fe620f29b6c74334ebce848e85f01d8f812a3f4910363c498194c78ff6bf45976cb0b7c684b82864759145ca5d3ca36671686f715557aebf2154fb815264c1bea09ab3b37a7954063bad8b1d2210497449f77ee04d119d951c2e0bfa2e6d3572ad0e85825a8194060b889f047de6b83dc85e4413843c16e0389b35b65667e2c9385853688f938a04b65be39f09a6449845f80262a3e3241a6aabb6c90d8b09b63563c5e475d597f54b92510f116b51d01f8ebaf44508d0985fd7b89ed9bdb82b41a34d23b67c7eacfb12843fffbc0a1503c5289771c2007cc7a6577a376cb1d8ad4680362def900cb9bb546045052d69984e391bb27107e2777a230b23b35cee375705aa1be64da22a466edceef58b9a56652959c1e9e28e8af74ff18d090bc17c5927ddd8cbdc888721882698188ef475e9aa0d6f7ca5a6426548aa40b02c56f7e2d810ba3782346fba039b3df1f1b11f68ae795e668a3bf4b1774d775fc4fb8d5911d21c40767c830ff80b88b58fdc6d6fb1aaea7daa6941a010aa1305a97306f03bab8e5063446104490b0d083b8a5c27d2b853366b638fe5a6b29f6f1bd5edae3c6e1b7e3ceb0b98ceb69b01f2298a3ef26e99da9af6c0792f078fab0b5bc86d8d203b133e80d72b83fc3920c37e2320e2d1a9da2af5b55524ac1537ee62b59faf40b822dba4a841fe0307f64c209ad202b5e7820d4a81392a4a3e69c2ebec25b0426d1a41a855d151e104559d8301817fcee2308508e0ebd4be1345ec6e761c1d567e1d3ca9490e309668ec3e53b4cb338a507e7178dd3b6fbaae674b8e914626de6153e62a86fdf250360bf3d34e76d02e36a87736a71dda3447a870ecbb193cda14556c715cb5417ca07ea0468159b7e1b00a73ddc2ca057473ed01d24e239f34ee28d683cd38da970bc385685e7dba6bc46442cd9fc089d292833ee24622ec4297a70dde359c309252f2ecda2f130cb04a549dce53e21bdd622644398ae7290216ecfdc2cfcce1657c485986aa040852019aab6f242b8eef95fc74b65d4f47e243ba9d9f78addc3c5bce1fe05a63aac216a8944318d97ace398874e8010ac78af17965ed1a3f3c72eb7041a8fa20bc3e555640e9b1c57858d1db719dca1ed348ee6fd1614a0780e4e72e1344ffd41352d12cec013fd3c8b444b5e74e8c7c7c496974b09a394f620dc0c7a9ac0b044261d7ec8e0822fea42de6e766bf6b6447650c076c53afd7e2885133ada871e63be1148117af06cebb49f11b01d7447b2ec7e6c876cb4671fcc9cf6cff7ddabfc185aba63728aceb9060c084fdaa0c42895c7122aa4b9e150af2caed8d7682420fad8102b600353e4174fa9d95417868d32513113d50e29a83adfa79d829b752f4d410f462fa804a8d421f72443518593c99f7882826486784a3d578135ade05b9d220bbec34b0956b64e093442637d32057847014a43091f1d63dccd2a655a1b50ba3342e5e64ba50954ecbe8220c775709c836d0a235c9eeeba37f71d3d74877fdaa047b288420e6d53ad06b7c17ad1598e1b043d8b9305aac524e84e278141aeee32effa7f2e213dc44a4295c3c61a2a95ffbf6095051505217b426cebf93746d6e2529b0022ac29f652658fc8c6c72c1d53328b3d2a52a59bd2fc1fedaf6216276b517404d2234902ddfd82436255fe69edf0e11c659a5b9c516bbe02e4a5ce182cefa001ad6f62cc33ee3c9da73bf4839f52181e4e89bb79453809e5c1d76f68b436b4980778b25d5b2f18af267d31ab367e9758408463d2673ded4c480baadee3a6a4721512f37b82967ddefc0dc0db7d6ae6fa3cfa058a3ee133e5085b3daf2410b43e7726691ecc452bba2f4d4959605f1505df01735727550380071426cf4168353df4b3dbd8e32c01723199ea58bf0f5baee9f2f0a2aa267cfacc24aa1fae64d4d09b18a20c43e1cd9261a865eb431e20ad779fbbb99d9d53c5036c8af7ce8c92bdbb7fb441a33a5444cbee4468c09bfc51e2f64b46719413a9dfeda68ce34c7d882592e9e155b144ab385ebad7e94192cbac57d48980c05f441a2a5a5178fb894d1bc8af5e330d52c7db692d6211f51a13d7d5c67ba025d9cf69931451f8b495f66dc92ac319c13a941b78e60c0fc0a2b8b6f77554bc38185b28ea2f2103e93fdf2a484519d7163650bf40e6781a76bef8db2a20173bdb21ebbf6c5e0942a3921be45bf2590de14abb2a51d6c22277830d2404f04f7e41cb9638c78ec0a1507d2aaba7225c51e2d332fbf020e80fd02eeb5821027f350979e9ec73f2365ecf0cff546db29d46accabffa9c6690d1e7d7db4bbdaeccf617b0851a56ae9de97dd1e74fcb5ba236e1b87d4794ddaffac98c781b2a16a90567b62f9788f53e177113f85eb3e48bb81209a8c0b0135770f3e9bd4e2f1b155d61a6058ee9580cd9bca8cffce690e4c7d12d615c4a22f4268c03a95dfc57efe674d59d5c7dd01075da509865ce65e6f91509ff406aa93a51374ca7e76b264f477f74ab59aa266d434e1eb7894e144dbfc9ef5a38f1cc6fc2e30a51a1de9b5a5f8170e5259cec1b1378f31484571fa41d8a3e786adcccc5209306652aa6a241c83685da8e2d02b7fbc23c1b534cb8f99090e9172c776df94f0ff40c4af540ce2d581ae919b13d79ce895834020a0f6e9e7d812d145887079cc4206a7b0dc510129bd1854f5c7862a2c5488bc9abb3d1deba4b57f11b0b70703956efa262694f6e5ff5a9c892f90599cdc16ba6127e8ba836a9b0d313c8e93180af5e46863b2ce9ce1b6056b24bae8e246f4d6809325f97d38abe803dac23685bc6f9935855b8cab5a9fcbccfb2d87b9ae824b1e25fbe506bd8d405b988ce7bb0c9f06e9687e80e3650694d6f776f832eaedc602f06610dbd5d2e9eae221986e7ac2b1ba1282325066b1b7e2da9449164e602c48cc1d3393f82b9b6cb3d8d98e9d57bbf3e173b91a559d9e35ee947ce5049136194d6cb340ce5c0bfe073cd388b4d9a267ade9bd7932a9a439a1a34f23025281e0e32b88375d36b87cd78342af32c20496e77c0c2c0516282136a0db03b0ad2da5cc32f3eacbcb9627c4e1c874bfec8d45376268734aa1ef1b2f1c91cf5b9f5d48ce23b5b6002f3aa90f05e0f22009f35673eaadc7bf28593cf13d59725eb4eb5a3f7346807e4baff79580071e0fda6ee3c94e4e24bc0474c8de12317a15071bf358a77d8f4ec82cdd90796da476db317e7cc4afeab65d0f465fc8d0403280c73bae6457ee79893f3dbea32e2b3afaf7155b51aeddb6acfdbab0f1d16a9c1b997c7ff0658b0ca22f7a82d38cdc4a9db7ba9a51a179f324e850558cdefd25918cbcf1b83d90b89018682481aa434a5e3c5c2ea79b5ccbd51e23f640ef7d5e4986aeb2e0a0e6c21810d73fff2288e1c457c2acea1a7803d00f632eafc133351d5f084383ac899fc657a38a0a00786983bfc1f2b650fdcdfdcff5ee71a2c30f534f809ad4d00026ec3aa69668f8d7cc8fe855195c1f43595cf17c78bef7cbd8cf9d2b7a2588ff5c1c5b5dac656d07fd9a323a9cc8ac77b909f71c668157819c2c95d77bd7db4eeb26bc57c710a6a7ce06045e3b0e6d2694c1bdbe94080998a1f1568011659d70b889e381ec9b48f248e18ed6a628205680adc586aded3d3d989267ab5cee278f9fbbd7cb1c88d379a044b931b88fcf1036615994c674c8a6cdabfb74a514e07ee7f44b0f153f7a504ff9efd8f82c9ba979f4a47eee10f78590fac7b656457525764c28eb35e1ff92c9b490f951cec438947d70e61cac62cb3c7cf40e623c74a88bbfe8ca4da51c240dfecc8a9339c841f7ccf03dbd353c7cab717f7e9060c23f03aff480589e3acb2b2ac55540e89aae881d94a2bcdb524a4244611cb2b01f7ebd714a28e1e3d1cfcbafb78007589720a27c881135f7e7fff2caffead6b302cba7aebac3b924f9a09a63e36339b43b5db2825ae0f7f8c49c72818b973abb07cd894b2f88010557a6fa45aadc7bea423c307537fdee0b3b1a65c99ebc1e456a166d65531b7779fe250de1f149249d70a7b2896b8a6e54149f06e90dbf37e7a59a097711e54fab892a4342aa17ec45bd619b98b757d8e15f5e5f5a7ad1e78cec605fa9386ebad363557f25c965224053ee2f67f5528b10158c8c483306b24395ba73687b34ca00b8e959cb28ff5073882203d05905971758175e6b371397e27098703c66c4462306ff1a06a14fdfd9c7e7c941552959e8b63144c4329134a2aef09d5508df7e856f51347067d9beba086f99204f4f3444d7fd755e49c6dbaee610abd1f4043b6d5129f691b060a9aa9137451ae083f0e9f635a1e5998f7d9d1706a72248d063e841b233892747fb9e85cd5356503bf91b243f8de44e0d315687b98b3918721caa6d9019083e8aa60f50688a2eeaa33731976d61e7e98b91dcb2c7ce819484e0645b214d3945f004666e010948c6ce46c4508664d920a298dd85210c68e19487a9f5ce3a635526a0282d30740a84d13de3fe99c07c2d3dc2828cd6e8d9cbb2efa2c99cee533629cf6a9b5060adf8a7e2fd4f4a4b61cfec17776e6c9351675259188eed6188e2ea25d754b56face5fe471d3c30ece1c4aceb0e841387f576eec960b03d5fd9a6d6bb62d849dbd114d7a0d06b4ce383728e008da7e733d8698d95b70fc3bd0a732bcb77da467a60ce6f4c8fc7f146041ed5acf218dd623bb1231c506fc85f47e9176b382e7e71964e4cc2cafcf8143785f1f374f51691fd498f493d26c92dbb4f6c62cd280c843b43b3159b501137c564ab7e17bffe36b372f31ad0167657d5c1053c5747996537cb130ef7e1f16524dd84bc0db66026f0f8b40f2cf36ca09911276cb34dd56c328dd6103b5e1a96cddf05032bf472359ad186f47b0e9889ef3764c3077d1dc5ea883b79ff5abf70c403ed2efb89e701fbd46d5950009067af99681537ba4099e024f032b264da594d59961fcf294e730e4f272c57388777dad037ed47ee1925128676f0720cc8cae7e6cfbcb21c2f636276b8e9649c985d4f2f02d7a404f2c264af5fbf14da615d20c1fdb53f8133b4870dc78c47f18363d505b899501af1e2fcbea94e15435f08d5e03dc24019f373f444f8377a2c18a5c3263487294856bb568d88b80553fa6c25cf6e26537e9fbcf12adba9b969cafc92c63966c4bfb1e79523cc5b47233225f918c708fba31d18b57fc9f8409ebd094fa0ef08de6212f9313810dfce80196c72d528cdee227edf2ad20f8af775b49c448ff11d28079e2eec89bde4a38448cb42ac19e43876c961817fedeb80cae9115c573b671a831c1d32751aa683badf955abf31e5f6e89f198b30764763855a0c3ed8653d9a3ca631ee6f83f4c66c31916e920369deaf6436786383df36874e00b790128a8a4ead7e49981d095a6a312fb8b253b26d989dd641d2078bcf8be51d01eeed6bd625dd49e45bde5f77c0e7a5759159153969985e16c3c3027706932a91424935258addabfc9a562fcf95f897ca0fb885605213bc81a346134daab15d479f0aee07e677ca462179e30b9258d5476e132021acfd1ae0404d36e0036031de1f9aab4463c858600fc5a8e930b2b3f76a1b709c1d001a3cf4b67f153445efa2151cce2ba75fb1f5973f4e275a05ac3c9cd944c8ec4464970049c0b96c3b192d988f41f07b24ba752de1bc8befa9e7810cf9f0c6a7dd5469c3efaa73290716218db80c9980a4cfd5c4605967dab729bf6f4d26bbb09023931b1a620d036e854496621a7b0bd60a89c21cc2935aa3aec150e94e38c4613c508a1402f07d8d7ec3124f539a90bf8ebd000af07a8673d43d9cf963794f28458c4bf030e44f515bf31b41f9cdcc2d99661b179588c986afcf28bd3cc4db5d7236c0b8a763b23a8a45e2511caa85767054580c269f2a60f3793d68fc190e92a4b085f8f9c4cd2d4b1c730102cd0c551364154efc6cf464f8a1e755cac007e8923d45f73f1c37bf194e740d233ab14853ee785e30d3ad0312ee6bdc6e969e5e8bbb071ef414d74f447bd9a98c99231cd81793ada25f342bcd2ce0f424adf1ef5a5251f94bf355b4bed645b7464961f0bafa3555abfeac7322cd2181a549ffecb7b118a15c0d3bc338548bfa9885a420363dc8e58bde0e4c1f2bb6e5a7369632af8c268966f995512c5bc93721bd9cf381397d5e9b3afa70a9e3187769dfa82eaca29e0e0fad053b45ce0d1e31ce2d8a0712bb004e4667834597adf29caa8358d8a3cef82968ceaf5c3787c55ff6dc3d6b3e11fef8069b5832e60fed3310fb9f7138b43a8ca9631b8337f035e709f58cbcbd43968052aced13c2d3473b3d061e3af652c456e1961b41feb15b1bd61c77a19f04569fc16b7936be7f947e095021fa2bb303e43bdef9e0867f15657654751181b1365eba92b028203eb160b125ae3969853e38c9f2f8ced3d2ea338e8be3ebbbca089a9a042bc18cfe0707d783dc275a4868f554cacc438e69f6b69c72138ca2a56a6b18c83a1c46d20666d03677dbfabee8416773408054cb77bf9fcdc1d417955a8b8ae0bcf888a0b206000dc47e89c8d490141b73aac80ea0eda2f88c49121c81a809e6de00afa6224990f8925c5d42d271e084cccfc22291dee2f0de5bc76707806f8556a17bcefd6d909b8e24279642419a3da6673114cd1e2fa522a69dd17ddbdb08829dac8a5878a92b823c1b17c3911fd897f03fe874598eb77cbd83b0dab0f9bf2fbc461c815d75093b4c2aa5e07084877a8fe07667cbf5ae426f0e7c3cc88dc453389b0e9af19f01cfe3b75ed55785ac43f88d3c4dfb588bcc0276dbc6889ad1f9a54a62b80915bbf59dc83f28b38e6c4ae508bf05c4ab9482e6555d0012ef0b830eda58003436da5f6f96626ae95814ec782dda6bf783d678e8a6e187864aa1a5f2c1cc89cb2dbe01eaa8e171ee1538bfba3a63072b120fb3ab55cc63809dbda7c0232e1eb2f750ab54fa304eb2b462590726f95d90e6604339c2fd0e3473402b0581c29e5174fc1289019861d0ba1aded6879517d98a0f3d6b8a94cb9f5c2f9adbeb6e831c096ad23f5b7685f9235e20f1d1a8b9e07f92d0f38c734a82c1ca91029df68ce519f329cfff989252a402f54d19a88f7594e3f3dbaae87138f2e69c2931c05a3064961b50f4fe162e91ff48450c8823067cd0d41a888cb9ae312727819104a737563251c975fb9d49e36391c19572b19a6bf91c7ed9f344b6ddbc0911cc9bcdcfe66ae8c6eefde1b99e32de49accca09428a1d4f2a8c6b7742913bad3c072e4fb5d5d074b73e0f032e7cedf9862b14e6d584fb8f976428cc7c7fb051aacb9157fa64e45a05ca37b6b6ca71e14a0044ee5412d79da0f7c81bf9d7ddd5ce8a4f90aeb4393779a5e3eef65384ae22f02c0d60f0bc7e028fe3ab277b40b05abbfda309bf1ad06d6aebe47b7a1427cf36c6b67cc05fe24778bfc7f44fb50ce3529e4ca6cd877e7d57d15d34a7f7c744adaa7dfdff7845b8830b1c73dea986c315ec78d18ce70b4cb7b504f9ec3d45ba488d5cfdbfeaff79603a40e57f66603f692f622df31daa2dd4aa02092e990dd045cc771f303a8725e8336d94aa29a452fafb0e1494ad69482f41348fd450197c0d902cfe089c1bcc740830d30852007b696cf3ea9737d314cc2352c33ee01523675e0d09feca48a1d797f7cba7704f21663af31310816aa13c6a11db8c3f350a4852acecd8f48f215d24b217b281276441a5088661ec39f3896a9a1b7a5e3f64576538c7da53847e7fb823ead199d7a876d676bdff00dc2a7938dbf340f9ca69ff5ae639a2c6af3db1517fc468309962488d9a064a1e07b138d2270420e34f62b265759e6f1497c256f5a5550829053fd8d0314827791005115a03681b34e929bf36952bea7d672bf31ec2cefa29093d67e44e9055950276008a6ea67e5f95f4f385164704c5bd94f3a7221005d5150d7d338abcb37b4d960d73c3c8bcf748ec470b83b6bf1df80207f0fc261ba37294d54118c6f51cf173f0e1a529fa8511d5de5368044c38b63d45bcd7576f411fa70a184d30f2a4a31e31254c1cae44da8bb6ef20c312d51ad3224ea9c7522bd4118159c759301ca49e1c78e9efcfa8e0003052584ff46629dfa2577100340133f4a901a44a9dfae8e6910d5a823d95c752aa9ebc0f17b15de5db0b870fa0e6641518d507a68b8edcc966884e002ef47e9e04065cde99857180607e32a772ebc10c80b707c5d28fc10a77990797ca7fcaaf0d4705ea76047b66384a02fa33ca4e761f9a0f9180b7aee80d9acf2a73ed01513d9216d31ef2b6bc2f7683d14d587ae2da4d4c2174fb3793d61625484c55fcc2902a770c398b3e11a5ae8b1158b4293cf9ca304a9160e11d030ccaf0b62abc5af5119d68b480aa6ea0fd074db4ab2d55a34332d8df1b23596702070b1556b84478984a105cf5d6552aed3102e6b01643e5057d6f66634e8651d566cb9df910499c27938cc7e9f24977397c00092d839e70cb23752223fcc1780f7edfbf980321de0991328ef40624d24f73a359749415d6eb28576bfd00f4887a6f1afc6316d3f38b878feca25f8bd1681cbdb46815cf0c17016b5f4a918a81fe5a91386b4c72a02ec778a38c08ccf216c8c03e884889e489e05e0fec568a069fba788f37e5d70b9d495aac54e79322402a55e62ca0face02793fb21a599f253edfed7606d524be53d1f0c836a09b9ddeb0ed442853907a25f9dff5be085d7b17cde154ea22cf3048803c271708313079a4e80339ee43159014a53f6112a28abf56644bcf0d186a6c7fd7149fc6bb2f04bae08572e111e8d833eef410dd43f3b0775b647306d6c1a7cf8db715e56d7570366b716f235099b181a71166dc9a7a6956a950d4368f627fc4fbd0171442a896790d9198fa4ea519b030c6ed48d4105bc04ece81faf278fc3ab12d9b195c384a132984212851d253fd21d4238cb6df09b80f48dffd1fa99fcbec5184c22f5f38fe6421426b4ec4489ca67f1e40dca14de8ecd5f64f1c5fdfbe0a70119baf8ed60960fc4aa239f9255dd3e801641c02078539c0b7a35a5fe373dafa76976e1731fc63396795793f5966200e90b7cf5fcb98529d7d46ee7f8c97af11e088f63a42951302dfde28a271e77d129661b9cf683eb1b9df0674ffe536d644268911fb2e05d9c92dbb87dd6a871a136d2c0c48ffd83d30f7be093a79fb9d60e1870a0360b63e3cd30c769fe01263b41d3d7c0d192bd2d1085cda5e774fdeb7a1be669a7bccf51b3a48119729589c09eba5372bd341d397244ff5f13dab5b112b771879944538530382a9b3c0ed617f56bbc8853f81f35efe069456accdef5edbfb5ba648de04ea148b57283a50eddfc657600dc41e5cea1687d26ad8a5f0f54e6a22cfe78a56cdc1827d375a558f3dba98098b4a55cef428f8a357ee04c62f6d9c9ed41c1928d31b97f29e493eb4ebec2cf63d12c3beb5e2e4616cee0bfbb741bc821ff72d09c4330df6798713e42938f863428e4b7bcfd46da2e0ac53f5a63dea44067561585d85714969763da43f62614cabc645f95efc0888c3963899efbbe10ae2e441d692f25a16fdcacdb523384e8d843d9fe15fa21877c6f5cb78e2d8e22e406e6056a7a840d5fa891811459676d34ae760ccbe1b8f0ca04df0c4425131d2da0e60329814c7857ffdaea34976877a8a6dde44eaf4f3a8e90b93098c2973ca0b49fabc2485f71469c61adbab0e3aa0cdf31a1500409f41b52d487febe67ac4538161366c439c45752e785d4a7b230937f99555ebf1924c324d20c5b27ae8d730c054047a23c8620fe325e59a17b1488fdd8e1d8b4c742ee0aab4de1b7e1d47aa44fdda5f7ce70214e311bb00c37b1629f9a955d1d01b4d37b465ba02c6f4efbc774fef83c1da852714c1c2a02959d02c1b67415bc3dc26a7ee73a50b52678b7e539e4129423a89e850286deb6132bf9f04b4b590dd2387971ddcb7d2d4b","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
