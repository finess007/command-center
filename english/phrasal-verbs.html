<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6dce8456570242fc83b31834347cb2e913730360397e3e227b0cc92dec445ae353eeb2b8b8fe4d75ed5c5f9f654ed57619291e0b7bd54d6e12ff101c965821631775faa8670f2803073aa1095acbae1f3a1a4a0b39e8ef0b24a1a7f6febc9a410f8470450fae5f444d18bb816e19decb52f11f098c69a9e1ba17c679930f81660436ac4c63763a41670dc65006f73f56f56dfa0ebd9357501c6c4080f2d4b4575d93277f30d23d20c36ec9d2975bbc23bb8b62fbe443a076d99955f6d29c3b504071d2b5d7c21173b3c391200c95fe189a189e91675d88421235fb6c3e87a9c8678738b0c8387c87cca8ccba8ec095031c1e402799444e6ef8c4dc5248b62c6e675467128018a907afdc1a7bc0dbc99c8ad96f3312e04f51ae3c3e7aa09ca471978216efeebafd64b2da2b65dd60bc8d84d0c5e6220d26e1dc55dc0027c6c42efc747df7f413c6d0ae379492ae66d356301f8483e7bb58440b6127f07ceeae897e7acef69743fd62d1901c450851f98e062b47ab837386672926f178218924267fb2fbb5f41091d710b82845f68a5a73fd02a1bbfe259c6f2eda41b246499af73d142be7ae19d04dec989eee8b947cf8f4817cd5d154f7c6870d58aa0deb9f2b5f508ae2f14d9412dec82b4ceffc21874c4b1cace689c0af260d48846d5330cbb4af71d313304c1f16932c9bc1509c448d6d3803ae71c374561db8c560c7bb7118d4da7d5eb26b932813c2c1d8a65f5bc5a86c32e9e3276eda132be22c07e316352fb84cb3f8ed5eb390fba228b09e5fe9eb82d6daeb40b741c9e8e3b16aab00c8eca9ee67a44e3740938c17c38335ed3484ac65fdc14439fbae390cbe7ee98ddd1192a6f595d23774db1b3b9446fd0486f78c0bc11d95c96492f2a9ad0672cc2963c285d257ab0f27f8fd2d03231f4637a9b3be11d206e0cd5336f8040b4013ad7dac76bf5a7af875a91d2bead6c2bb98566b34dec86644564b053263eda18bf9f258139bbeb50884593c0699f64d640f7036fccb181a9e23ab550ef89d1f66722457c0a9551ce67d0b842a6b58040b6da417a9aae21913dc6af01fcec1cc0bae9c64e6e6dd5d1a2d22b329cdc0f9c995690027f87d2f7458ba7f858c0a16c1632b8d53e97212fe04e4225149962019dd212e897b0b4d9ccfd50d30ac0c2ee331d4fd0e0e4c33c55343763c116a65ed998073fc0f01b4d61331c1569366bad17ea063ca8f55a2b247ca621d6e2a7360002b772baf213e07a6144926a48df77be1434fd9c64176b1efb003dd6cad9ff814f3d9d3f1b367bfb3ff7159bfc59be05183ac1fecc904a89b322f79ab04d58b5a66f052098c10fa475045dda2c182ff0f7840d3e4e050cb5db0705977163d52c8b125c0dd250fe517840ef3f148624e2cd00bdc2520e2b3ecd4fa54f89a93d38769340587377774f277ca3cd2bf4bedd990b0ee54b114eba69f743dc05f4c153600d40c46d99632d14fe5ed6f2348a53325a88268236a836e85d3992e1b8e894130c518e74f81724af2f24934150be1ed7de7f7d21a0fdd0464c3de491ef8ccf054102f00cb4be4290d7f84fe325675b104088cb59afbf843bebedcac6890647ee51cf07a9a7ab729d38bf11d2665816153ce2690f663da185e9c7cdfdcd2a90e5e88c6506b5d94230789f237b1b9532fe7272570b919a4f4bfabcf7f6c2b23e2f3c932c8c21eac550348130b04496e7a0064a1fe2427639672e4b403a06c715f95cfa1b9a15ef0b9da7db2d89c3dd342f9c593161f42cca2ea3877181b480a3cf54dfbf8fe3f19bad01308c11d7eeb413e448a36c0abe12916598d1ca47480afa9df6a84f274a93aab979410ce7c97318627e5059776dd96c0c3fbb2120bcab24175911366f4d76e3b1a4f5ab539c2a58e6483594fcd24d65ac62b437a049d1dc2a4e723e839bb6ec50ee57443c9842b533a162215cebf17681eecf509008f5fa23c66b7c9fac50e2d6205b46bc6562ce9189ee3a50b7349f68db78ede618f169f3865301de5e502f0b60393e1a740335a79e8511c03d550059c27920a61aa36af3e4e6aafeb36028752609e504b5299bc0d98fdc9149845180aaecfb3333e496e22407d2b89ab9b445acbb0c2554233627dfa24830d305e0d9275799c1640893043d336f2f4a056b552627840b46dbbd4d78b8465de1086ab74e1d8dbe26fab596a91788d8b679a380bd1628a57465e38be96f0dcfe4c1ab95f5b6195b37e3a8554709d76ff2ff8d0ada69d44926a766049b4d479b78090ee1fd37bd826f55cdd21098eb9d499a97474689ed4593b0ce3176539e6e9e39eb9fe3023a83794a1ddf050b372c3561028217ac77c6509c0ac07b79279a500740fbc93f012cd5d193a9406e1034375354e8d284a53cc6ab4a9a423241cae2b3add012f7565b52de14104c369d236e01e7bc63809c61753ce6e24c7924aac98b32996fc0bf7fa7d3f63d3d15cd477670b51ffdcc72547ad488a720ee35a83675942c7a9d54beaabcd1f44a609d9f027ca4285e93b3db1302ea7d748a82baaa6210ebf5ebad15dc0dc08411b11fc7abb00b82b7cdb88177541268ff84b81c1e186814c9da88f9d0e706b2376c40485b56e3a4d5738d5a9e5682c0303c12f6db7d3633131aef340aa6fc8f0acbdcc2119e2dd980462660017c5f2a04d02b3966d334384514bac8ac5e13c0cf4e8b6175b27dfc36bc37c42c74713129bfa26f5437674f18e6cfc2580cd8e408b3ac733be82b3100941b9a5fda7ef3a5029f1d6bb93aac3a3b89bdbef64f3eb9447a5849eb653c3bbf6adc9c709f127fdcf1eb7405f0f6527eb489a2205d1058ae77c6f708e3b096125d624b252afbe8643b8bc4e47b3c5bdc71f7db5ee64ac2319fb41eb0b3713ef42184107d2331f8b07348f945d77be935df51fd6f1babd7ce1174ade0b9c9a20a382247d7e48508871c6f17842e7679c35031a82481526d72f17944d0373a89bcdc44466f3e33a8bb15f632836e28067c332bf54642d0793378385e76dd2917d582b1dff62188d056415be567a7e6c38037a9ce16e39cb7af2fd1dc47bbe1d6db80a3b8dbff6f0deb60ff47fd227396739b416a6b4bc5072a72eee36347803210302b75ddd549352c0877c9ae3315c5572d87faccbba81c5fd56beae8935de8fd16869b615bccd8a60a8c31942a833fb11cee42b4824d9214bcfe1ded57476d943c6698b1077583939f301ce916c56a6c90bff73a4d07aa98816458ec41bb4c65577a0d0fac8438df5a75ef87445345ba3cab6b78f665a45db9412cd41945c84e2fa1d352b3aad04ab549a85fa4c4be92e547d19951820b645af88f7d910d921f291ee03b20c21ff93151c0b3995db5e4da690c72b3321bd631d41dc4b2b26d64d67e99fb93d888d7962d0d2b2ca7f7d7537847e8cc18410782f4c1e9caba9e2400420c51bfeeca2bb972ee1d4b0ba61bd92482d989a58112a78c0fe23c092d04d4d7c086667b34fdf535f76ae34dee290758f7312fa0881368d5cab0c1cad046d8158362354dca6bb4b6c525cf6bad56de379e02b3882598377a7644b4ecbc0b29334b1aa28d2a5a9aa579e53246ace22458f6946d1e4d0938365679708dfe1f3df1644334e10f4ff5c04cd0479f9104b0a9ce9b710b66b63c532a627698d54a858e3a2e65c7c2582186d4569e0aca670871341bd934696f9b2333a8749337b93c28692756c56465a3a10cbdb002ac464eca79bec062f1a8dc73481ddcef8932d349ea96be330c3b78b2ebd80dff6c9aa75450fbb606308736110376160777376b84eece831a87135380c44ee7ee3f3ba43188ee9974366d95b17d6f094e81570a2350d8f025bae4823f93948350c6572d522959d4968959909d5cd6f8e3cc7a6d75768218fea9ae3d16f7a7d069e2a4c39c613bf14dd7a4ce23d1ca2d4d81aac468d3bb0efcc0b4c422016a828e634618c469ee66e16a6392da5a4706fe828878a31f91db01cfdfe4c0cda685d5ebb50fbf08d895982a3512f2c716326c445d3c3ada96f4ffd09821f5cd9b369476b0fe5ed90e957b1db37c9ad5f639c7babf5a0fcd870c960bbb500a6883f061da9d6085d01568d8f3f8101f3f37d9ddff9538845d3bd6fbffbe37b4d52203be99d2f6c5b6d44c36259eb233b4c265ff98f860a1e1eb4712202565f3e9f5504f678336c0ee2562cdcd1c1ec41030f9857bb0f0a5654276a0a7a4911e36e1e03b009cbb94be22afb1160ad529fee6877b7eccf3d13abc24994737c05ba45c96fc5eff7b1090258f22b567095558c6cdd5449eca94db4a97bbbf3d4d63233051bdb937a19b08bb5efd7000af702af54339efb8667d8eca9626884467c118931beef94692ceedd868ea0175b05144b91eb6baae0f6c697392b4143e467dfe8e5d3389ea440b24af1990588cf8e54a32d66b4bfe23a6bcf77a1d19f0a55197c701ccdd5fa0716d53be4803bddf885940982dca44dfcf1eef509367343267d22c14dacc5a9bd8533060a1d02ab884c1a07bd3a0224f7998e406972a92038e841c7c5da1baa11698b4f42d4379e737a1da4efcc2bcdccd380b0762817c6815c390bc512bd5e65a98f7fdb820f06bca566a49a854c97f6b2aafe5c70cc1a019a4cdf4660242c3ab02614efd1489d015683440df62823c8ef7652a3736579beae9739af00093ad51ae0d6b11b706585a85e56530de23a2709a9309c2171bfbb476a671fc1851a368bc72f1bd612dc8472e12ae96dc6d581bd2ec51c44e5d1ecd57b9c34cf54149384b181ca2a7ef25dcfd5d88ca6847a44f084415361cc51414308a5840b85b3b109008bb8ead1dbe71c4492f989a42ba7407d27888faa946ed1eff38a8f72ce81f120c1ea700859297e1a7c05ed1964b01297c991dea5a10e5c70e4f20220268c6eeac16f9860e1a1c080ebf222b6011c7f7a5ce404a1182e8407e1e899d93e6f2e21059d637e8024964eef0c1598a2ccf5225f95f17a077c345b17356d40ed12ed1fe620599ad425f18403e8c000e2066266c09c60acca9d94b9d0a5fde1504a5b6b326c3ce1b9d2b1e78b9c577f41a186dcf7053d625c464a27f916512111a0e6531e4c3d497c6fad91f80b34cbccd596d2ded989cb67cc3b1f1ecb55ef4fa03b1a119cf3240194eadb48c92aba15259d8171d75be30165d037a009c2a01b8d634d3a24f96268bee08a0b74d547a432db6b4b6649dac5aff5380200a52125365ff2f213e7675bc6120ace965ec4c40ba4f53a84380ef80b8b20cd20c9ee02f84761d287a2c86198b937a3abd23f10e373d9d86c2ebeea3dbbf5cf786ced1d1e3331254545aae74e9143655813193b63a28bf5f28138e75ee9a1ff1d468a86379ffca2a1908fc77d29a2092a98d07b97c47905dd1ef89f90cbdecec414655d0a83d238e9a4161abcfc707e5a3b00490dd3b0b078a5d6bb0299a13d6801778ec190ed02fa0a2acd1510c8a19a087c899dd4f7d636a211ca2b06c8041ba4d945fd90fc3cc27a2a7f3a546f9d03bbbda6485f84d6d368751406e292fe456aa11bda87c41eba41d8cb4834c58f9d42b0c1aafdfe5da3e70fd5176bc0e13e0d31b1dfd3cc9f5d085cbb76bf2dcb5336c887c601e4138cd02303f2bbc6523e2e31c725868801777ae6eeafc36b2e87ee7e229349cadfb670ce5ed0501847d9d04aea96100fa8630de3aa6fb745447d732ba257bc751903fa18d0ba960e442b03c1332410ac645597388885fede830326c97a5931f7c15734635f629d2c714ca0f62be05dd324bad1c9064d0078ff35026224a8a0d1ea61c70a0ccd5a38bd6bbb0e4e424a4440e2cdc46935f8c45c49b86a4d88d76a996625361afd695a38870825c5eee9885436cddbb127967f916525da2cc7e1af8b7aebb1c86db131d4118f040b021d2ddd5f9a7d40bb552eca4402625371bc78ebc34fc3e5710a2c5ba6c9890c5342ccba58318600010ae6a741882e3113c27643ef80470d1b48de9664ecd1bb0b9743276a93229bd691e7c3647c9c24977eca53feadedfd21d4217f8321bc76526f5acf839b4a2feaee75aa3164a0b7ae5fb4a76e821fd944171ed30db3c8c2fdf79fa5361e095666ffcf02bc83cda1ca37a87c81f73446e440a436181c7fa049a02bdbbe66f57ae8e9c8bedec1115e945e29714f7f66b63af847bdb6115391359a58620050d416d47ef48197f86e3dfb2620a8762894d3e47124996de87c87780a7d7c65a158b9ce16f5943fb9ae97ce4c9e6b4550f698098805b451fbc53c5d26f2743f4a8909df644108ef368f80aebe6b5fb0553b482626fd2a3e74fb8bedc32ac89c036f74adf61f1bddd59422979d3529f027eb372268a107799911388079b4fe80545755b9150465e600b4f7a7f254ba7686ad2bc111dfbba2a6e51dc5e49bb6b7002dc7f9212aa1efea1a35ad6ba0c5e11ef67b4419f3db170edd3de9ef9d1794fea56bff74d99bb6a4a31198708153550e4841f5f99968128ff2bdb45148e601799fbea0eb0ff89b135490314162ec1b071b0826fecca97e027361c2756b1e7f6fdda110a4305673112451474c03b1ba30520e13e97f8fd47dbde7a5617de1fd43f38166dce9cc15128fba6a13a66adf22384dd007629c17258cf42ef3710ba08c33adf08255d2aade21f3025ff2beb525ef89fde4051836e4364a88440f8ddb5ed9616cd35e210a92300f6e5d2cc3ecf77c15183df8b8313d4858ade3ab6d618323d0b962633edc76818ce2c31d69e78950b12129da495eecb3487f5b93c8da7bf489cc85904dc8b2e54148870f725978dde89abb9dec708e6591a92549faf1fe2271c21b36777dfc252c7a19bd6915293aa3c0760926cdfd00f72402c5ff66a9f21160d173a7467d3e8d0f8174531ab8e2d04e6241db442d94c0a9211be666acd022e7f9ec06b09c2bfd60e61657eefc14a5143ea23ffae5449f1221106f3ff4ca22c28ed711f910bb33ccc3d0e331ea9c4267159ad27dcd61f1869a1710ebf26e32a6d2d311d7716552d7016283951ed84536832f45fd605bafa302b99412e589326128ff384d7d4491d53e74000cdcbe9b96ebb385641d1a62f708bd68b87f2bdd6806bb77465f8367d56d0d8bc758bff19df2315998eb0d73f69eb64db86e9d5723ab311508a9e7f6eff5c0c5ec260cdbb64aa89e570ac04f97f068e2d661857ef9163252b2d1d68e4d24905d4bc47027ae28340f94f40c2fe6a66bfe9aa53bd435ae6a8c9e2f709796f1b8f4f604bce074394a5aec19e5ef68faf417b33b0ae6868e6ae338178a7a626eebdf24ab055d9606d97e79251715f2da2dd1365c69beb285d732c524199fa389450dacebae9dc5fcfa6fe85e7c75f457128e27f1f274a23d4cc1c4a2c3c8332525d24b5f5816a9756d2d29deb963d2db1541584af5ca3bada4cd894fb4852ca6bb5be688a337621b321e266c0abc4808e30d5908416a2b796226314f891b9cf357c883a9abdbe613010c022b981ecf43e37c1caadd5a8df7053c87f1a195f7f8374d7089dc4d6cc387ccf1f7019bf31e3239e876a97cdbae3449a93a899afd079c5dea50ff2b3e1a8c08be84a478d148aca9b0bc1ba7dd2f4a68c08b90b7dd413db803565d876d8271bd7958fb2e0574ed31327f6c5accd92f0de9227ea4cafb4b77244ee1943e4a2f8f1a7e46e0bca32f05d1442b42b6dfba65d253f55e5d61218639c0434023c9408d79679e6ef66f45383dae9a2f853348e1209787b4c76f2475bf2e369e357c6af0111580eb2801ce95e773498c9eee891f00c8960b87d9bd319ced2e996737ebb73c405bb461c4642689dc1ef2eaa156989a186f153b500d64cc42d09d946d7f4914019d2361e75d7a0275bdd394db7b3258601de88c7a3374a96e413cf06e8221057be48481941e710b20138b4f271719e4345730325744cc49ec19efd1c8f268005aaff0203d5c450fff9a0cc8784dab7513b7874db15d4563452a3e0d1f88985ad9bdd0e309073a191e85b523d0be70d355e69c102758d564aec833886fb0a3fd772bff1e1bdd0589258edbc1fbf78a9e6dd97ca3b6a2588e0270d4d72f3c14fd1c0889ea1ac7091567ddfc03a9f3b80fa46d1d36644d5ddf617ccebb70fe04a88df4485601ca86c111fe33240c8f6618811b8def0fab9d2f7aaded3eb4069a61287f3e8e65d30939375b0aeffc57c18f71d7ce1641d4fea69beb972b5377594cc7b96c148bc0c3c9c30fb0b7de1396847133160acc0deac6308f7a3b825093b7a79fbc459af565613aae8f2ee9d9dcdc8acefe8826525c348dc7de7284341717dc7c74b6bb19be0c1639aa9ba9d82a610b0acf887d35824ca3ca9f2a9944b7e603a7b7964fcd2701cdf2025a54a612e9b29df588854c0a39a798e85f12d871652fb93977efc3e70f06bcdc26ca47e4d29636f6054d30ff273c7cf2f8d1d3fb65bb4f34154651f08b3b55351486b82cd11f6e9ef2d580e4adfb1f97f29217c92581700773ad8bb1ba9b7ffb66a90e4e0ad119ca8c6f894377bb5c79fa11d7b249760ad837dc9458043a4efd60097029bfa4ae70c65c6d8925e4cf69cb1474396c133357ee4b8d92cdeb3a1e722e6392625a519e661820006a71c92fdab8a197981c32c834968d6ae4cc3fb1c98241542908bcaa2be13ffbbd83690566a36a9368b791df77ed884fa48ae0011259b09078b72c1690adc1c3dd40f869a44da9bf8663ea271c940307406e7ae62933bf31fa61adada6c3413676e5bc882c46b52a589b2d7ca129f5127cdf48f0985f2922889120da83ad3e6e19d78e6495718ad627d166f76ba443e5d86941e6bc27eff49fe278ddfd6c4ff51c7db2a556c180777ca5853c1876d92ab3e32f7210aa014541efbf2b62e548b8ffdd668bec0a84e500ad7864375cc2dc1aec75c2422bbb8ed68b911b6450439f222d2c6f6ee4c3b5b9e5ea852d2b629b193ed2e694aac33ae54bf9d32fc9166da09e47880f105aeb47223ff7cabf706e0d37bca4fab2227d37fa3b1b014133d678371d48d48a5eeb355e205be7ce8caa265c315779196bc1817f7b3d2d64f3119c84486079b2f97961a45f88c53335592c7a78558223a563ce33beff0e78e4c5fe59a6b23c57074cb9ea34df8ce83bdd322467e901e8f833cbcf1c3a04a2d5bddd8c2b15bd91e4bbf3fe7dbf49d53b1702cf40c06fbcce3d1134c164ceacbaf1dae5797c9877b2823444c25957cf2f9009d9b2c3bf289fae71bf49c2f10ed745529fffa077c046c5780d46e1bdf37505cecd4ca6f778438b304cfc2d4080b185e0b81590013e86844ef8b6340ece1c9c2b36137b566bc9637c5193eccbc93bcf9bb3a67882cc0257743f92b8f43d465c7c25dfecb26949910779a40716ded4b8640dfca3aefccab1a60735d38a12437d50a24b033acf5b910ee7b7f49a2ba8c8e70bd93bd39da6af297056a34df8eb323b8518c4d7aafa2eb8d184e7dafbfbf1cb11452a55dd312fd40b9782321ee721fb22a2577585b80058c43a8f6af37f281ecd2c96f6d363ad86eec1137afc22c527f46e74f4f078d1370a82a460a4435e5c2eaa8eaf6de7b5bbf8bd63ada56c4a4518f7a9094438d48843b6b87f53bf359d3c9dbdb2e16d429c833b76c86307c0adf181c88659bbf5ef5a1c84980616cb61ce02932f9c5a299d072e588355b78f89d7a654eb70b08449241a8e17ab5c62a931675d46002fb8f0f3405e47423dfa27e03b0a2a3ad7d1b5ed33cf1b00db3007b856eff032f63a306b3a0225873d25199454aebf1d58dd252310a0f3a3161937e10debfc286a4cd86cbbf86d9f28434591293f9ad0c6bdfc6866ec53317c80d75ab1e56c47a0f5d264e15e02e570ed0de69c22b3a37ea90730a8ef50b4b6b0aae3bf35788ed66075429a2bb0871e9424c2c190c03cbce90cf02264fcda086cb20dcbdbfb435a58a1b180e6792aeb0f3f9b2e4aa6e8dcd6fcf03ceaf26d72364c0dc25502d6774677e679fff93f51dc9a02a1ffb6ec424899eeebeb55405370d74f404070f497d7d87ab50f136c489da9a1c4cb18574557865bae728938e1cd8db4f633875c08f6784f19071ace19f19a9fb97fe309ed871abb141cdaebf7c612371a48dfca9627380b6dc9b618a730e1e05528f5f7e1ad65ba842507ed8ad0ea8f19ab83ca69baa40a0507c5c0594bc08aaf879276e70b577b165ce552a3392c608be87aafe6009c93a8ea20f01a0c891185839612c5b3e05a9f894025844891e5f9e790fa24633f4f452fcf530f933e789946464c5d791e83f90c30c21c1684418559c7d5868d4c0660ef33217c59820b99cedc09f91964516fab96bea633ae60fb5dbede4dcfa3399932fafb2441b8e5234acec39267f3d8e65745b022584198b3122e952ae12a26485469b6ea27d69986a5daeb18d00d65e6fc4ad0072487bc841ce6fd21f8afe8f8eaae19940dc24c17231a1d18a8e514f121fbf0e933a2bbb269cc561aafc2a7cf65babc333e112058fc2993e1ddbb9700af39b6b22bc85c8cdeb26716310d43260ceb51f72ef0663a05305f8d430c920dca6c2cbba074ea568c8f5037091b7e17ca88b6c88d70605b20b397de70b303979a4b92ce3dbc63892cdae7b258650a7d88b20b08afe3040081f09315d0c272780c58aefe7ae5ce9fe678975d732cdfa1425c452726d1dcaef53a9205c15a218a1babc2e69936b4a9b0eba4adad6c7fbe24e5cf16227ac39cb887d788f9ed7ca47ea69eba1a8c3504f5ba7b8285968073bd06a6f30fee3795f53677f6fa38f1c6ba8448074d2d2bc62eb71f75d013832de36207f36c2308678b2e7da15b76c77db78ed936a2b62a9d7c86d5dae266e02ff0a5f9be5bf5d7befcc3b78ee0a5bfcedfa8a31e61717bf09b7ec3a9f41218f3b4e048958589a882fe9f2458fe9102bd6c4e3003c0d43784b96d1e020b541d2e1036b1d25c04e9d0742397f06fbc586fd9f5b12cbae2e0f2b7a24177244c9860e8e1d7e76792aca51c71a1ae99026951d0a16be4bc561148ce6889974805c92fdcd0240e132deb3842a49296ed1e4375a9f04f20ac394744bd137f2944e079086d7ebc009bde871086573de629aab5502f44858fe5a7207ef0e4b23da10044f90f599cee6042f6b3016cbb38d7afa3644e38fea9313822afd1db861384d01d22832780cbeb61d3e77f95d053f9b25b88597cb01726913d078d2f5afb31369870733670d29eb2840c6d1f03730b5330cedba6a949cf6db233452202139216b96cc4d578a182e980204a627a7c22f401048bd705386af05e1f483dab778975bf153deb3f0d3b6894e4beed5ed97016cdc9662bb87820382776488db2616b00a5bfa412b44c8240e2edc61f67aad5ca32621f3da93686d9ee170d9d73df30be8cfd05a88825ddf6e6f53bf70044e6eb994165f7f4a88aa3de4fb6226c4ac6c8a9d3f8fa23445a1e6f2ae9bdb4fc571a4173d7ed1ade471c5f9b6f7d717bc3f526d3c83393666cde880161a3b5e68458cc1b9bd519405f831eee4d224022b2191d0c8e1c69388abc0b64ae627a26d1e8bed7e138cf58f34ca5450d47f097e8048094041338336c75f82356601ca5c5dd32da26ebdb4d8db061525bce2c9839b3c8fd3013b2fb19d290d1d242b8a371c9ff1f612be1165580147eec8c7d9fd8b5dbef28268e36c0ada832a362c3a7584b527d27bc72f9bd59fccdf0f7193a8490e40f10fb5ade8e63ecf7957a73c60b5da6076432d32097bc8c9c6cf472b04f969901ac3a5d281f0adcaf9f2840dff27e64eeeaaa71762da6d2a38882a999c42c5c9b4584d9581cdce0a39b426a8f41058240cb5f59b07aae140b155e049cc2b0fe9da4d55de99c2be37d9da3b77d71d44a8466599fa58fc477f532f1bd25b6d2b8b45d010e266dcd13105b29ab85b100954245fea545e155e2a9df33493b0779784e51d3e1872cb9c38bf461bf7d31e658a657261c5998d7825c1fcb83e71b4f1bb0545bd31f6d1d09542dda7787015e00b973f1f669be5cf2614b0e7065f5d4c3b127742e96d539ffa76c13b9b1d7346c8ed79c3cd5da8e15cec3db9c03709c700b73c659e1209ba9f9d832e903ae65cf89b9b483852d96b667a956d96170ead6069aa93e2eb63f627c64d0825769412a627e6aeb90aebf9d9a20d738838e02ef39b4969ea2b754b684a7a52f294a0afd6aee5d73a786f2de23eba9370a52a8a0cde370a25c53f38d1f8d10916630c35a7a8e9256fde34dff659493f5364bf43925292ba26c505998ac2a967ddf5148611572a6b4bf6212748708083cdd83e7dec09032a6af8bf97071608e9dd7eaf1c83ee9c62b30ab585c589b02e7e0c6ca9414092aaf6f5d8f2f0b0ace49b8ee99c2a122ba9f06f4497bb243e7717a0d83f252ea29fe596e124fadf632881d14ac6bb0f57bcaf356020eeccc77b72f756c4f8bfeeb67805bf6211b5857d4cb4a892681a78945dd46cc82ab4a80dfec44dd853777c9cedcadbe4431b8de77ce395b752ec7667d29844624fc87250a8a25f969cc79e37cd167cd6ca9c58902d7ee356308b32b3c7982c9709a124da1634b0b226ef69775eefe86a75a54e9663d6f5c39337c8cc0701b64b2861139ac65c9f918c06bcdedb5a1ab5a21bbbeeba309e50394374553dfc1b986ec898f66abfc95b727f631c123985d5b9aa0ef385db8c31a51da8a647070d47167f742cd0b047b2b8ed5ac6438d47e2549b25ebf00f22e5feb909abe40e4bab6b496a6223883f5ca3e3ccbee7c92c13b6166a21cc0baf1ba28aee7b7d61c1c7f6770edf18f8d90057edd4354725de4f7b979cae83b0a9bc9f9570ecbe488308a5854b530764ba988a49f576dc645995a1f082d12ef81db9fc3451973f1d4574a8c4913dfc874d94c5ded60ae4103a9031d9c036a52c04d6d35770ed375e08bb4c5809f48588bd95a93f7328f7f59f5c01626cce55ce689195165ca2606a7d01b603e89dba75343b290dff7d1b0857e84d50073808ef6bbd90441b5c139b023f0436b3ff2f3c2f67364c5a49d60cfbd4b5395d097311b38ab4aeedba9a7c61b150e3b44140fecd08e1b7344d477eaad25e6835fd4a90cbd1e0587a89a0031d4344494191e6a52a37e8f5bc5491ba137b53e899b181ddb750f4b6a1a68844c23c7b8a10d657042178f2cf91c15e2bb4e4495f688336a718338ada793520f6dcc0114b212ab3321294825d1170e317d5900913ef44ca7a737363230ec81f31f30cb625d9b67a7719002ededf50146c8b54d4a3ab8b17afeb31c3dfea2626ee26cd19566c4b4193d32a6615a37cdb47742d754dbe2db157faca86f3aa56519b88f13be32c8a5451847bb0fd3898a37ab4329c7434e83a74951872f1bb4b4e4af097ce2ccd6e8c6b2287f15edb89f955b904b503074199ce8f171449fb0a986f077877b8f379b6b3f45b230e4a50e982f22b265ee02925c7bd7e82d45867afff0d0e67f64627b897d7b4fe6abbc8074cd9c5f915fdd4b6ee25c6d8ac9a6b7f3db6840e6ebaa0d10307e21c7eb4b45e7cb01ce7fcd73b60de86388a1ac558e2711664a31f7c42f05cb8a2fdd990e9e5362b438aa481dc087c3b62bbbd85f7b3462c9fb9527aaa20d261f4845ed33dc235e1dbb87322aebe2f04bcd23fbec40d4d3c75e1402446879b37236bee8b7582b97132868ce0de1711445bb187b6de0121fad2b6631e2a6add5c207d0f3a3a68f0a458f2c71e1cda6f68fba71d5b0a1c72a2b9f2e5cebb4744943f9696cdef2632529b8d76a5cbc8b5f4e786ddf42e03b0fc867d84da6ef73cfb6917baa22ac9cd3fc3981bed4faadbc204ff5bed7c34c117c50d2e67fabdfcd48eaee12162c0910128fc4bfa67d85b638a1159d24df8eabee20caa35d3d51eb2a08d1a1c4770d0414a7b44f1129da838df504644af16ac4e02b7689bf0c9dff68bbe71e3ea1e6eb78f94111077c68216f99270b3c0052a552bd94666b32c71dd772f2bc9563c1b79d111e88b91322fb4c723fb6b459103c6c8f1415322f03ff49334617155ebfd04961e7265478bacc5c5b196cda6911090dde4d99b4612e30077580db2034d33d59aa71ede25d3fa06d826eaf2d31d03625127689ab3361d620a15d161c73e553b7764ff86fd105af691e0a29d81be3a6659e9323a22552197d6ab36855c92198022a44c38a2a066d10345589aad39b74b3fe567a977ff9a1c96e24cb232f1e810a56a9fa23d4284b9341f34ad67ce98f0445b24777409c8ab4766f8c3456ee3829e4cdc3217e98d342990f37e6a94779781e7389bed3761aa8cfccbc9627951d4a7cef4f42add73bd0a81efb6052f5fd727b4332d74afbcf19573b8fb0f163dbb16a0666849bb8eaf54285b1e4644760881a6b6123885bde8f52421a9a57cbe85ce0e778c0b16f0975496640734e1154b16c83080617bca34ff46e9dc21ec12f7381923a87447e47a5e2c5b4f5f44b1dabfd95f93ec6bd647b30fc42b57540b1f6f313037760430a07cc7cd754442de38277cd4b875aad0457aff727d11d200a2e6479a559250d1976bc48742ad6a4af6f913c858e6a0ee573a6cabbef16ac8c21642e26f5160f808597358023a2305233652ce7baf3d1f6f6f103335f8c5ac92a4ee0160f74fbb3ff0ca42df6689090940d4cabb1b1a277c0d68eb9a90d996755d6dd2bc5025348c5637b1df22ac481b58b4c47d325daeacdda1546d5f2b3e320487085ec55c6eb3d21730038563457a6543f66be9b179addcb181a953cbbdd30f58db091cd9dad78660834b76c9884365b29973274e9c5d0bf35e99c16ae5145521eac9683a625595f4493e6e29c9f499413071f56a4fe32044685fa3c7dc5b4d475cf2434d37a918a690a09f13ad9035c8a96ae90397fe79b4f18028f247f8181e96f6b1f2f051acfc5c844283bc35527b1bf7410e0b9a2f4ee369ce3eff963e39aa3130feb3e8de361f77808355293dc6244c2fa55ca3aba623cd51f6aac2f4d572790fbbc4f68f9a9f58a755cb98d0698c960894799dcbe0347bbb0ea00aca06259d41ec8ddccc0628843026971dd2a8a2e38c398082c89372655bd69a26f6cf5304f72ad136d36548f7450c51b87413286253ccd054b74f5f7e548054fa0c2279bc4b5c33f1bd0c247ce5bb6e1a9016c02d92f1b3c31292064349010b23a546fbcf540621ee5152bedb64b8aceeb84f56050f438f1aa1d1be59400cc03526bb80317022bba4a352a4a8302a8dc2c71ad240a2c32617d0c1f1d2ab6faab67c92ffb547cbc5d5c6d1891504188e89938e73b089e6f08241652f3493db512efbd259abfa5b2ea414961c779b16571ff33e2a9c8059d0f8f3d09487fed87cbd7262aef8507c54c33ba6ab6a1341d278cb7101a31b4c30c176707d9dff3b0729aa6746d3f659562bc295aa1f33ab1e6b2d85e9f6b8aa5caab03151dd469b37ced86a84353444b98a9adad27194ef0ca101de537fb2ee70ab38eaa459e5459c64b99c2fa5733a800d17fd85771d19d58d1c3b7718127b27f66b24383165d107e333130e373fb1e2c7e0b70c7ce83b5736e936499056373f85d1c67074f34aad4ab5000aecb19f067b14d1d6c8d20e864088a9a15f85c5c916bf6878c5512689cde3426b833ffcc18b32cb9854c0cda0f50fc1ec6f2689a3923ce4ac29f222de7b507b46bf84780fc1b4613faccc59841e59be505ccd129f246d68ce3300863663ed947c3fd1deca51e77e11721117fc2a6a0de31c88ce1a5e3c35792e8de86655f3d7f4933ac10b5cd06ca598f09f63b8e9412eea80df07c2ba5bc8e099aec0beace18fa1943ad66345838eb061f167f3e08bcf4d9266ebfb1e5952760f054083ccc53944cdb21217f258b810de8742dcf188d171ad1518f4139a1d863226b4cb3ed1a3b09f607dd37c18443b1c5919de9bf76aab3bb68904a58b4b791662ec6728f8ab780035291f1ed2a2e4b5c25eb7e47cbb7941d0f4fda2ae4cbe5831c1ebd205f9e3d29c151f600520a41dba1a69aae44d1cdea4eee736654c4a7e92360a21894c654c013d633e9432a09985a9e71b3140e8f76e84375528f0bfef8c70fb9969ebcdd5d3782a29823885c578d826d68abacac39bc0e2ffa1725364cb5d228d04bf3a69de18fef6ef4ebdb653f9908f80fea429e63bb5641410c2f573fda731b4997a4bc62bf84bf3125c8454c65af77d75ea33f8a37b6b05c5b3bfc161afcf66d18239800883b4a586d620297062139dd9e7ea1fcf6a4368d24eeb4d3b4bf248ad1f112c14cb2c2e2359643c465319be890777a583de5b1b575f0a8278b44604a6f13156669b4055dbdff78b2d4af9a396ba3f865d823baa30911fa6aecc189dc076280fbca52c7e1c4dd20d66f3816542df35ebe7506508fc731b42a29600dacf3af47b7357c11d97cd004ad58a6bec14b752b2214c9fd7569c329573623e94ec8a2e23b04945953a440fae5cff9c801245ee27da051eab572a5ffc16e2a1e06a6f2939d3aa4552f8065f80efe3615808951cf328e5fc292e5d9961056cc34b0516e9fe159c72a788150371b1364b24e7f490df2b30b84e93967bded73cfdde9c1f921bb1fda639e2c2b7f9f835da0a9523c1b40dcf50dc6c2f00d3399358b033303916f04e4fd32766fa0267bfeef3b8ff492b9ed68096a1ecfa5b6bd3a9c076a4200d28b7f433666e109c70e9ac04ddf125d1ca8094220b0b1830f7e31cececd6a48954dae738808ddf47e87f2f62dcdf45e62f4d19676625d8d65dc41c10860911ec0b6a775c196a62fa16a7716383874461194149969692895c5713c4d5aa2adf3e52dfa02360de4cf57200b84ce27e1c66b33bced6e467bad9f30a74e07cf050c7a56f326d3557b6363a07a892bea885f87778c5a3d84e305cdb5d22b6aa9c7d0e0b6ad898e00067669aea196875fadeaf59d18b5152fc022bbefa4490f2859909bfefb8c63f540c1d0cfc5d6224037fc3b6a69bb71c177a67c6bbfa4e4c016489e27c16fdfed0c0773c92f8772fc1c14e0a7837e979b7853071ffb7909bcf442f94aa0790f9fd1f7ca0bfdc94f9a4a816c1793d64000791d27eff7b0bb3452aa0bfeaf1ade29314e52357384fb73a7d41199b52ce66ee0ed7cefc6522d425888d4751d081b03e55a79154244e328e770b6d967f85cea3044fdd994ea44bb643d6c659aaf0dd5a982065f9fe62cfa55ed2eb692ee8c6f89c63fb126a2a0b2342995cee6d0f782deeea78fffffdc200ab61cb31ed8ddba2dd261d1cd4cb8dd795c758dd9ee872e857eac7a881cf8810e10b80cc6036b2c40614ae65b2faee3be876e65e633ed08cfafdcb8dac629679c123375e46cd0c18f04c805bf4082d9f11e27d4b7131d29d5eb41dad4d1efea6d0463c5f2e9b9700108721b4243f76e5bff14dd99cfefc2ae7fb5fce391d9cb15a34ea70633b29926c2049acff8a81931a31159185048c96f26867612a02ad68280bcd601571ff49fa711f4941ab48517b77ebfb3f7beb51353fcdf964819f3071fca88135ad8ed4e621f108219acd519764af512a30ec467ffa5e7cdebe1f7016104fac898199ef9280a23a775fd25482c7b19159b598fc53263f47465ad6f2291c443332ec84b7788bfa2c99932a2def85bef2d3e83054445c19a79d08647dc5fda92e93b3f08ec4b8fb9c12c86bd00d10e12686c2b6145e3282baf1c448cfb8c147e506dab530cb4d5f403ae568e12ec7274f395e7c3d50573e3f8ce2c584387ab1ba6d0bc0a59a4458b42ac82f87c79cb2a49b70f804858e75c06ccd09f285081807d5eb14f0336d265315050acbb6ad0666d7ab3c1054f3255dea4558b66d5005fd9fbe86f30207ec7f3f85b44322dc993d15a867b43ebc1222c9d30edc5dc278d3f5a33011e27bf7bba4d670a5b4f4fa8822b07e83c605ac73913609016ba886d651b8fff9b9c6c00a47aec00d88ddfc4513fe095cbdab626e4bf8277a0be2f7b2a5accbfadf199d3ef58aae8e427abcf1349097c4943a9d365149a30084cd13ea355be6c28a613b5600587aad1b7d6b0e576c7adf6e43dc293879211340ff4c02c03747068e49629944af6e96d08ea2c5694c01456e9d120b308fb7eea964243201b1bebd9829cbc63b9718b48caadf744789b7649a46ea2ebac323720988b7180f19fa24c3e1f4b1ea768223804e4a74faf8d1f260bfa7c06d904fdd8d62bdcf2f76ddf5d0ccb922199c9a8997b7427bcce93418238270cd376497105a51ba0f48d81a1a68d57ff72b596116decad267ea0795e9ffa59a532724b4b0f52b6929258facd186e0a3ae8c5ced75fe92671b8f4c097c30580c1e16afa0335bfb7a0be177fa24bdfddcab99476ebf29b282a0cecc1fc24f5236aae78e88301ad662231f2256465528fb64f7fb738f9cff98f1a83c776e27c724042593fa4878ea548c81de414bd0d1c8dd2d69eb626c9495c1f4db0dca304aaafe1d9c8523e054db725a180c9b5064f1e8bd8652b3c815285e078a1d3bffa9dbfd3eec1b08611a486984b1e8f77a9acdd4e90b991aca90ed01e2a8b48332a606dcaab884f64a724f2a65a953de6c4dea1df2808c0559ad8bc3b200b2f340375f5a427be6444bc30c370534cdbc826011a2ec5e8d74929e4d0e4733c9d3e3a74833d0cb032f7bb478aa16f825ac9bd7b93b19a44d9c782880638ab9f3ebcd5c1667a583e8ecbda37e200f6d676cbab6009f70d84085f8237060371e43848c9a0a94ed6409ea491f6cb0596af9ac457d761018c2ea62fa15990998cb75ab2b73a32bda4b511663ad3337f18c5fe15776eb0596a6dd059e7e2544f999e71733a4eec353fd4df308e26f560aeb63655afb7304276273b89a7576691605f6ea8fdb86f60aadc9d1c48f71b0e45548e6677ac5c4cedc065583fcf3657156f54beda4d38ea250ec13f632627eaf09ebc8bde6d511cddbad278c8ea4fef181b8fc9d2c8e154ae0cf510e4b96f0e04c2622dd14b47128f63a2539c8464854fed4f789d1a8698518d86da4457096756f39895551c85a640d9a7b185a32a1fff05dbf4ba28b3d1f20bd91cbdcbf43a6345fe8472718ea79aecd35c9133a31547be1c76437dafb091aa2cf2f3a0e4101f044f6713c4a2cb5b398afddd83b34d6b5c624c4b4f590c79171d026a42656b9c4c057217ff7902d54280ab3c790416db0d056d2eaf40c91d9e694647301bc5ee6af3dff82d40804b965015c567ced5d8635e16366ada5fb0b3055b2222bd1cc6a382948d123e4539e44ee79c3d493c24f38f5824a54e86c242b991b28d9280c99d3ac979fca61dabfd3ef98243115508b6f33cb2a541c732c6e34a7054f45bc0cdd864cfdcb6e963ac6caaebff183f82277b69be0eccfb07d36b7bab61ff0262a1a40684b82b9c45b0f3d0a2bc4467e663e40561bc20c0ac5dfa2d6bca6847891eb4dabc22b3305384613c695d3c374e269aad877f09c7d8edd59e3c016220eaf09252ee406f2671fa025f3eb58691c5e7989c386a69594a1089d7c64c183dc193c8ad462b8543ec346c0a5a1f68146541a84aaad1b970434b1fe4225eb60c8689ecce6d69e07e35d9c9a8293e73ce928418a84e5533665f3bfc5c76c7d68c8dd0ab6494ca6b83efda07205c671d72990361b98bfabbc102170d1f76fbaa0b47e94a2acbee6076af872327a1e937fa72811071b1831739d02a92719d39acce66ffc7cf78853151e30e1129d8080fb200b8d3dc6f03c2b7a4ae6408e3d943593191bffe7944add2063177a2fcd63058ea636f82b43e3353b6be12c00b344ac71dcbc3bafc1edcc32ccc78b79a01a00d72ca177eaf37e9cd1fc9f438fcae7b171d3809d06f42878fc711381fe8e1a7e6e90d004d6127b0f7f61b8079f0608411a462d904ff7c537e5c4d63a5e378a61619d2befb23d6e41d8afbb84c26cef0ccb5211d958963cb65a2770693af0e10aa4b545b5a24697462f654aa29ccefb52e8aff22a1542198903102fbc6ba32237424f18513a5e566983c18997c0a86381328ee354b32af9088505baba159f66eee36f9e27de8087621f7896fa24e72a34c156c5f4f1e7f9dbd589b719b46982646e2c05391333982b4356fc88f92a26959bc33413a0b9d","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
