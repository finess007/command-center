<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f76cf1cabb6165e7623e3c4e4960b7c9751c8b8836c26f50cac1119b5ba419790140a9b26bbbb160a3c636b70e27aa2217a2366384ed11aca8d9b404be3d1ed714dca3dcc1c9b390669980456acae1377b66f65176e3f7342b450b4401d36dd208016a9647c423b31ecd414a01f733b5f95be1b8d966839eba833c9239a9e92285ae3cf5b86ac0a0c954957c63d559591e15d664b7355ed573667ad2918a9f5a73ec5fa78bfeba45c579f78e15efe770dce4cb1c3af6249043ef9600dff1f79a6545c3f1d27ff6cc8c441fd1b9ee09476d37d86c8ae20c6a0f4be37af0e0a32924c957d548f009fec2f72f9f45d45631f075c1413efadb78566435ce5d1624aba65676ebd909eb893060bbbabed54cc6ab66bb83a99559d569690c3ec63d1e3d3170062344b36b0fdb69e5f0bd34ef84b4ffa4767fc34038a60212b77abac059a5da4e45b1513d2a40254038fe75703ca73e3876f488e8fc4fecd1125e1e8a9d470eee6c235aec4eef3e9a99a06b1a14d058b182514eb17ca632ac9c9ccf6fc97a69e313a6c38a2540fe424b34c504fae0bf3391936345f536c968b42906fa29131f74689db7450ea334cf49511e635bd11979fa37975661b2a86a9efa8cc6a9334bcd621fbc0c941c7aaed3f7eb33ca3c4bd656ffa530894c8e099f09273e068095ece327d09a22224465d307b132ed25cb3ffc1ba1013f3b8ee526c25e03be984ef8545c0228de5fe09f4a9e88c1288ad5a98f797f71b10bbf860d6a776b4362122e25127a5b0885f40a5d143a9356ec6d85dde9c054b2b763447a65233f283f37ff9ff1d1661e4ba016211bb1e76e7864d92c2cd39fa496c3970fc5790a1d5d12582fbb9888fc37304e69147ab5b29b61698becfea6c6a012e61e57ca79c6643d9c06c472d1b17a7021dc113c7a846a883864307cf4f4def5641f51ba8fedc177857543740430c5765f1c9d076186621d49afd32dbd7b03c310b6eb30a28a9d7cbc79240c64501e09991c9ab9e7b6e48e86c8c43cbbaf09bdcdba616e78fcc028432dac1a9adda9951224502a559fd8280c81825f8a745e90484b06a085d37180c9d02fe8fd3bf2bf7bf6c708364e85821cf139bfaeb5f78e3fde5011a2eb0e04a68dc2f9092e2412b1ffad5f351726e0780f43da6e56c55dcc1da39fca5faff57aa2bcf88360b6c016fbf5ecc16e6ea0bd8e882f061b80923a754170e23a66c63b4d649bd1b44e4a8ef0e59b5fd17ac1cba39090aad3c7e1bb5f228555dad171e9bbd71de92f68a3a1d80bdcf5bc0d06ddc2689cbc31a6c2b01e327155cc9ec23e4497b759413138c7843467fb286a6b299b8fa84d3c819606feaf7b748f065f8d6bf5e52c40033e30af981552de32a136c33a76b819eb59c8d50978ee2840ccb348fb8bbf8ec4701b4a2dfcdb36407200d48424d1470a1214af4e13025d64a678c4aebdf7d832dcfa43b9fa74f7d5ac5f66924809cc43c7055c4602dc268365f45b916cfd8128b32d0446cd2283884a0d16171ccbe2de68facdcf326da41cb5b403fd1879c56731a03688d7d290a56ae646829788ef5137000a25c5612c27dde938130ca5c758d4b5b92b8d1b55968eec4906d4130672b043c166c715e26579325ce8ebd94c08c95740c22a9708736d1a5eeb5e9c6e0c277223814322cbeba00bae5346084c1dd12e7c048f2cb5c0607785f837354875b0862f264e7f31a99f6c59502f02a2723937839f460b5e392b44c61fe1176257cebadc3e5c68fadc5a2a738b248376837b3c7086d09d8e34d8aeffc86d883f9cab32c58ad16ef8f00bf708cd09666e0f3106b7da0b9a7ad07174f8af945cbda5e1dab1730e6a7230bb7cf4ed493038844777e75cbed2f77fc7deea4f09ec0be6b449703fc2144e518c3df259c9bb4abacddf9209ec875a884efbf1246794f735234e9e21627fea342ee7d9b48b095c30b37984537214f9f73a723e779edb5b3c4867cc89aaeea34b4a9f6761ca816f5c4d70cf09b0bf9e5cdfd596964a8d42aa9237e20d81f61b5cd69025fa832773679cebf9f27cd941041fee9f24b045be263b4843112d808bc2a287e45bf2a05dad574312f41e6832f63e4817ddcb4cb425af601cf8b576b35a03704bbebdef21537217048933c3e8806364b4759f32debe81b0333bc4d32256dfa93249ded1fa9d34740a8b140e5ef7fcc4d315a7e3d9eb6ffc5b84c4577af64ccb26fb9d25e6c6f84f880fa8b7b73906c4682df77d19989b7f6dfe1a4d0af4ac19fdfdadfcd2f72d8d9200b96298c489a12a6b959ffaf631563e5c5dd327b14b54c0dc5d080e60bfd6aeaea9b6ff70301568c6e2ea6363171133240ccccdf97111056e03de074cef35cd217ff0616b97b36526fcc455069da4f317afe4e2e07b0401b6cc3e53cb68214c3fdd92cc85b64b3047c1527742e8370d541c07e0e6f591173672c2f863ed347a8cb49920b93c6a78d2a92f68a012ac0ffff9187d67286bbb2d403bac6c78142c06b81847303003663d87533da7e29a8d17fdc38b57422a95b397b9ee0f84404eb0d10cab3f41fdfedcfc66fafde0242cf2c773f1c45789cf45aade07baa18e278a1f14a625fcce309c0948a26765096693ed9251c009b32784d1d1abb2299e904dc2f02c7c3d62fa3227cfe817dc2f3a15b964b2ea3f53fd94d08e4669ad8ac4d87d797efe9dba473f401660ef75f4d070665908c4bb0ebe7947c18001428e12a3130ba56334e997301224ef48d52c0eef6e7c086fd2b0cd01bfbe97368de82093418c7fbffa39437185650fb4026d7f20b94821f417b4699ddc97bc01c2c9b28347dcf91b3990a8fab8e06fdd43504499705bcf81aba119ce3c862696e48371bfed9a929bf87a2a7e6e3033cae32c003f28ba1b3db9fe10bb054108ab3e7932ea09b2472ae3f4ac5997dc788470fc37352c6ab5d680459ceca3998129d93b4f35678e390da16db823bf0ec6f16f17323c728699720c6268b92e5c03a59b8fafaaab5ed7410b74ccf0a29938e92d5c9cff03d1f6130d65a8356a3bcc65d4c3ab3b1aaaaaf40dd94d6ec2c00deaf776b30d49e8e23f98c0ab449cc964396717b2de72dd9135feb76d76a8d01dccfc209cbc90ca2b47f71722c67949f8d4faff76e1c6f68f96a84e2831e8cacdd9120f7ce4060b2f881b6fb146500dba547501046510d2401602a52db5fb5365df7577b02cd77f0c464f60c39122d938a768b1cad2b2e8c43294e29f44a68dd853d59b34e95c2cfe1fad72d991db2514ceedb4187f373bf7d85a24cea0c137bee5acdcaa74ea28a2188ecdbaa920d77983623849ed42ca114b0b7f06fa42006165af3913ea03e5fc8656371fbff24208d3704d47852e57572d21b9e2da4a5fa980e96150ebcb7f477424cf6015ed97ed365dc103cda9e1b2906e5b75fb3f559949c9a6f45c29310aa09ae449826ceeb39333deb4cbe33aff483c7140be74bf1f3f04187c3ee720370fb5792fb5254cd0b9572f2459c7dc6ded37be258122d6f719ed0ed38431795dbdd05ccf09f8f5226f68d8fb8c45096d71611c37ecc508d473c788b0193174c855dc338ab3534b65904823296a4a0b97d7aa0000cc79fc00c0137bd3e23dcba00178d5e0a043cd502ba31625506543294d6252099a71ca93435b4af8d483450df22bc53d712ccf7254a993266884840625168119571dbb3ebcdb6dd8dfaae24aa8630eb11490f2827586ab42ce9a2b6e3291b50e64e59f7a1ebdcd40f00a432866f3cd43243dcad1ba9e36c5832bdf9205caf63748e6de10e0066dc03e0f4ab80a425cbc612f68c6fd39c1c166a35d097d0320a0e6eb6f144f0f2d2be4d68fd35f70d48360ba7f4b2110554201dcf5ed0a0584729b29299182685b7e664912c619e82a59f467d47ab6b17d261c6154e3da226e6537c9cff1469ff2e3c319a26439816f16cb966de67bc453a23f78ee06c27c97c8b85014c8a14b9d4cc3a94cbb7b1387cb255c16914313481639dd83c7ea0f45c7f022c74930b4c8359f2e31074af523f60ae6c15f3744de7e03c9a3821126baf70faa9353518439a306cadcd6b9ce7179418422b6a0e8bcda27b2e62eb1fa48a4faca6b388bbf74c4682c24d65b3312d09f5ee7ff485ffb87d6f83ddb62f0b091c5e4b71fa932ffcf6a45b193b3b042d18846c8a000f05dab4344ed53862ad196642a31a23aa401b46e0920e983bd7d15681947f31f297afd26aeab9febb0f5ff00bc8b2fa7babb918949e90f73bf916e197df00da430c7cd8f00ea66b9771dabee6fac6dea98b0d443ae2317e4a092553a6f291ae3b4a5f6d6fba7fcac252acae524b84b4bc91814f1aba6d014076d8a34921d890e2b7d89895f47e898b488edcecc4024900dd87bf7135b3f0de23afffdcbde7a299424c9c8a72c073cc23a5baf03dc7205ba48e4389b763f871924de285338990692cb381fdaf44ad1e6db863b876b1611a409b4c2af81204eb8c8060d8c316dd6c854ccee18d1e371377a06ead827508334b20c886e87b1a68942353a32ccf5db8ed4a66c5e2effcbdae85dd3e9dbdfb621b4422c0c69c3b9553bba01791e5cc68ce0f03ac2165f46bb89b5a3b3982bb3a7491d44a51a4bf672af88588971723ccf1084bfd147683185afaf5cd98343fcf780dc3deca4064e0474bd8fa13dbc76b618d685d62b8c9ab80c217c0c87afd8467257c2b3c3c4ac494c03d1df2c461dd5394309fdf626c227a483cf2b4b25486d838246f3072f5ea093ed574103eb0da42ab07a07f40442b57fc0c7bca30e63185a05f4209844d21509895cd0dc6732d0074bbc8f7b7eb65e091e197dfa1fb38292d257f92150367a370adbf4d507f484e30ce5a44c60fb5b7379235d9817f7de4e52de15120f73e753150ae5710f1c57bbc30ebfba731e92e2e9efec7b90b06234149d58a44ae6f5571145c37c5342eece915550fabde6b9b04c5525d83c6d5c6915d8e55c3164025f149b806dc0685f54449d8bb1909dad10de641cf6bc9236a1568a19ef1399c2c3bcaa9d4d7bee2b53079ecc42ab6054f4758603354a3c7db44296eff532a10386c4d9252f95d0d3371c9e51f85435986521c68a33dfb3d7a0d3b6aa0b7f2b2596e1fc4f03293778d4bd0bea7f03ae400333e5928f873f98f9d246e68898a082687c61940ed9eed45f4f0edd81f824119317bd25b36b25e1788cf000b08f7b25910c34de77071560f669eff4d2ec094cf7860afc5376e8b6dc6cda9a2324df1f7aafb795e1c2d4266c8bad2a3644abeba679317054a1fb6e10361bb00bd2ce681751499ecda45c9af6cd9a31245a62e2257707f78f493572f393a94ce01d4f81afb964885d1e1ff57af0d58bcc8d9502df923930176479f7b290227484f031f78d1435add23bd3a4bfdcc7ee60144967a1823989e1b95b7c57646c47d0fcdd172412ae91bac47c790a1f398491ace98cdd824fb8cb8f9e5d8a4a809216141833a56025ac0f58805cec16da6ec1db52d70e4dc85c7d82322ed1283fe9e73dc096eafc02d98104f69e53a1831863441f7a354e4189bea0b72eadd0d157505232825db5730a420fcca12aa6cb03774a3627b28f7e7ffe722ff0f62f6f0697b48f4b8c1dfa6e77e2d3b71b48d31a3400f2f172a6c96606217bfca80f57d1d2d2e1c217fb859824bfceb965a4609eb5879cf10266868af2029c37cf7d2e865ad627fd7be2d7c3e08a1176491442cba0ab5ad699e16acf23362ee34d99a8a7a8be5fb379eb21ca0c6cdc5445da9c3438c50c195592f22eb463f5d6ce62c8180dcd0748d5010a6f1c955c4a90ae86135b4f007779564700bcd8589d89cf4ce43ffa243da9a6382aed40f0e87329a15cf9a276a8008743d90703af3043454681235bf9cd877d3c6240183e827c0de7a57b37d1a083fd63c2d3b0f477514ab3ed5d31e30a8b86decbb59c0f44cbcd5cbc87dd5eb0a5c665e7bbfc0a808fbf9beaae8e047981c82892d5e519b27ba1846c6ecaa1f0b6c47f4fe4a272c27fdde1f1ce8e4ccd1f4139bf60c1fb8b65d4ed24be307a8dafdba7b304098c8e015e20c61ad0a9322c487cf43bd86a44b961535b4f017870d598e8c5e3fb0c1fa14adf576b00daba2d8c06b45794de7cea1a2f7cf303eadd4cd2cd90f2ff2147267d1a175f1755e889df37807d21b09bd75bd8bd7351bfaf10fb3060a3ae9743bc0953f9ccbbb3b145fe01e03076353e5185c9503046ad802807640b6745cc43f59e6600659e3c19f4ca0099f0441880811b04344dba02a46fe5526940c1e086f2371b02a1ff9d8d5424b319bff1fef72d5e735d82b557963ecab8dcfafd3aa6ebeb60847d0b9b284a0550c115d0285ece15219e70495ab67fcf8fe4332b8ae58b386da135c5c9a0e8cbe0b4f9980b09c19a036fbf0a222d42c1632a874e513203088fd96f6ccb8657f5a7feadd5fdb86f0b2e75e1319a0e36b29e8714586715c4ecfe0f2129b8664b35bc5123afcbd2d7dab8bbc8ac704900a736ea984d785125bb89cc2e8fd659db486ad50acab03cc9cff52be8d214471b3f006a4780b253f0ca2a2fe9268a946d0b8dffd0bc86456cc40628a85faf6c707c671212692ca28deae40a3509765a692d6e80f50e7ecdc7091c9bc4b5c2d58923c2bce274229faeac72a43e99d718dffd07491ee747cc58f38d1cb8402eb8691be3d70198d19cdd52fbbcf10ac6cd90f415a7fd00afedda937f8ad2f6edba33a8b905b3ab95b70ed9aa9d6e7138c667643d51672793f8fb862c794fbe003fee56c133a25600d759dbd64a1859e725e8d81a224fbaeb87021d2c3dfa73e5b2386139b89ccfb354e38e6d74675122d75423c9f20bddd6506f8550cca3bd186a808b2e6b8f9d767b13281a7f841c6fbc47c11791b1526a9b456b4d18df0694cbd82fa7ae5fb4d9a6a6e1d22415ee7d474fc77f38b0d1089f8db30c3ecb06dea2417d406f47c2c5acaa3b4d90daddbe81f0f9d065fabe8ea108b1a50e88b01fd518619561a0510ef9f92030c7b941941272a4c3e497f75503b526f41d0e73eba4f4396466e63f89df08d26a080c6129d389dd142ef491a77d56215208d7c7f2697318bd870b9d949f850fe081184ef93f52f4725576cc9c6729b1d6a71cfafa1edd2f588767a805be18e51f674ae2d1c8dafee9dbd90630b6d6bdd93b7addf53e16a4050cdb8e5044636eafd40eed5e6c627051eee3341b839e42ca391f93fe83303fdc9a9399997ae65bfd919312d7f9390e2d2b5d4f7920e31da61156c997db9ae22d0ecdef9a6fcbfe04600d7059506d5e30821e57388a42ca0580281bada3da9ab74329bbed886f13169a1bc1844486d8fa90d8f4eb4b83f89d9fb25bf4f14a33dd410e52e6c0b17ca5d9bf2aae892538e45ebe30a222efe75f011bacf8878a8895fa38c5a058bb8a3cbb68dbb81f84e24ea8f2c3562e565a8bfc0cae8c259b135b285fe3a92b630d9cda52f0fac167464b11b75d59d132d5a27622e16815b2bcf59ec9dceb120784f0830eb08663f91679d582156587b479bf5dd7161891cdc98a006176fd16982bf7248eaf0de636e50d9bd946e31f897afa263a7e3f8e61a69f5e84ce7625e30fe60b92118306abe3ecd5b4dc87c50b43b3f4fb90183decf4aa24d6d418ac11acfa2ff267f6efca22f3833b6139a369a19abcb5c53ee68dfad8365c07aba7c69726c0b506b6d789b8aeafcdf75abfbcd29106e948546881dbdc1f484953c5c505c9a62c6096cebdc6e5eac21e7e03a0af48566a68a58d32dc94ecd0a2723e5ddec66e7379688c3854ad4590a8956dc4c77abaf0d2b9f70c674a0eb6e9bd47c986659c937c57ef5272c751045a7681cf919bf0323f754e94e54bca83fcbc6d21daeb4e50d1c385e6348cae6ffd97b8c8b857a17d43bf1ae6052ddd79e406f886de9bed583095620d9cf5816bdb4bee08f5c1b50209dc46c006ea4883e911464ec884a91814d5e1b97328d05e3071d63256e2ea38211d2beb3120f659964014612c4e5b3cbe93a9910c2e6abf10805bd6b825fadaee9aebfab984f9404ce7b209e62499ba37828ae2e6ccfc68b13b545dcadbc82afdc3a5cce56abb2f2d4fe9fe5c8108d95183affe5b97d5b56dc4eda5d76fefec09d5f410f2e08fc1f86e603f6c09e531c6968c7fc11e65bd1d410613fbee805ad080c12c03d6d0a0597b79993a8e3ff4a70c989c9183ed1cc323130cc82ed6b609a5b8a1520c29a89e4b4f09858ec61af202f7a266265ed6509fd3cccc13295e9f8660399379561edd9fd63061ac98ebbd15ab040702ab5791da3b83b8f003f0fed19b6e7f5bcf88814fa1729bd8e9779c8c0ae69805921edac394098ef19ca74f13e56d97490f7dbf2e700d8937a5e9267f068df2e0dd9a075562eccb4e029f5aed66d786a52edc802786eb9a63b9daf60e47432de87184bf18f6c0e80c96c9916efbd28273449a9ffa967c89be2d54b9bcaecaa1757b936537e855d3fc6e3f759c0ad418995be49add4c54838ff746c5061a5ccd99d8d5088aaaccb2dc4c0771bbcc97b2c93208b56e15867dc712d923548c337ac16377e53201aca58b9186699eed21b51101d660674dc43e05d2425b4ec4ad18dae027cd8944ceeff1f33cb444443cfe65e62fb9b766f981c10f951ea245b2543d6e4492788b6683416acc60e475068acd81e2d4c147913280afa9dbf7e0f5e97b10cb36a30f42919c1bea96ab01d6f8e282b7d1f840930b209c846f4cf2a1d6934dd946eeab07365a22ab160ec93cb8ed3f43f2102d20ca5f8dc737a45f91cf1d634be2f99407ae8edd64c4a6c0c8edaf5f3727d258213cd71c5167b4448e9cc5bb806ea84a248c24fa556f39a657b7824cbdb0c79b89195ef62d34048c044fa8a329bb53b7c7601a7b83e233b3c5b03b4992439eca18f311e7c32b11a20beb3c93c054a1f33e74f33a4af07772c22cf8189a4cb39eaae87284e46d36a496b19b5b8522bfcc5bc9de85ee26853f30a7f7df425579e20248558f71f2a73ee77b690ce5b3b2daba183ddea8f58fa13ca6e33aa08f75832160e7c2a77aaa24cf8af0a20186ce97ea233ae8efe83d2f232eeabd868b15f0d0bbc49d86d9862756ca6eceacbf3fdb6a16af8fd150b4d212862f66d0c28dde6320f58aa3edd492df4a39c107982091ac8858cf23d1b54888e7e799c4204476aa9bc51769c3deb160ea5e238b4911d87883dad94bb5aeb83d938e2f401487a324486305496e32ec0c2ca717c02ca2f7371fab2c9d9c1a954a63f2c90ca243f807505967d84516970698a7404a4043aaa0ac6da2ec0d7f13a9ff8d2b19864c9d7c8efdd743d59363c92ba1f606c4945ef1471431d45659a06fdf15b3bba8e1c3654ff4e449f169c38510ef14715c17b3503b2f1f37c8c88d26029079a6a2b4d3fdbb19b373082c130e84c69df76fe93440595565efe33a594d2c424b37db4dd2d9920cebed0901d24f9de304599d0b6fcfdc5c4e6f16ba7c79cf029210866ee5a675229d8697ab75b9805011f5ae1648a339fcde79755913595793389589e26714da0f37df020931fc497742be1b6e91229a55a09a03ed7957a4ae22100eb4b65cd16f99bd3ce4843a85987059664523e0c17ff1458529125a371040de7134a24fda70f51a088c68bdcb4f8fde850a95971b5a21dee184eb71bdbfe0c971d460ffd87127289575780b44f4ee6e8a4e4834cced90a5c8cb84f8fe6a52cd4b68d9ba44e958a853af89d06f076b10de9e4da17543a0871aef99f5d36d9798b2074cdbbdfb4670aedc541f16d27433b8a5ae2b970b67d14b25867c9ea5058801c97df31751e254ba3556ed2d690931e3017724a2001bbfdf1982b684b48aef9436946034a03c1d79e0af3adc1541ff0a44b6007ca7085d3a4b3dc1de04e620a445429f211378440eb8fcc9d6f0ee695c865c0319e839d2ec75d86e3c277be548e32c8a9f4324ea28b3352a0636e69f183e54c9ae6ca32b77e2bcf5e34eca0f5b39a8c01c0494940aca6d64f691a96bdeb0602d79f03de16155bfc107ed0ff5779ec0badc17ad86af005d6118550a8e8b624f7285c5d18dcad28f79e1a7c26c5430931738d04e952d70248211777930e764058b47cb8f871fe83acd9460033fcc294868415421bcdad31a901122993649f395fad1803e23fdf5308ec13b49784ae529e47338e48ba32de8655aa8a95f9037338c755e8e4716e238e93259a664b88fe77759dffe1f8790027e2a8f8735e12fbcc0d3ab150eab673b8473c8c4e15801ddbbb36cfc4d26874f4ad177a5eda41472f979d87d3dc9b779ce0c17f6ee8eea641045527b52c8d2bcc3512f82642040a8238db80a50d4ed97fcb582e1c8d86deb55a2f78cc6e31661605c2bcb276fa5dbf7c08019ef8b1b09b8e2a0c40c0d57876237059a6cc69744b2b57cf850d6172a1e2c638bd0db013b69dc97e6c25a3736188ad135a5782b950efe46d1d6af8dfc3d8b2cc96a6dad72af4c4e35de9cf8d1ee800138dbdeb11541f734ebb5a29e97028c8599ea0d78e50ac60afddb95a819152a5b1936fc4d8d717341b6b39b44133bd239b6ef1742d0231c796b67a5f1343e166030875b5561527c079eff5f5f6945c8b1dfa4921e5d26efe89d19bcfb5ed2ca8e36093dadc29bf21147f743848e6bfec03e5ed09a971f9e1ae9b9a6b0814df806e1fde3a6876a60aeed2da2b87c8a38f90ab92c6e8c00e44b4a4011f039040399f9895fcfcfe60800fe20f2ba259ff3ef9d056414a9641950f0bf8857f0f6f81886fbbee65d94d2c65de83f8359ff3fdedb9dfced7cf9174e7ff8f4e4edbe37abb4d2b3d2ba98edfa7be7a9dedb4f2333654e7804b123a1412a4c31a58b4fd9040164dc2010f71d3cffee70b0c38bc0b2e73febc3a198b434a5e5fe938badc670bf500c82784d4afa4ed0e8f120a7f5a9be98e0339ddaacda38a322212edbee7aea8671c0367ef34bbe8032a022464ac9c1e5a633fdde9101fc3937531a201ecd2ce957ea80aaf341fbce4fa70a47f8fadc1351607022cb592c1150925096bc630e043042f587e1af93be4b9a4434c96fb64e4d198759d8df45b7ffe698e9e484287d288acc4b7edbed17d5b916ba5bfe89d144cb072e6870333ac800dd0993cec749f2b721365c847722fe485ebbdc6c4a8c3ad769f54613d35da3addaaff2cc40f604970ec499393c07a05f67d519a825bb43b9563ed3eab56be7860266e6c6e77f6ea61e8b68a9195980cc1518fa4d6532cfe58a18a37cb1fbb2a6b9d3111340c575232ccf77d3e08581d1dfb0c2926f058b433b6a40424a10c2f402f900c8b6043761d577ce09bd8632811756001152cd7f3df7d7e7605275913b2c6e875bc6657bbb9d8a6bc9003b774249ecfafd27c6ae84d620b67cc8813b5660db38718260e42d01fa8488e0a7d1ed75276498ee728f84bef717dd16b2e3c52c5f820e5d3f287242c8e0b662387ef4d75e985ad2e24cb2491a324e1b592a2a113ea58578a67ef4bc8bcb57b07ad9b1406fa346e37488c4d7895b9e9c21f0740f564f9129b98c595f3a72c0f4172c05927f7a2fa8bb387b727fef0b11d22eab078732a7beab5d02a4c54ca961f0a2f6c73c50271983a1511c34f29cd700492e023cd97c74686551814a0f08cc23eb2bc6b6123707928bb30e3251b73ea0e8495642df315c07c0c0117f285eea13b66442a6474956f75de715ffa813e89fd6cb67321328465bdd89b6895dc55e253c1323e7d1d00576335cae81b91ed59cf87847b7cab464828ce71e96800777b3a029a724c1fe3849e309aa50c7f719e2136937f98b5b98a6809e7e0f7737bd9525704eb57f93d9030d1a7ed149bfe7f799e871ec3f7ca7190f0b11aca30a3f36661773ccf4f03be02cbaef234073aa118abf00e1d4d0108f08e914fe2b725db85a228337b21e88eca39be0cb2c4ba3957399ed3695b70f8d6ff59cba6c22a991ef89cce436473c9d18c7e3f492e3a51855c119361ad8083f7d11f4c0934465ff5c6771eb13191a229578f10066ebf138cff1f79019880179396d823df8bc207d5bf9d9b36620587ff004e3347d6b698b56964c5b514c46b4c09213e43cc38be16197ded358e3da21579ea9062643ba00f09bdfc32908ecf8d93984237095a6e751840f45e6c4de364881c9cae544e65463964f201446335cd9f67ae36f046dd554f9b5b36f0c62e7297540d302cdd02edb9bd6f89a68d45da1a26ac95bccec74481f422062e76ae9454b1c17dacf0ad975008564574d6a76d077232a51656798e7d9665f09b17abc88a88d00a1e93499e2a240068c533e52b7c44c03efff75f900ab2a3835c960e83097b8a4da52679e09ea5c0ea6bdc27d9e02a48320f79a98c5cd244f9718709f5b22373bd9752f5dbfb9e11683462f9ad135729f92de87e577cb15b5a28fb8f858b124dc2f763fb2819b14304f14c1a24b068899d61f5b43f40e03ea9b260cc37f188c2cdabf7f4819df2cb486aff88f1d899af9c278ff4fdbd7cb3a1e2f1b68947963882893aee12802cfd06784812ed7b35ae4764b9bd526b7e06235bedd21d915ab7800721ffd7fc6e7d7cbe123b2a36cd2a1ff4b8392ea6e7cbf9eff7513931eb1463913149d7f043c13c35083de7bb2a73be1abafe32715b9b6c9c885b8d0b04175dfe5adc898c6435ef7b14a4b442a206f9098cd441c5c7adf663e5000eb82c4869f47f4d9c28d50a794e820839b44d8d842e82d32b699397de3968d65032a5ab222ade14d1bc513b729668e78db19be7edfc09dccafdfce5ff3941da5ef3c872dd62240d8281536b01660b30758bf1707e213fe0af595d05d17cec208d8113d0e5b8423f371867eba01334990237cb549e4d0bfe1b6e59ba256c76a2af0fea6b543669481ec73e9062c16d2189795194b3ac3efa4fb5296807f7079c85368cf21e75fbab99388468e6bf0075ed453bfc762de497467a248251b8d2b66e14da367bf29e4339c2577807d0169db2a796c6a54c333267822965d788741197e163340542cba3019b831bda2e7054e6cb84d531bea8eedef7d8a96f91b138adcb59b0acb2279498cdaa94625c2dcde4dc5ef61c7e1f3359f6445a6ae08578064af7dd722aa127a9bbeb2d9bc853c0f270426977ad96dbdff4d3f48b1454e5dc0271394432962262927b826bcdd38099c2a8bce294f693d11ff49e90b3b323b6ad9bf7726b0c52fd3234743cbd477b8bc83bc6b1b735170ae84a564bda19e5b3cce70bbc097f8faf679be32622bf8d73fea417a6853047bb4f584395fa26178ecf6ac5a4b2808146d0587a44d012aa1ba65b39202ce5e223baf1208afb0303fae619accf501c2ee4d0f1d0c008e77d4dae24e1642c1a0365428d957a9100209b7e765f28296a94e78d1e43952c1ffd7a7c5f237335a2f5de20aeddeeaa550c9c03980eb10749fef422252c5acfdd126d3fcfe270426c6117223924a37091d983051d61133c7967b2268f5d1773bccc5aeda00519a02d1f14f4814e485719e4e7f5663e87c0099555da2998560895cdde4432e5d33db6787c84c11b0ad3c40c8c9aa4c49bbd51e317f47a42eaedaca872fe30038c2362a34856a794208109c4e2840987cac6e66fc6f12ec596d77da0ab71f931cfe13cb52904f5170429593603f58caf9d19868c615e1910ca46ba80b254504174726f118ec08b9ebc3d877ab9c3baf38dbd2c8725d1b46a1b5cedd07fb308adfa573c53dc0c3050709635a0957e379c2eecb64563a7a7cfb8cd537a52b068381f1464d44b8f12a10c5aa372b8f4b1e046c8880553e28cd2e8ac1cf9d52a3742bec51fe0c0b1fd0dad437a89f4bc8443e09e74a7443991022e588c7246cb1e6f09268cb218513d8da73668dc83fe932828357d69899a0a8f9d413a720acc2e8b3bfde0e2b3983c228fa4b4b502e76ac4889beb227254e13d1ba785626a431c67a0693c037df4f4ab1a78ba3d7cf4d8fa0768c1e5f1e7aefe7475f5e63d9781051f3ad7f9bcf4e45f35a969627d45a2982c40242a14066ae15ecc2ae3a1aa98fef5516190e2942583c75709c5454c70f46e6a239fa67df4f9810bff1d150b7083fc1018157338c4080f107568661ead8a9e9e670fb943ddb382a19ed626140f8d5f6f04fb625bd721d13951e1e8db956fbec4a40b292e5082ffacd2a40c87d1ccb7d7f606099bbe7cc27f8f7af0cfe61ce8a8a6ffa7d939ef7a1dda2f42f727367b184bb1e6a50376f8864eb9d75591035fd7a18f0d458b5daad5951e893597c684fd9b65daac547948eb88d5f3d5f9f1b981c01ebfe2897ce617a7d17b75979b0cecac80b1c42bd3daad935bee560fc12645b3cae03082b188bb39e655091a7afdf7f5b4f9900f29ef1b60d6c99f5de6a9969018a26d6c7f67fb23a3c99ccd3a71f2b8231ca8a2b35f8218ab832a32da808c2e26c1fe12f8d2658885bc606e5df9baf78e9d5917f43853f9ebdf08ac6edc5c7fc78fbed86529bd241927eafd9cddf5c60cf81e4ca3837f8f82184352785592a253848fb227c8bcd50f7360a7069f89be6dc693b691295870b596c971154efb45425e2984ff6bdf0b7271b4c8312ae7a714a6bcce8e8c80e1fb7339f31afa896cdc8ff21560a3fdfa6b3fafa18ae7adc34b1bc1fa41152e8dac12a8c4a2f8fd8faa1baf7b49d9d03b5a26eddb819753a03eb82a5300f4af71b273cb198a84fbd999ff4fb2fd5f9c5266b6d320d8efdb027f4f50a43335c90b579e71107def7022229d693b866083e1fbed957d689b2b141529118ad7db8ee358727d1ed363edd22c2abde7903c9577c6cb97fcf51725074289afc8293df0cb91877366ce5b836cae62a82f7bdc1fc8f44290dd3eef84e73e637aa06e43b60e83e205e20c847ec4a699f13785084777f527c8ed8fb88b26d166fa735dfc67e782be4a8a9ca3dae9be9609987270ed10f1978efc302dbcbeea2ea402a39226036704e23cdda8accdc048ca2e6378739ba9dcd2e8e5c3f6807b2485cab18d48ecfc904bbe2f19fbc8934b0a7b6c27ec424834a09f2ba6eff354603c06872c71ddc33cd0767706e694425e02c900a140464d7378af7019ff2b3ea56b3335eb176c9ef13ee03af2cf433c95712c8f75e6a13ae9cff5472bebe83a06a5abe5406c14e5d550959caff84773e5f7a87e40a3020dadad64ad93e219d8476fa8ab3900042d6eaa04f8d1923045bdf94d475e1c46d3c755a3725c3155aa14531754091dacabcd619858fde7ef6a07107e839d6e15fb201d1acfd8ba8f4ed8254423481cb81884a2556d426058d8a6efce7bbdf2ca9d4ab648281f18d10cfd183712dc9f41506690ee8cd18db5b965d5c8a6c552e93461ddb4a238936ac5c5ffbe0d408623d549ba636fde9c791880b61d70516eb691b32fffd68dd544d0648cc6b32d2ce1163879d12f4f9689dd9940f45485a9c78dccf17e2b1346ca5b35ed2d6dffa38aa007bc9ef44cab434b3637da9d1e65e4ee439f7c869d7ea55b298a2cce5f88058177787082b1c7c84d389a37dd02eaffd78a8a813955077928277fc4ad2df7b76ed3422149654872090eeb57b25645762e595043943c67d13e6bcf10046be880e81a841983ee63785b44afc816f37dfda078bce198a0704c8f36b4ce40f7addda2e1c9fcd4ba19ffee3a7f962742a9d4bda72a0e0f645a1525a04102e6bac686854664c70859f043261e5e1e24dd0fdeacb609319cc9908846c1e0cc52a29a47ff2c536ac5d8c87b2ace50c4cc00217d2ad7e94c020db31354cae3952c7d9eaa9361a479dee3527f4e97ed35afcd0db44d29abdde8b6c68fb7a21b747929cc0de3a7e205bcf038fdb22b0235760b88864de228a6b3bab5cde42a8cba82750986e17c968bd37c08c285c506719f272d6c7208202c3a12f69396e1d912e5a1dbdc2cdd5276f0af9c1420540f3cbce9c9155d2023d81f297b34398c794df7ddb75846ed05afc76c14a7c8b5bb719c8fde308a61b61f70cd10e26c24321dee0493c56413a1562a7708535eac58956168e8da1bdace1ee0e9947e28a7b55a438f484ed429048002488959a0299351e3cbca5c6b9ed8a4f074096b28fb8790d7ad5eed676a09f1c302460b8b69ed4dfb2dfa44f3081a1a5c418d8db9c1a231a288b184c647628e9b4c052841676b700894229a8dc2d69397b467b58fdb82496885d38aa58804f75b0e7b836c8459cc23a493bb314e3fa5a19eda2ee3dc61539f583d905baaa9dd5e431cc97b259bc2776f080f4af51913913b825f92409c68fb69d8729c8937d731e9ae412fe84e529dfe2a296c82713c22246de5ced1a46e30473d4d0048c752f78cdcb8323c381785791f2a8ad28f4e77f82f26a575df5d7e254d1e641c40b04666a7df368ec18bca6a784e23bc33276678708e09d153ddb0bfeeb894b2ace6b1388af16d9bc3def006338190f3aa5cfdc21d29a4c653abc881173929e71d19ba780f6688190625585f8b9b149911b8b498c10b0e906742a7769b14abcbf07701d1a4d37b14e036331aa061b863e82f581e0db3dedfa929a46f62787a9d51de1db3a689e2e0990f07b22fbb9922abb043b1f61bee71ca4432ccd84edfb13707e72eec53100951b63b73426e17b2214204d6a1f509d405736defda0a96475b30681e6e222b93644b73ed92afcb72e47f6033d6905df5a139e29cb08a843bf51b1bb3bca47314c11a1f15484a09df9e5f622a4385bbdfb29ceb1361fe2a96cf8b18076905886d22e08335e820b1cd5727de24aed8b132b1810e927f3f3eb8badfa0558f8b3e3bc98c771cbbc0f52a3b760e6b638320ff50d799db1318d1f86c2810f224e9d48b49ba7828c08902427db9caef9d6a009d69bf28b76e58b69a8bd93c2e87a225842c271b85500c9c74a3bc21fa3c4486212f6d450d7007b84b6882ea05be39d4bdc9cb656c144734b1e0bf4f8bb2edac09b85be2ad99fff8fa56bdae12a9892ea2f3163fbc6be9d992de0437e8d08dfa06e5ad436d73f674cb3ae2b92e89fd343935a1ebadc13df931850023d4df4dde4bf88be4d8b4a3292a5f4341d24afe2b600dc2ca52da9a5d1381f2e5c3285c16a4938e9e3de5d5cfbbcccee8663698f530908cf7850e3c21cd290a74e7134981fe4639f6953307f28637f30771004a902a2bc78e61912aed896e2edfa34c3f5c97792e996b43ee391c09d790982fd5eec473658011bda53b40466a16a554ae8df50399a4ede3c7e61ccd42caba791eea1216b00c186ef1f04cbc06efb995166f8656d25008aebf16220dc30bb0ec61409286251545eb5928c1022c98db22f5618576f52e6979659aab314e5e6afb851183ee505b08b1b9b97a0824aab1d533fb697f535043df015f5c5dbfe70784728e216af2ecf32b7d5efc9d451ec2bc6f0638bd0451fb99770464f81385e107f49cce067bf7a27b30bcb65c8ecb2f859fa2a9af78940563e4b9500c214897e0c1c57b87f518ee0b8253fc27cc5a9db4ec323f2154a8ee30a989a5e644a11d283385c56867e8d8945646e26c0eb9b5ed52b8c05396eda8b8ec148f9549ea3dec938f93bf8b2a78c62a0891e5814d40160cb676abf0ef48036a3e0a89ee6e2d1cf965d475535bd3e31a0a58aea62bc50672f3db8ea40efdf4cf56bce6baea3f5d77d2b97b2a2be19f8ca8d3552cb5f06dee734c0d2fe62ac9d18346e35573834bb27b7fa684a133581fcc56e6d06e5845e958a1017628c07d32b4f542b801500d61e728fef8aef897c21b3cbc1e9852e72be8b4f9d2b5303d0ac7a19b050fa84ba5ecf53d5d0c681b727ad4e1d3d29e9370f42da46239f0dc53cf804a423a7f0b660c0fe9f5af7d54251a325b31c60c09fbeb051426cdebbd117d398120c2e2b1ecc50ada40c02d46c90905d4bd41c2fa03baf549b2df2abcb370d008d905fbd0851edac48bbe4b4bb000c2c33e471515375341b3e3da08fe588af6c194ecb159cc413f9edbe3651f6870d1e60ed39f4adab5f2e0cd022eeab08513c02b998573c0ac664a3c1b0353490b93e5bf570ef44f59b3a19b74764a45fec36d6fb407d9c52755298c077363dc128061d7a96f3f36892c2fa83142db9ea88d1b709a70efae67ceeea1cea09f7f6070bf09a11e56483d0b0a39767ec739232d5287b8d6901719ebcad64fc46154cc8a0a1026cb86cd5f78c8d055b5d8a57716c13908aefaee38026ef108900ee8835fad2beaf7e703b0a240b4e851a2fe4e3b8229b2d74b2a86fdd16bebd9e44ddaa3eec47422cbba92897d369e5448260629735b3b5b771ea07ce7e376dce02ad659f1376d3f5e95f2267421f8b14b735f2064bba53cb71c44b5403f39d6415c4cf0e24548b6e6356f584a7c4e08e8ff68cb733e5eea0fabeaec2bb30c87cb02783cf6c2a74669dc1006c939b3c7dea47fd05f675a262281b8f9e5316f5ca6793b855b2cbce124bf13b47050e88380aa17b420fdb143b97ad29c6c1b68306b6010a0310bd429fea199418a69f79f3bf80f387e5754bb9e542cc3bdfbae75852f52d88528b9c5b6dbea9fc6c3799ec703f8556a13883db0b862225152198b5d902bf3574d5d4354b7ab5667eea473b2f899e7418b99fb5c95062929326de9892948aef8dc01cd20ac5ddfa0cf57dc216ae5fb0d5383b87fe329f5cc8d891c0ceeb9f63fdc2d29841bb052620b2f9d8baa4139016d0699004d6cf2a953b0109d01cf7973944708eeb7d92ee8cc790991ca625b2f9b463705c8eba3132304f3a205bd150d8bdd1a69450f4a331d129cab690341b9280984cefd9d6fe970effedbba02af0432a086658236d6cf7ecdb0cdf3bbfe0da41164620157ac73630dfbd62d98b351bda19d3dec7ed7edfe188fa6d53980adc25f80728f7cf59a3d139eb84aad9cebdc684ce1ff353bf143af42a94923319940c495002ec51ea57ba9eccc5c038156ffa8dc8d449509f54877b7ab527ba50bfcec041a6e6d2f2b570ee12d8589dd4aefb1b6800177b6e2eddf63ec05013fea78b5445ae46afe885aa36ea4979595befa2a48d4fb1ed334e5233df6a111e7e8837e2901dbe19e6102733206803b9e51569cd0ef18d2d22b664d565ed4b5b6e89af4183b66e69b8d1ff60d2d07fe94c93380525676ec525d196784d91ba9f139c3dd32644d702b1c7648eee8c86a6c6e689c86c67d7a16d37ffbef1f656b046801eba1d331f84d021e881341bede3578f45916d5f3b2769cc3a00202a5bf749c79e8d933e5d78aa1a2885a0efdbcbbecd14cf485af695143340df2fa78690c669aeab6452b4cd93209770de3ea8cf02ec0a958ec4dd315c03ef97bf8810266022d0ad94f34aacc25ddc9da819f2f1323757b04b60eb440bdd6cfd1acb70aff2fb0f28824370016a642cd98666aaadb669aad36fcef90584429238751c74a3c14cf69a74be8bbddb724151ac56b7f793040c6e94d4d33355a9befa2db81e3cbc4eda2f4a1ca53911d1080be4e58c6b5e22b9aed94c0d015773ebc0c7e42775df1a04f298de28a39d98256d89167978a4daebd56ec480f5b198ed9f502ed6a27955d2c2965b3179654cf219856663ffe838c388492c49ac79d9c33650825969aa5b51d80f01cbe2ed1478b403f11fef9c8bc4e115decc63329748a0e1dd43a67895ddc1c85ad75aa616449106780d49079ac5847186fd9b73ea27c5d2130ea1a3bdaf28a14c98a06581aab3ae0222e4f075b032495c03da4f596a16a05ce168a852e541962ab42e1120a4abf03ba33b3b6f83d663611f4f17b9840996197ff748d642de785841dbf86975bcb4f24985bbfded873f196b20f84a7a9813a8b823d2e7ef84694d8c5925d98f35403d82fedcd9bad5b7b79818d789c27ccb52ed2680d57c779652252ca104aed747c7eb986ecd9f4cda346fd1146b69f14589051578052bed32c2c7f46060549e139fe6cc05c7e498048bfd7dc6df22e9167e16b3651fe0e346db82fb457a1843396a2a8e747a1b6b7c8de448a7129738fc67068af5a1d79bf3e2d1717aaefb39a4fc7fe2ae48dbd5b2db7144520261092d866a6328dfdbe77acbae7d76481e18ade3cbf45ce1246f9eadc4fffc0f7fa00535f872f4786027d1f23b597cd547f470048a4307e7cf5048781f6247fb1eba1e9fd6d06d4eccb1da2ee85158d166904f180f35bc7276fb2fbfecdddcf0b0eaf6bca189325fbd0de663020e2e7f1b39597e8ca9a511154f218e15fa353890af12ae18a23d7f63cd597182fa731bcea0331ecd0361184ea5d0f08f206f09c72882bf366f4a951065cf3ce15d6d3ad83e5252e41e3a9f6e786afe5ff6a58e3ad17e799470caa68fd5bb84cb114b24bd481e833383056cd74edbb90a6b9cc0178f5a301d09efc9e6ecda94084e0427e8b4d922e8ccb8","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
